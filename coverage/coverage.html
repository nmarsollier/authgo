
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>docs: Go Coverage Report</title>
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">github.com/nmarsollier/authgo/docs/docs.go (100.0%)</option>
				
				<option value="file1">github.com/nmarsollier/authgo/graph/entity.resolvers.go (0.0%)</option>
				
				<option value="file2">github.com/nmarsollier/authgo/graph/model/federation.go (0.0%)</option>
				
				<option value="file3">github.com/nmarsollier/authgo/graph/model/models_gen.go (0.0%)</option>
				
				<option value="file4">github.com/nmarsollier/authgo/graph/model/schema.go (0.0%)</option>
				
				<option value="file5">github.com/nmarsollier/authgo/graph/resolvers/change_password.go (0.0%)</option>
				
				<option value="file6">github.com/nmarsollier/authgo/graph/resolvers/current_user.go (0.0%)</option>
				
				<option value="file7">github.com/nmarsollier/authgo/graph/resolvers/disable.go (0.0%)</option>
				
				<option value="file8">github.com/nmarsollier/authgo/graph/resolvers/enable.go (0.0%)</option>
				
				<option value="file9">github.com/nmarsollier/authgo/graph/resolvers/find_user.go (0.0%)</option>
				
				<option value="file10">github.com/nmarsollier/authgo/graph/resolvers/grant.go (0.0%)</option>
				
				<option value="file11">github.com/nmarsollier/authgo/graph/resolvers/revoke.go (0.0%)</option>
				
				<option value="file12">github.com/nmarsollier/authgo/graph/resolvers/sign_in.go (0.0%)</option>
				
				<option value="file13">github.com/nmarsollier/authgo/graph/resolvers/sign_out.go (0.0%)</option>
				
				<option value="file14">github.com/nmarsollier/authgo/graph/resolvers/sign_up.go (0.0%)</option>
				
				<option value="file15">github.com/nmarsollier/authgo/graph/resolvers/user_mapper.go (0.0%)</option>
				
				<option value="file16">github.com/nmarsollier/authgo/graph/resolvers/users.go (0.0%)</option>
				
				<option value="file17">github.com/nmarsollier/authgo/graph/schema.resolvers.go (0.0%)</option>
				
				<option value="file18">github.com/nmarsollier/authgo/graph/server/server.go (0.0%)</option>
				
				<option value="file19">github.com/nmarsollier/authgo/graph/tools/auth.go (0.0%)</option>
				
				<option value="file20">github.com/nmarsollier/authgo/graph/tools/context.go (0.0%)</option>
				
				<option value="file21">github.com/nmarsollier/authgo/graph/tools/logger.go (0.0%)</option>
				
				<option value="file22">github.com/nmarsollier/authgo/main.go (0.0%)</option>
				
				<option value="file23">github.com/nmarsollier/authgo/rabbit/rabbit.go (25.0%)</option>
				
				<option value="file24">github.com/nmarsollier/authgo/rabbit/rabbit_channel.go (0.0%)</option>
				
				<option value="file25">github.com/nmarsollier/authgo/rabbit/rabbit_channel_mocks.go (100.0%)</option>
				
				<option value="file26">github.com/nmarsollier/authgo/rabbit/send_logout.go (63.6%)</option>
				
				<option value="file27">github.com/nmarsollier/authgo/rabbit/test_tools.go (100.0%)</option>
				
				<option value="file28">github.com/nmarsollier/authgo/rest/get_user_signout.go (100.0%)</option>
				
				<option value="file29">github.com/nmarsollier/authgo/rest/get_users.go (100.0%)</option>
				
				<option value="file30">github.com/nmarsollier/authgo/rest/get_users_current.go (100.0%)</option>
				
				<option value="file31">github.com/nmarsollier/authgo/rest/post_user.go (100.0%)</option>
				
				<option value="file32">github.com/nmarsollier/authgo/rest/post_user_password.go (100.0%)</option>
				
				<option value="file33">github.com/nmarsollier/authgo/rest/post_user_signin.go (100.0%)</option>
				
				<option value="file34">github.com/nmarsollier/authgo/rest/post_users_id_disable.go (100.0%)</option>
				
				<option value="file35">github.com/nmarsollier/authgo/rest/post_users_id_enable.go (100.0%)</option>
				
				<option value="file36">github.com/nmarsollier/authgo/rest/post_users_id_grant.go (80.0%)</option>
				
				<option value="file37">github.com/nmarsollier/authgo/rest/post_users_id_revoke.go (80.0%)</option>
				
				<option value="file38">github.com/nmarsollier/authgo/rest/router.go (83.3%)</option>
				
				<option value="file39">github.com/nmarsollier/authgo/rest/server/error.go (92.3%)</option>
				
				<option value="file40">github.com/nmarsollier/authgo/rest/server/hedaer_authorization.go (100.0%)</option>
				
				<option value="file41">github.com/nmarsollier/authgo/rest/server/logger.go (93.8%)</option>
				
				<option value="file42">github.com/nmarsollier/authgo/rest/server/server.go (100.0%)</option>
				
				<option value="file43">github.com/nmarsollier/authgo/rest/server/test_utils.go (100.0%)</option>
				
				<option value="file44">github.com/nmarsollier/authgo/rest/server/validate_admin.go (100.0%)</option>
				
				<option value="file45">github.com/nmarsollier/authgo/rest/server/validate_logged_in.go (100.0%)</option>
				
				<option value="file46">github.com/nmarsollier/authgo/token/cache.go (90.9%)</option>
				
				<option value="file47">github.com/nmarsollier/authgo/token/create_service.go (100.0%)</option>
				
				<option value="file48">github.com/nmarsollier/authgo/token/find_service.go (100.0%)</option>
				
				<option value="file49">github.com/nmarsollier/authgo/token/invalidate_service.go (80.0%)</option>
				
				<option value="file50">github.com/nmarsollier/authgo/token/repository.go (54.3%)</option>
				
				<option value="file51">github.com/nmarsollier/authgo/token/schema.go (83.3%)</option>
				
				<option value="file52">github.com/nmarsollier/authgo/token/test_tools.go (100.0%)</option>
				
				<option value="file53">github.com/nmarsollier/authgo/token/validate_service.go (100.0%)</option>
				
				<option value="file54">github.com/nmarsollier/authgo/tools/db/connection.go (0.0%)</option>
				
				<option value="file55">github.com/nmarsollier/authgo/tools/db/mongo_collection.go (0.0%)</option>
				
				<option value="file56">github.com/nmarsollier/authgo/tools/db/mongo_collection_mocks.go (100.0%)</option>
				
				<option value="file57">github.com/nmarsollier/authgo/tools/db/test_tools.go (100.0%)</option>
				
				<option value="file58">github.com/nmarsollier/authgo/tools/db/tools.go (85.7%)</option>
				
				<option value="file59">github.com/nmarsollier/authgo/tools/env/env.go (90.0%)</option>
				
				<option value="file60">github.com/nmarsollier/authgo/tools/errs/rest_error.go (100.0%)</option>
				
				<option value="file61">github.com/nmarsollier/authgo/tools/errs/validation.go (87.5%)</option>
				
				<option value="file62">github.com/nmarsollier/authgo/tools/log/logger.go (50.0%)</option>
				
				<option value="file63">github.com/nmarsollier/authgo/tools/log/logrus_logger.go (50.0%)</option>
				
				<option value="file64">github.com/nmarsollier/authgo/tools/log/logrus_logger_mocks.go (88.6%)</option>
				
				<option value="file65">github.com/nmarsollier/authgo/tools/log/test_tools.go (100.0%)</option>
				
				<option value="file66">github.com/nmarsollier/authgo/user/change_password_service.go (88.9%)</option>
				
				<option value="file67">github.com/nmarsollier/authgo/user/disable_service.go (100.0%)</option>
				
				<option value="file68">github.com/nmarsollier/authgo/user/enable_service.go (100.0%)</option>
				
				<option value="file69">github.com/nmarsollier/authgo/user/find_all_service.go (100.0%)</option>
				
				<option value="file70">github.com/nmarsollier/authgo/user/get_service.go (100.0%)</option>
				
				<option value="file71">github.com/nmarsollier/authgo/user/grant_service.go (100.0%)</option>
				
				<option value="file72">github.com/nmarsollier/authgo/user/granted_service.go (100.0%)</option>
				
				<option value="file73">github.com/nmarsollier/authgo/user/repository.go (67.5%)</option>
				
				<option value="file74">github.com/nmarsollier/authgo/user/revoke_service.go (100.0%)</option>
				
				<option value="file75">github.com/nmarsollier/authgo/user/schema.go (92.3%)</option>
				
				<option value="file76">github.com/nmarsollier/authgo/user/signin_service.go (92.9%)</option>
				
				<option value="file77">github.com/nmarsollier/authgo/user/signup_service.go (92.9%)</option>
				
				<option value="file78">github.com/nmarsollier/authgo/user/test_tools.go (100.0%)</option>
				
				<option value="file79">github.com/nmarsollier/authgo/user/user_response.go (0.0%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">not covered</span>
				<span class="cov8">covered</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" style="display: none">// Package docs Code generated by swaggo/swag. DO NOT EDIT
package docs

import "github.com/swaggo/swag"

const docTemplate = `{
    "schemes": {{ marshal .Schemes }},
    "swagger": "2.0",
    "info": {
        "description": "{{escape .Description}}",
        "title": "{{.Title}}",
        "contact": {
            "name": "Nestor Marsollier",
            "email": "nmarsollier@gmail.com"
        },
        "version": "{{.Version}}"
    },
    "host": "{{.Host}}",
    "basePath": "{{.BasePath}}",
    "paths": {
        "/rabbit/logout": {
            "put": {
                "description": "SendLogout envía un broadcast a rabbit con logout. Esto no es Rest es RabbitMQ.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Rabbit"
                ],
                "summary": "Mensage Rabbit",
                "parameters": [
                    {
                        "description": "Token deshabilitado",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/rabbit.message"
                        }
                    }
                ],
                "responses": {}
            }
        },
        "/v1/user": {
            "post": {
                "description": "Registra un nuevo usuario en el sistema.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Seguridad"
                ],
                "summary": "Registrar Usuario",
                "parameters": [
                    {
                        "description": "Informacion de ususario",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/user.SignUpRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User Token",
                        "schema": {
                            "$ref": "#/definitions/user.TokenResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/errs.ValidationErr"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    }
                }
            }
        },
        "/v1/user/password": {
            "post": {
                "description": "Cambia la contraseña del usuario actual.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Seguridad"
                ],
                "summary": "Cambiar Password",
                "parameters": [
                    {
                        "description": "Passwords",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/rest.changePasswordBody"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Bearer {token}",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "No Content"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/errs.ValidationErr"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    }
                }
            }
        },
        "/v1/user/signin": {
            "post": {
                "description": "Loguea un usuario en el sistema.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Seguridad"
                ],
                "summary": "Login",
                "parameters": [
                    {
                        "description": "Sign in information",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/user.SignInRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User Token",
                        "schema": {
                            "$ref": "#/definitions/user.TokenResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/errs.ValidationErr"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    }
                }
            }
        },
        "/v1/user/signout": {
            "get": {
                "description": "Desloguea un usuario en el sistema, invalida el token.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Seguridad"
                ],
                "summary": "Logout",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer {token}",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "No Content"
                    },
                    "500": {
                        "description": "Error response",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    }
                }
            }
        },
        "/v1/users": {
            "get": {
                "description": "Obtiene información de todos los usuarios. El usuario logueado debe tener permisos \"admin\".",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Seguridad"
                ],
                "summary": "Listar Usuarios",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer {token}",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Users",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/user.UserResponse"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/errs.ValidationErr"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    }
                }
            }
        },
        "/v1/users/:userID/grant": {
            "post": {
                "description": "Otorga permisos al usuario indicado, el usuario logueado tiene que tener permiso \"admin\".",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Seguridad"
                ],
                "summary": "Haiblitar permisos",
                "parameters": [
                    {
                        "type": "string",
                        "description": "ID del usuario a habilitar permiso",
                        "name": "userId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer {token}",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "description": "Permisos a Habilitar",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/rest.grantPermissionBody"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "No Content"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/errs.ValidationErr"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    }
                }
            }
        },
        "/v1/users/:userID/revoke": {
            "post": {
                "description": "Quita permisos al usuario indicado, el usuario logueado tiene que tener permiso \"admin\".",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Seguridad"
                ],
                "summary": "Quitar permisos",
                "parameters": [
                    {
                        "type": "string",
                        "description": "ID del usuario a quitar permiso",
                        "name": "userId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer {token}",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    },
                    {
                        "description": "Permisos a Qutiar",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/rest.grantPermissionBody"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "No Content"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/errs.ValidationErr"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    }
                }
            }
        },
        "/v1/users/:userId/disable": {
            "post": {
                "description": "Deshabilita un usuario en el sistema. El usuario logueado debe tener permisos \"admin\".",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Seguridad"
                ],
                "summary": "Deshabilitar Usuario",
                "parameters": [
                    {
                        "type": "string",
                        "description": "ID del usuario a deshabilitar",
                        "name": "userId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer {token}",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "No Content"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/errs.ValidationErr"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    }
                }
            }
        },
        "/v1/users/:userId/enable": {
            "post": {
                "description": "Habilita un usuario en el sistema. El usuario logueado debe tener permisos \"admin\".",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Seguridad"
                ],
                "summary": "Enable User",
                "parameters": [
                    {
                        "type": "string",
                        "description": "ID del usuario a habilitar",
                        "name": "userId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Bearer {token}",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "No Content"
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/errs.ValidationErr"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    }
                }
            }
        },
        "/v1/users/current": {
            "get": {
                "description": "Obtiene información del usuario actual.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Seguridad"
                ],
                "summary": "Usuario Actual",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer {token}",
                        "name": "Authorization",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User data",
                        "schema": {
                            "$ref": "#/definitions/user.UserResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/errs.ValidationErr"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/server.ErrorData"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "errs.ValidationErr": {
            "type": "object",
            "properties": {
                "messages": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/errs.errField"
                    }
                }
            }
        },
        "errs.errField": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string"
                },
                "path": {
                    "type": "string"
                }
            }
        },
        "rabbit.message": {
            "type": "object",
            "properties": {
                "correlation_id": {
                    "type": "string",
                    "example": "123123"
                },
                "message": {
                    "type": "string",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbklEIjoiNjZiNjBlYzhlMGYzYzY4OTUzMzJlOWNmIiwidXNlcklEIjoiNjZhZmQ3ZWU4YTBhYjRjZjQ0YTQ3NDcyIn0.who7upBctOpmlVmTvOgH1qFKOHKXmuQCkEjMV3qeySg"
                }
            }
        },
        "rest.changePasswordBody": {
            "type": "object",
            "required": [
                "currentPassword",
                "newPassword"
            ],
            "properties": {
                "currentPassword": {
                    "type": "string",
                    "maxLength": 100,
                    "minLength": 1
                },
                "newPassword": {
                    "type": "string",
                    "maxLength": 100,
                    "minLength": 1
                }
            }
        },
        "rest.grantPermissionBody": {
            "type": "object",
            "required": [
                "permissions"
            ],
            "properties": {
                "permissions": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "server.ErrorData": {
            "type": "object",
            "properties": {
                "error": {
                    "type": "string"
                }
            }
        },
        "user.SignInRequest": {
            "type": "object",
            "required": [
                "login",
                "password"
            ],
            "properties": {
                "login": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            }
        },
        "user.SignUpRequest": {
            "type": "object",
            "required": [
                "login",
                "name",
                "password"
            ],
            "properties": {
                "login": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            }
        },
        "user.TokenResponse": {
            "type": "object",
            "properties": {
                "token": {
                    "type": "string"
                }
            }
        },
        "user.UserResponse": {
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean"
                },
                "id": {
                    "type": "string"
                },
                "login": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "permissions": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        }
    }
}`

// SwaggerInfo holds exported Swagger Info so clients can modify it
var SwaggerInfo = &amp;swag.Spec{
        Version:          "1.0",
        Host:             "localhost:3000",
        BasePath:         "/v1",
        Schemes:          []string{},
        Title:            "AuthGo",
        Description:      "Microservicio de Autentificación.",
        InfoInstanceName: "swagger",
        SwaggerTemplate:  docTemplate,
        LeftDelim:        "{{",
        RightDelim:       "}}",
}

func init() <span class="cov8" title="1">{
        swag.Register(SwaggerInfo.InstanceName(), SwaggerInfo)
}</span>
</pre>
		
		<pre class="file" id="file1" style="display: none">package graph

// This file will be automatically regenerated based on the schema, any resolver implementations
// will be copied through when generating and any unknown code will be moved to the end.
// Code generated by github.com/99designs/gqlgen version v0.17.56

import (
        "context"

        "github.com/nmarsollier/authgo/graph/model"
        "github.com/nmarsollier/authgo/graph/resolvers"
)

// FindUserByID is the resolver for the findUserByID field.
func (r *entityResolver) FindUserByID(ctx context.Context, id string) (*model.User, error) <span class="cov0" title="0">{
        user, err := resolvers.FindUserByID(ctx, id)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return user, nil</span>
}

// Entity returns model.EntityResolver implementation.
func (r *Resolver) Entity() model.EntityResolver <span class="cov0" title="0">{ return &amp;entityResolver{r} }</span>

type entityResolver struct{ *Resolver }
</pre>
		
		<pre class="file" id="file2" style="display: none">// Code generated by github.com/99designs/gqlgen, DO NOT EDIT.

package model

import (
        "context"
        "errors"
        "fmt"
        "strings"
        "sync"

        "github.com/99designs/gqlgen/plugin/federation/fedruntime"
)

var (
        ErrUnknownType  = errors.New("unknown type")
        ErrTypeNotFound = errors.New("type not found")
)

func (ec *executionContext) __resolve__service(ctx context.Context) (fedruntime.Service, error) <span class="cov0" title="0">{
        if ec.DisableIntrospection </span><span class="cov0" title="0">{
                return fedruntime.Service{}, errors.New("federated introspection disabled")
        }</span>

        <span class="cov0" title="0">var sdl []string

        for _, src := range sources </span><span class="cov0" title="0">{
                if src.BuiltIn </span><span class="cov0" title="0">{
                        continue</span>
                }
                <span class="cov0" title="0">sdl = append(sdl, src.Input)</span>
        }

        <span class="cov0" title="0">return fedruntime.Service{
                SDL: strings.Join(sdl, "\n"),
        }, nil</span>
}

func (ec *executionContext) __resolve_entities(ctx context.Context, representations []map[string]interface{}) []fedruntime.Entity <span class="cov0" title="0">{
        list := make([]fedruntime.Entity, len(representations))

        repsMap := ec.buildRepresentationGroups(ctx, representations)

        switch len(repsMap) </span>{
        case 0:<span class="cov0" title="0">
                return list</span>
        case 1:<span class="cov0" title="0">
                for typeName, reps := range repsMap </span><span class="cov0" title="0">{
                        ec.resolveEntityGroup(ctx, typeName, reps, list)
                }</span>
                <span class="cov0" title="0">return list</span>
        default:<span class="cov0" title="0">
                var g sync.WaitGroup
                g.Add(len(repsMap))
                for typeName, reps := range repsMap </span><span class="cov0" title="0">{
                        go func(typeName string, reps []EntityWithIndex) </span><span class="cov0" title="0">{
                                ec.resolveEntityGroup(ctx, typeName, reps, list)
                                g.Done()
                        }</span>(typeName, reps)
                }
                <span class="cov0" title="0">g.Wait()
                return list</span>
        }
}

type EntityWithIndex struct {
        // The index in the original representation array
        index  int
        entity EntityRepresentation
}

// EntityRepresentation is the JSON representation of an entity sent by the Router
// used as the inputs for us to resolve.
//
// We make it a map because we know the top level JSON is always an object.
type EntityRepresentation map[string]any

// We group entities by typename so that we can parallelize their resolution.
// This is particularly helpful when there are entity groups in multi mode.
func (ec *executionContext) buildRepresentationGroups(
        ctx context.Context,
        representations []map[string]any,
) map[string][]EntityWithIndex <span class="cov0" title="0">{
        repsMap := make(map[string][]EntityWithIndex)
        for i, rep := range representations </span><span class="cov0" title="0">{
                typeName, ok := rep["__typename"].(string)
                if !ok </span><span class="cov0" title="0">{
                        // If there is no __typename, we just skip the representation;
                        // we just won't be resolving these unknown types.
                        ec.Error(ctx, errors.New("__typename must be an existing string"))
                        continue</span>
                }

                <span class="cov0" title="0">repsMap[typeName] = append(repsMap[typeName], EntityWithIndex{
                        index:  i,
                        entity: rep,
                })</span>
        }

        <span class="cov0" title="0">return repsMap</span>
}

func (ec *executionContext) resolveEntityGroup(
        ctx context.Context,
        typeName string,
        reps []EntityWithIndex,
        list []fedruntime.Entity,
) <span class="cov0" title="0">{
        if isMulti(typeName) </span><span class="cov0" title="0">{
                err := ec.resolveManyEntities(ctx, typeName, reps, list)
                if err != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, err)
                }</span>
        } else<span class="cov0" title="0"> {
                // if there are multiple entities to resolve, parallelize (similar to
                // graphql.FieldSet.Dispatch)
                var e sync.WaitGroup
                e.Add(len(reps))
                for i, rep := range reps </span><span class="cov0" title="0">{
                        i, rep := i, rep
                        go func(i int, rep EntityWithIndex) </span><span class="cov0" title="0">{
                                entity, err := ec.resolveEntity(ctx, typeName, rep.entity)
                                if err != nil </span><span class="cov0" title="0">{
                                        ec.Error(ctx, err)
                                }</span> else<span class="cov0" title="0"> {
                                        list[rep.index] = entity
                                }</span>
                                <span class="cov0" title="0">e.Done()</span>
                        }(i, rep)
                }
                <span class="cov0" title="0">e.Wait()</span>
        }
}

func isMulti(typeName string) bool <span class="cov0" title="0">{
        switch typeName </span>{
        default:<span class="cov0" title="0">
                return false</span>
        }
}

func (ec *executionContext) resolveEntity(
        ctx context.Context,
        typeName string,
        rep EntityRepresentation,
) (e fedruntime.Entity, err error) <span class="cov0" title="0">{
        // we need to do our own panic handling, because we may be called in a
        // goroutine, where the usual panic handling can't catch us
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                }</span>
        }()

        <span class="cov0" title="0">switch typeName </span>{
        case "User":<span class="cov0" title="0">
                resolverName, err := entityResolverNameForUser(ctx, rep)
                if err != nil </span><span class="cov0" title="0">{
                        return nil, fmt.Errorf(`finding resolver for Entity "User": %w`, err)
                }</span>
                <span class="cov0" title="0">switch resolverName </span>{

                case "findUserByID":<span class="cov0" title="0">
                        id0, err := ec.unmarshalNString2string(ctx, rep["id"])
                        if err != nil </span><span class="cov0" title="0">{
                                return nil, fmt.Errorf(`unmarshalling param 0 for findUserByID(): %w`, err)
                        }</span>
                        <span class="cov0" title="0">entity, err := ec.resolvers.Entity().FindUserByID(ctx, id0)
                        if err != nil </span><span class="cov0" title="0">{
                                return nil, fmt.Errorf(`resolving Entity "User": %w`, err)
                        }</span>

                        <span class="cov0" title="0">return entity, nil</span>
                }

        }
        <span class="cov0" title="0">return nil, fmt.Errorf("%w: %s", ErrUnknownType, typeName)</span>
}

func (ec *executionContext) resolveManyEntities(
        ctx context.Context,
        typeName string,
        reps []EntityWithIndex,
        list []fedruntime.Entity,
) (err error) <span class="cov0" title="0">{
        // we need to do our own panic handling, because we may be called in a
        // goroutine, where the usual panic handling can't catch us
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                }</span>
        }()

        <span class="cov0" title="0">switch typeName </span>{

        default:<span class="cov0" title="0">
                return errors.New("unknown type: " + typeName)</span>
        }
}

func entityResolverNameForUser(ctx context.Context, rep EntityRepresentation) (string, error) <span class="cov0" title="0">{
        for </span><span class="cov0" title="0">{
                var (
                        m   EntityRepresentation
                        val interface{}
                        ok  bool
                )
                _ = val
                // if all of the KeyFields values for this resolver are null,
                // we shouldn't use use it
                allNull := true
                m = rep
                val, ok = m["id"]
                if !ok </span><span class="cov0" title="0">{
                        break</span>
                }
                <span class="cov0" title="0">if allNull </span><span class="cov0" title="0">{
                        allNull = val == nil
                }</span>
                <span class="cov0" title="0">if allNull </span><span class="cov0" title="0">{
                        break</span>
                }
                <span class="cov0" title="0">return "findUserByID", nil</span>
        }
        <span class="cov0" title="0">return "", fmt.Errorf("%w for User", ErrTypeNotFound)</span>
}
</pre>
		
		<pre class="file" id="file3" style="display: none">// Code generated by github.com/99designs/gqlgen, DO NOT EDIT.

package model

type Mutation struct {
}

type Query struct {
}

type Token struct {
        Token string `json:"token"`
}

type User struct {
        ID          string   `json:"id"`
        Name        string   `json:"name"`
        Permissions []string `json:"permissions"`
        Login       string   `json:"login"`
        Enabled     bool     `json:"enabled"`
}

func (User) IsEntity() {<span class="cov0" title="0">}</span>
</pre>
		
		<pre class="file" id="file4" style="display: none">// Code generated by github.com/99designs/gqlgen, DO NOT EDIT.

package model

import (
        "bytes"
        "context"
        "errors"
        "fmt"
        "strconv"
        "sync"
        "sync/atomic"

        "github.com/99designs/gqlgen/graphql"
        "github.com/99designs/gqlgen/graphql/introspection"
        "github.com/99designs/gqlgen/plugin/federation/fedruntime"
        gqlparser "github.com/vektah/gqlparser/v2"
        "github.com/vektah/gqlparser/v2/ast"
)

// region    ************************** generated!.gotpl **************************

// NewExecutableSchema creates an ExecutableSchema from the ResolverRoot interface.
func NewExecutableSchema(cfg Config) graphql.ExecutableSchema <span class="cov0" title="0">{
        return &amp;executableSchema{
                schema:     cfg.Schema,
                resolvers:  cfg.Resolvers,
                directives: cfg.Directives,
                complexity: cfg.Complexity,
        }
}</span>

type Config struct {
        Schema     *ast.Schema
        Resolvers  ResolverRoot
        Directives DirectiveRoot
        Complexity ComplexityRoot
}

type ResolverRoot interface {
        Entity() EntityResolver
        Mutation() MutationResolver
        Query() QueryResolver
}

type DirectiveRoot struct {
}

type ComplexityRoot struct {
        Entity struct {
                FindUserByID func(childComplexity int, id string) int
        }

        Mutation struct {
                ChangePassword func(childComplexity int, oldPassword string, newPassword string) int
                Disable        func(childComplexity int, userID string) int
                Enable         func(childComplexity int, userID string) int
                Grant          func(childComplexity int, userID string, permissions []string) int
                Revoke         func(childComplexity int, userID string, permissions []string) int
                SignIn         func(childComplexity int, login string, password string) int
                SignOut        func(childComplexity int) int
                SignUp         func(childComplexity int, name string, login string, password string) int
        }

        Query struct {
                CurrentUser        func(childComplexity int) int
                Users              func(childComplexity int) int
                __resolve__service func(childComplexity int) int
                __resolve_entities func(childComplexity int, representations []map[string]interface{}) int
        }

        Token struct {
                Token func(childComplexity int) int
        }

        User struct {
                Enabled     func(childComplexity int) int
                ID          func(childComplexity int) int
                Login       func(childComplexity int) int
                Name        func(childComplexity int) int
                Permissions func(childComplexity int) int
        }

        _Service struct {
                SDL func(childComplexity int) int
        }
}

type EntityResolver interface {
        FindUserByID(ctx context.Context, id string) (*User, error)
}
type MutationResolver interface {
        SignIn(ctx context.Context, login string, password string) (*Token, error)
        SignUp(ctx context.Context, name string, login string, password string) (*Token, error)
        SignOut(ctx context.Context) (bool, error)
        ChangePassword(ctx context.Context, oldPassword string, newPassword string) (bool, error)
        Enable(ctx context.Context, userID string) (bool, error)
        Disable(ctx context.Context, userID string) (bool, error)
        Grant(ctx context.Context, userID string, permissions []string) (bool, error)
        Revoke(ctx context.Context, userID string, permissions []string) (bool, error)
}
type QueryResolver interface {
        CurrentUser(ctx context.Context) (*User, error)
        Users(ctx context.Context) ([]*User, error)
}

type executableSchema struct {
        schema     *ast.Schema
        resolvers  ResolverRoot
        directives DirectiveRoot
        complexity ComplexityRoot
}

func (e *executableSchema) Schema() *ast.Schema <span class="cov0" title="0">{
        if e.schema != nil </span><span class="cov0" title="0">{
                return e.schema
        }</span>
        <span class="cov0" title="0">return parsedSchema</span>
}

func (e *executableSchema) Complexity(typeName, field string, childComplexity int, rawArgs map[string]interface{}) (int, bool) <span class="cov0" title="0">{
        ec := executionContext{nil, e, 0, 0, nil}
        _ = ec
        switch typeName + "." + field </span>{

        case "Entity.findUserByID":<span class="cov0" title="0">
                if e.complexity.Entity.FindUserByID == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">args, err := ec.field_Entity_findUserByID_args(context.TODO(), rawArgs)
                if err != nil </span><span class="cov0" title="0">{
                        return 0, false
                }</span>

                <span class="cov0" title="0">return e.complexity.Entity.FindUserByID(childComplexity, args["id"].(string)), true</span>

        case "Mutation.changePassword":<span class="cov0" title="0">
                if e.complexity.Mutation.ChangePassword == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">args, err := ec.field_Mutation_changePassword_args(context.TODO(), rawArgs)
                if err != nil </span><span class="cov0" title="0">{
                        return 0, false
                }</span>

                <span class="cov0" title="0">return e.complexity.Mutation.ChangePassword(childComplexity, args["oldPassword"].(string), args["newPassword"].(string)), true</span>

        case "Mutation.disable":<span class="cov0" title="0">
                if e.complexity.Mutation.Disable == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">args, err := ec.field_Mutation_disable_args(context.TODO(), rawArgs)
                if err != nil </span><span class="cov0" title="0">{
                        return 0, false
                }</span>

                <span class="cov0" title="0">return e.complexity.Mutation.Disable(childComplexity, args["userId"].(string)), true</span>

        case "Mutation.enable":<span class="cov0" title="0">
                if e.complexity.Mutation.Enable == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">args, err := ec.field_Mutation_enable_args(context.TODO(), rawArgs)
                if err != nil </span><span class="cov0" title="0">{
                        return 0, false
                }</span>

                <span class="cov0" title="0">return e.complexity.Mutation.Enable(childComplexity, args["userId"].(string)), true</span>

        case "Mutation.grant":<span class="cov0" title="0">
                if e.complexity.Mutation.Grant == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">args, err := ec.field_Mutation_grant_args(context.TODO(), rawArgs)
                if err != nil </span><span class="cov0" title="0">{
                        return 0, false
                }</span>

                <span class="cov0" title="0">return e.complexity.Mutation.Grant(childComplexity, args["userId"].(string), args["permissions"].([]string)), true</span>

        case "Mutation.revoke":<span class="cov0" title="0">
                if e.complexity.Mutation.Revoke == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">args, err := ec.field_Mutation_revoke_args(context.TODO(), rawArgs)
                if err != nil </span><span class="cov0" title="0">{
                        return 0, false
                }</span>

                <span class="cov0" title="0">return e.complexity.Mutation.Revoke(childComplexity, args["userId"].(string), args["permissions"].([]string)), true</span>

        case "Mutation.signIn":<span class="cov0" title="0">
                if e.complexity.Mutation.SignIn == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">args, err := ec.field_Mutation_signIn_args(context.TODO(), rawArgs)
                if err != nil </span><span class="cov0" title="0">{
                        return 0, false
                }</span>

                <span class="cov0" title="0">return e.complexity.Mutation.SignIn(childComplexity, args["login"].(string), args["password"].(string)), true</span>

        case "Mutation.signOut":<span class="cov0" title="0">
                if e.complexity.Mutation.SignOut == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">return e.complexity.Mutation.SignOut(childComplexity), true</span>

        case "Mutation.signUp":<span class="cov0" title="0">
                if e.complexity.Mutation.SignUp == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">args, err := ec.field_Mutation_signUp_args(context.TODO(), rawArgs)
                if err != nil </span><span class="cov0" title="0">{
                        return 0, false
                }</span>

                <span class="cov0" title="0">return e.complexity.Mutation.SignUp(childComplexity, args["name"].(string), args["login"].(string), args["password"].(string)), true</span>

        case "Query.currentUser":<span class="cov0" title="0">
                if e.complexity.Query.CurrentUser == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">return e.complexity.Query.CurrentUser(childComplexity), true</span>

        case "Query.users":<span class="cov0" title="0">
                if e.complexity.Query.Users == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">return e.complexity.Query.Users(childComplexity), true</span>

        case "Query._service":<span class="cov0" title="0">
                if e.complexity.Query.__resolve__service == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">return e.complexity.Query.__resolve__service(childComplexity), true</span>

        case "Query._entities":<span class="cov0" title="0">
                if e.complexity.Query.__resolve_entities == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">args, err := ec.field_Query__entities_args(context.TODO(), rawArgs)
                if err != nil </span><span class="cov0" title="0">{
                        return 0, false
                }</span>

                <span class="cov0" title="0">return e.complexity.Query.__resolve_entities(childComplexity, args["representations"].([]map[string]interface{})), true</span>

        case "Token.token":<span class="cov0" title="0">
                if e.complexity.Token.Token == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">return e.complexity.Token.Token(childComplexity), true</span>

        case "User.enabled":<span class="cov0" title="0">
                if e.complexity.User.Enabled == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">return e.complexity.User.Enabled(childComplexity), true</span>

        case "User.id":<span class="cov0" title="0">
                if e.complexity.User.ID == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">return e.complexity.User.ID(childComplexity), true</span>

        case "User.login":<span class="cov0" title="0">
                if e.complexity.User.Login == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">return e.complexity.User.Login(childComplexity), true</span>

        case "User.name":<span class="cov0" title="0">
                if e.complexity.User.Name == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">return e.complexity.User.Name(childComplexity), true</span>

        case "User.permissions":<span class="cov0" title="0">
                if e.complexity.User.Permissions == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">return e.complexity.User.Permissions(childComplexity), true</span>

        case "_Service.sdl":<span class="cov0" title="0">
                if e.complexity._Service.SDL == nil </span><span class="cov0" title="0">{
                        break</span>
                }

                <span class="cov0" title="0">return e.complexity._Service.SDL(childComplexity), true</span>

        }
        <span class="cov0" title="0">return 0, false</span>
}

func (e *executableSchema) Exec(ctx context.Context) graphql.ResponseHandler <span class="cov0" title="0">{
        opCtx := graphql.GetOperationContext(ctx)
        ec := executionContext{opCtx, e, 0, 0, make(chan graphql.DeferredResult)}
        inputUnmarshalMap := graphql.BuildUnmarshalerMap()
        first := true

        switch opCtx.Operation.Operation </span>{
        case ast.Query:<span class="cov0" title="0">
                return func(ctx context.Context) *graphql.Response </span><span class="cov0" title="0">{
                        var response graphql.Response
                        var data graphql.Marshaler
                        if first </span><span class="cov0" title="0">{
                                first = false
                                ctx = graphql.WithUnmarshalerMap(ctx, inputUnmarshalMap)
                                data = ec._Query(ctx, opCtx.Operation.SelectionSet)
                        }</span> else<span class="cov0" title="0"> {
                                if atomic.LoadInt32(&amp;ec.pendingDeferred) &gt; 0 </span><span class="cov0" title="0">{
                                        result := &lt;-ec.deferredResults
                                        atomic.AddInt32(&amp;ec.pendingDeferred, -1)
                                        data = result.Result
                                        response.Path = result.Path
                                        response.Label = result.Label
                                        response.Errors = result.Errors
                                }</span> else<span class="cov0" title="0"> {
                                        return nil
                                }</span>
                        }
                        <span class="cov0" title="0">var buf bytes.Buffer
                        data.MarshalGQL(&amp;buf)
                        response.Data = buf.Bytes()
                        if atomic.LoadInt32(&amp;ec.deferred) &gt; 0 </span><span class="cov0" title="0">{
                                hasNext := atomic.LoadInt32(&amp;ec.pendingDeferred) &gt; 0
                                response.HasNext = &amp;hasNext
                        }</span>

                        <span class="cov0" title="0">return &amp;response</span>
                }
        case ast.Mutation:<span class="cov0" title="0">
                return func(ctx context.Context) *graphql.Response </span><span class="cov0" title="0">{
                        if !first </span><span class="cov0" title="0">{
                                return nil
                        }</span>
                        <span class="cov0" title="0">first = false
                        ctx = graphql.WithUnmarshalerMap(ctx, inputUnmarshalMap)
                        data := ec._Mutation(ctx, opCtx.Operation.SelectionSet)
                        var buf bytes.Buffer
                        data.MarshalGQL(&amp;buf)

                        return &amp;graphql.Response{
                                Data: buf.Bytes(),
                        }</span>
                }

        default:<span class="cov0" title="0">
                return graphql.OneShot(graphql.ErrorResponse(ctx, "unsupported GraphQL operation"))</span>
        }
}

type executionContext struct {
        *graphql.OperationContext
        *executableSchema
        deferred        int32
        pendingDeferred int32
        deferredResults chan graphql.DeferredResult
}

func (ec *executionContext) processDeferredGroup(dg graphql.DeferredGroup) <span class="cov0" title="0">{
        atomic.AddInt32(&amp;ec.pendingDeferred, 1)
        go func() </span><span class="cov0" title="0">{
                ctx := graphql.WithFreshResponseContext(dg.Context)
                dg.FieldSet.Dispatch(ctx)
                ds := graphql.DeferredResult{
                        Path:   dg.Path,
                        Label:  dg.Label,
                        Result: dg.FieldSet,
                        Errors: graphql.GetErrors(ctx),
                }
                // null fields should bubble up
                if dg.FieldSet.Invalids &gt; 0 </span><span class="cov0" title="0">{
                        ds.Result = graphql.Null
                }</span>
                <span class="cov0" title="0">ec.deferredResults &lt;- ds</span>
        }()
}

func (ec *executionContext) introspectSchema() (*introspection.Schema, error) <span class="cov0" title="0">{
        if ec.DisableIntrospection </span><span class="cov0" title="0">{
                return nil, errors.New("introspection disabled")
        }</span>
        <span class="cov0" title="0">return introspection.WrapSchema(ec.Schema()), nil</span>
}

func (ec *executionContext) introspectType(name string) (*introspection.Type, error) <span class="cov0" title="0">{
        if ec.DisableIntrospection </span><span class="cov0" title="0">{
                return nil, errors.New("introspection disabled")
        }</span>
        <span class="cov0" title="0">return introspection.WrapTypeFromDef(ec.Schema(), ec.Schema().Types[name]), nil</span>
}

var sources = []*ast.Source{
        {Name: "../schema.graphqls", Input: `type Token {
  token: String!
}

type Mutation {
  signIn(login: String!, password: String!): Token!
  signUp(name: String!, login: String!, password: String!): Token!
  signOut: Boolean!
  changePassword(oldPassword: String!, newPassword: String!): Boolean!
  enable(userId: String!): Boolean!
  disable(userId: String!): Boolean!
  grant(userId: String!, permissions: [String!]): Boolean!
  revoke(userId: String!, permissions: [String!]): Boolean!
}

type User @key(fields: "id") {
  id: String!
  name: String!
  permissions: [String!]!
  login: String!
  enabled: Boolean!
}

type Query {
  currentUser: User!
  users: [User!]!
}
`, BuiltIn: false},
        {Name: "../../federation/directives.graphql", Input: `
        directive @key(fields: _FieldSet!) repeatable on OBJECT | INTERFACE
        directive @requires(fields: _FieldSet!) on FIELD_DEFINITION
        directive @provides(fields: _FieldSet!) on FIELD_DEFINITION
        directive @extends on OBJECT | INTERFACE
        directive @external on FIELD_DEFINITION
        scalar _Any
        scalar _FieldSet
`, BuiltIn: true},
        {Name: "../../federation/entity.graphql", Input: `
# a union of all types that use the @key directive
union _Entity = User

# fake type to build resolver interfaces for users to implement
type Entity {
        findUserByID(id: String!,): User!
}

type _Service {
  sdl: String
}

extend type Query {
  _entities(representations: [_Any!]!): [_Entity]!
  _service: _Service!
}
`, BuiltIn: true},
}
var parsedSchema = gqlparser.MustLoadSchema(sources...)

// endregion ************************** generated!.gotpl **************************

// region    ***************************** args.gotpl *****************************

func (ec *executionContext) field_Entity_findUserByID_args(ctx context.Context, rawArgs map[string]interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        var err error
        args := map[string]interface{}{}
        arg0, err := ec.field_Entity_findUserByID_argsID(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["id"] = arg0
        return args, nil</span>
}
func (ec *executionContext) field_Entity_findUserByID_argsID(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("id"))
        if tmp, ok := rawArgs["id"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_changePassword_args(ctx context.Context, rawArgs map[string]interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        var err error
        args := map[string]interface{}{}
        arg0, err := ec.field_Mutation_changePassword_argsOldPassword(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["oldPassword"] = arg0
        arg1, err := ec.field_Mutation_changePassword_argsNewPassword(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["newPassword"] = arg1
        return args, nil</span>
}
func (ec *executionContext) field_Mutation_changePassword_argsOldPassword(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("oldPassword"))
        if tmp, ok := rawArgs["oldPassword"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_changePassword_argsNewPassword(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("newPassword"))
        if tmp, ok := rawArgs["newPassword"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_disable_args(ctx context.Context, rawArgs map[string]interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        var err error
        args := map[string]interface{}{}
        arg0, err := ec.field_Mutation_disable_argsUserID(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["userId"] = arg0
        return args, nil</span>
}
func (ec *executionContext) field_Mutation_disable_argsUserID(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("userId"))
        if tmp, ok := rawArgs["userId"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_enable_args(ctx context.Context, rawArgs map[string]interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        var err error
        args := map[string]interface{}{}
        arg0, err := ec.field_Mutation_enable_argsUserID(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["userId"] = arg0
        return args, nil</span>
}
func (ec *executionContext) field_Mutation_enable_argsUserID(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("userId"))
        if tmp, ok := rawArgs["userId"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_grant_args(ctx context.Context, rawArgs map[string]interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        var err error
        args := map[string]interface{}{}
        arg0, err := ec.field_Mutation_grant_argsUserID(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["userId"] = arg0
        arg1, err := ec.field_Mutation_grant_argsPermissions(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["permissions"] = arg1
        return args, nil</span>
}
func (ec *executionContext) field_Mutation_grant_argsUserID(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("userId"))
        if tmp, ok := rawArgs["userId"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_grant_argsPermissions(
        ctx context.Context,
        rawArgs map[string]interface{},
) ([]string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("permissions"))
        if tmp, ok := rawArgs["permissions"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalOString2ᚕstringᚄ(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal []string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_revoke_args(ctx context.Context, rawArgs map[string]interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        var err error
        args := map[string]interface{}{}
        arg0, err := ec.field_Mutation_revoke_argsUserID(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["userId"] = arg0
        arg1, err := ec.field_Mutation_revoke_argsPermissions(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["permissions"] = arg1
        return args, nil</span>
}
func (ec *executionContext) field_Mutation_revoke_argsUserID(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("userId"))
        if tmp, ok := rawArgs["userId"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_revoke_argsPermissions(
        ctx context.Context,
        rawArgs map[string]interface{},
) ([]string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("permissions"))
        if tmp, ok := rawArgs["permissions"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalOString2ᚕstringᚄ(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal []string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_signIn_args(ctx context.Context, rawArgs map[string]interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        var err error
        args := map[string]interface{}{}
        arg0, err := ec.field_Mutation_signIn_argsLogin(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["login"] = arg0
        arg1, err := ec.field_Mutation_signIn_argsPassword(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["password"] = arg1
        return args, nil</span>
}
func (ec *executionContext) field_Mutation_signIn_argsLogin(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("login"))
        if tmp, ok := rawArgs["login"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_signIn_argsPassword(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("password"))
        if tmp, ok := rawArgs["password"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_signUp_args(ctx context.Context, rawArgs map[string]interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        var err error
        args := map[string]interface{}{}
        arg0, err := ec.field_Mutation_signUp_argsName(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["name"] = arg0
        arg1, err := ec.field_Mutation_signUp_argsLogin(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["login"] = arg1
        arg2, err := ec.field_Mutation_signUp_argsPassword(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["password"] = arg2
        return args, nil</span>
}
func (ec *executionContext) field_Mutation_signUp_argsName(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("name"))
        if tmp, ok := rawArgs["name"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_signUp_argsLogin(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("login"))
        if tmp, ok := rawArgs["login"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Mutation_signUp_argsPassword(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("password"))
        if tmp, ok := rawArgs["password"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Query___type_args(ctx context.Context, rawArgs map[string]interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        var err error
        args := map[string]interface{}{}
        arg0, err := ec.field_Query___type_argsName(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["name"] = arg0
        return args, nil</span>
}
func (ec *executionContext) field_Query___type_argsName(
        ctx context.Context,
        rawArgs map[string]interface{},
) (string, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("name"))
        if tmp, ok := rawArgs["name"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalNString2string(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal string
        return zeroVal, nil</span>
}

func (ec *executionContext) field_Query__entities_args(ctx context.Context, rawArgs map[string]interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        var err error
        args := map[string]interface{}{}
        arg0, err := ec.field_Query__entities_argsRepresentations(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["representations"] = arg0
        return args, nil</span>
}
func (ec *executionContext) field_Query__entities_argsRepresentations(
        ctx context.Context,
        rawArgs map[string]interface{},
) ([]map[string]interface{}, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("representations"))
        if tmp, ok := rawArgs["representations"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalN_Any2ᚕmapᚄ(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal []map[string]interface{}
        return zeroVal, nil</span>
}

func (ec *executionContext) field___Type_enumValues_args(ctx context.Context, rawArgs map[string]interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        var err error
        args := map[string]interface{}{}
        arg0, err := ec.field___Type_enumValues_argsIncludeDeprecated(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["includeDeprecated"] = arg0
        return args, nil</span>
}
func (ec *executionContext) field___Type_enumValues_argsIncludeDeprecated(
        ctx context.Context,
        rawArgs map[string]interface{},
) (bool, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("includeDeprecated"))
        if tmp, ok := rawArgs["includeDeprecated"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalOBoolean2bool(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal bool
        return zeroVal, nil</span>
}

func (ec *executionContext) field___Type_fields_args(ctx context.Context, rawArgs map[string]interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        var err error
        args := map[string]interface{}{}
        arg0, err := ec.field___Type_fields_argsIncludeDeprecated(ctx, rawArgs)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">args["includeDeprecated"] = arg0
        return args, nil</span>
}
func (ec *executionContext) field___Type_fields_argsIncludeDeprecated(
        ctx context.Context,
        rawArgs map[string]interface{},
) (bool, error) <span class="cov0" title="0">{
        ctx = graphql.WithPathContext(ctx, graphql.NewPathWithField("includeDeprecated"))
        if tmp, ok := rawArgs["includeDeprecated"]; ok </span><span class="cov0" title="0">{
                return ec.unmarshalOBoolean2bool(ctx, tmp)
        }</span>

        <span class="cov0" title="0">var zeroVal bool
        return zeroVal, nil</span>
}

// endregion ***************************** args.gotpl *****************************

// region    ************************** directives.gotpl **************************

// endregion ************************** directives.gotpl **************************

// region    **************************** field.gotpl *****************************

func (ec *executionContext) _Entity_findUserByID(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Entity_findUserByID(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.resolvers.Entity().FindUserByID(rctx, fc.Args["id"].(string))
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(*User)
        fc.Result = res
        return ec.marshalNUser2ᚖgithubᚗcomᚋnmarsollierᚋauthgoᚋgraphᚋmodelᚐUser(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Entity_findUserByID(ctx context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Entity",
                Field:      field,
                IsMethod:   true,
                IsResolver: true,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "id":<span class="cov0" title="0">
                                return ec.fieldContext_User_id(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext_User_name(ctx, field)</span>
                        case "permissions":<span class="cov0" title="0">
                                return ec.fieldContext_User_permissions(ctx, field)</span>
                        case "login":<span class="cov0" title="0">
                                return ec.fieldContext_User_login(ctx, field)</span>
                        case "enabled":<span class="cov0" title="0">
                                return ec.fieldContext_User_enabled(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type User", field.Name)</span>
                },
        }
        <span class="cov0" title="0">defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                        ec.Error(ctx, err)
                }</span>
        }()
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        if fc.Args, err = ec.field_Entity_findUserByID_args(ctx, field.ArgumentMap(ec.Variables)); err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return fc, err
        }</span>
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Mutation_signIn(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Mutation_signIn(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.resolvers.Mutation().SignIn(rctx, fc.Args["login"].(string), fc.Args["password"].(string))
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(*Token)
        fc.Result = res
        return ec.marshalNToken2ᚖgithubᚗcomᚋnmarsollierᚋauthgoᚋgraphᚋmodelᚐToken(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Mutation_signIn(ctx context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Mutation",
                Field:      field,
                IsMethod:   true,
                IsResolver: true,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "token":<span class="cov0" title="0">
                                return ec.fieldContext_Token_token(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type Token", field.Name)</span>
                },
        }
        <span class="cov0" title="0">defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                        ec.Error(ctx, err)
                }</span>
        }()
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        if fc.Args, err = ec.field_Mutation_signIn_args(ctx, field.ArgumentMap(ec.Variables)); err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return fc, err
        }</span>
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Mutation_signUp(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Mutation_signUp(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.resolvers.Mutation().SignUp(rctx, fc.Args["name"].(string), fc.Args["login"].(string), fc.Args["password"].(string))
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(*Token)
        fc.Result = res
        return ec.marshalNToken2ᚖgithubᚗcomᚋnmarsollierᚋauthgoᚋgraphᚋmodelᚐToken(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Mutation_signUp(ctx context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Mutation",
                Field:      field,
                IsMethod:   true,
                IsResolver: true,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "token":<span class="cov0" title="0">
                                return ec.fieldContext_Token_token(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type Token", field.Name)</span>
                },
        }
        <span class="cov0" title="0">defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                        ec.Error(ctx, err)
                }</span>
        }()
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        if fc.Args, err = ec.field_Mutation_signUp_args(ctx, field.ArgumentMap(ec.Variables)); err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return fc, err
        }</span>
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Mutation_signOut(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Mutation_signOut(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.resolvers.Mutation().SignOut(rctx)
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(bool)
        fc.Result = res
        return ec.marshalNBoolean2bool(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Mutation_signOut(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Mutation",
                Field:      field,
                IsMethod:   true,
                IsResolver: true,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type Boolean does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Mutation_changePassword(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Mutation_changePassword(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.resolvers.Mutation().ChangePassword(rctx, fc.Args["oldPassword"].(string), fc.Args["newPassword"].(string))
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(bool)
        fc.Result = res
        return ec.marshalNBoolean2bool(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Mutation_changePassword(ctx context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Mutation",
                Field:      field,
                IsMethod:   true,
                IsResolver: true,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type Boolean does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                        ec.Error(ctx, err)
                }</span>
        }()
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        if fc.Args, err = ec.field_Mutation_changePassword_args(ctx, field.ArgumentMap(ec.Variables)); err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return fc, err
        }</span>
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Mutation_enable(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Mutation_enable(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.resolvers.Mutation().Enable(rctx, fc.Args["userId"].(string))
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(bool)
        fc.Result = res
        return ec.marshalNBoolean2bool(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Mutation_enable(ctx context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Mutation",
                Field:      field,
                IsMethod:   true,
                IsResolver: true,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type Boolean does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                        ec.Error(ctx, err)
                }</span>
        }()
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        if fc.Args, err = ec.field_Mutation_enable_args(ctx, field.ArgumentMap(ec.Variables)); err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return fc, err
        }</span>
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Mutation_disable(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Mutation_disable(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.resolvers.Mutation().Disable(rctx, fc.Args["userId"].(string))
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(bool)
        fc.Result = res
        return ec.marshalNBoolean2bool(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Mutation_disable(ctx context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Mutation",
                Field:      field,
                IsMethod:   true,
                IsResolver: true,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type Boolean does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                        ec.Error(ctx, err)
                }</span>
        }()
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        if fc.Args, err = ec.field_Mutation_disable_args(ctx, field.ArgumentMap(ec.Variables)); err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return fc, err
        }</span>
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Mutation_grant(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Mutation_grant(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.resolvers.Mutation().Grant(rctx, fc.Args["userId"].(string), fc.Args["permissions"].([]string))
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(bool)
        fc.Result = res
        return ec.marshalNBoolean2bool(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Mutation_grant(ctx context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Mutation",
                Field:      field,
                IsMethod:   true,
                IsResolver: true,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type Boolean does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                        ec.Error(ctx, err)
                }</span>
        }()
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        if fc.Args, err = ec.field_Mutation_grant_args(ctx, field.ArgumentMap(ec.Variables)); err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return fc, err
        }</span>
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Mutation_revoke(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Mutation_revoke(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.resolvers.Mutation().Revoke(rctx, fc.Args["userId"].(string), fc.Args["permissions"].([]string))
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(bool)
        fc.Result = res
        return ec.marshalNBoolean2bool(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Mutation_revoke(ctx context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Mutation",
                Field:      field,
                IsMethod:   true,
                IsResolver: true,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type Boolean does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                        ec.Error(ctx, err)
                }</span>
        }()
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        if fc.Args, err = ec.field_Mutation_revoke_args(ctx, field.ArgumentMap(ec.Variables)); err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return fc, err
        }</span>
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Query_currentUser(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Query_currentUser(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.resolvers.Query().CurrentUser(rctx)
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(*User)
        fc.Result = res
        return ec.marshalNUser2ᚖgithubᚗcomᚋnmarsollierᚋauthgoᚋgraphᚋmodelᚐUser(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Query_currentUser(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Query",
                Field:      field,
                IsMethod:   true,
                IsResolver: true,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "id":<span class="cov0" title="0">
                                return ec.fieldContext_User_id(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext_User_name(ctx, field)</span>
                        case "permissions":<span class="cov0" title="0">
                                return ec.fieldContext_User_permissions(ctx, field)</span>
                        case "login":<span class="cov0" title="0">
                                return ec.fieldContext_User_login(ctx, field)</span>
                        case "enabled":<span class="cov0" title="0">
                                return ec.fieldContext_User_enabled(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type User", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Query_users(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Query_users(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.resolvers.Query().Users(rctx)
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.([]*User)
        fc.Result = res
        return ec.marshalNUser2ᚕᚖgithubᚗcomᚋnmarsollierᚋauthgoᚋgraphᚋmodelᚐUserᚄ(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Query_users(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Query",
                Field:      field,
                IsMethod:   true,
                IsResolver: true,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "id":<span class="cov0" title="0">
                                return ec.fieldContext_User_id(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext_User_name(ctx, field)</span>
                        case "permissions":<span class="cov0" title="0">
                                return ec.fieldContext_User_permissions(ctx, field)</span>
                        case "login":<span class="cov0" title="0">
                                return ec.fieldContext_User_login(ctx, field)</span>
                        case "enabled":<span class="cov0" title="0">
                                return ec.fieldContext_User_enabled(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type User", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Query__entities(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Query__entities(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.__resolve_entities(ctx, fc.Args["representations"].([]map[string]interface{})), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.([]fedruntime.Entity)
        fc.Result = res
        return ec.marshalN_Entity2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋpluginᚋfederationᚋfedruntimeᚐEntity(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Query__entities(ctx context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Query",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type _Entity does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                        ec.Error(ctx, err)
                }</span>
        }()
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        if fc.Args, err = ec.field_Query__entities_args(ctx, field.ArgumentMap(ec.Variables)); err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return fc, err
        }</span>
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Query__service(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Query__service(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.__resolve__service(ctx)
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(fedruntime.Service)
        fc.Result = res
        return ec.marshalN_Service2githubᚗcomᚋ99designsᚋgqlgenᚋpluginᚋfederationᚋfedruntimeᚐService(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Query__service(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Query",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "sdl":<span class="cov0" title="0">
                                return ec.fieldContext__Service_sdl(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type _Service", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Query___type(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Query___type(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.introspectType(fc.Args["name"].(string))
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*introspection.Type)
        fc.Result = res
        return ec.marshalO__Type2ᚖgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐType(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Query___type(ctx context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Query",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "kind":<span class="cov0" title="0">
                                return ec.fieldContext___Type_kind(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___Type_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Type_description(ctx, field)</span>
                        case "fields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_fields(ctx, field)</span>
                        case "interfaces":<span class="cov0" title="0">
                                return ec.fieldContext___Type_interfaces(ctx, field)</span>
                        case "possibleTypes":<span class="cov0" title="0">
                                return ec.fieldContext___Type_possibleTypes(ctx, field)</span>
                        case "enumValues":<span class="cov0" title="0">
                                return ec.fieldContext___Type_enumValues(ctx, field)</span>
                        case "inputFields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_inputFields(ctx, field)</span>
                        case "ofType":<span class="cov0" title="0">
                                return ec.fieldContext___Type_ofType(ctx, field)</span>
                        case "specifiedByURL":<span class="cov0" title="0">
                                return ec.fieldContext___Type_specifiedByURL(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Type", field.Name)</span>
                },
        }
        <span class="cov0" title="0">defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                        ec.Error(ctx, err)
                }</span>
        }()
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        if fc.Args, err = ec.field_Query___type_args(ctx, field.ArgumentMap(ec.Variables)); err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return fc, err
        }</span>
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Query___schema(ctx context.Context, field graphql.CollectedField) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Query___schema(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return ec.introspectSchema()
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*introspection.Schema)
        fc.Result = res
        return ec.marshalO__Schema2ᚖgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐSchema(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Query___schema(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Query",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Schema_description(ctx, field)</span>
                        case "types":<span class="cov0" title="0">
                                return ec.fieldContext___Schema_types(ctx, field)</span>
                        case "queryType":<span class="cov0" title="0">
                                return ec.fieldContext___Schema_queryType(ctx, field)</span>
                        case "mutationType":<span class="cov0" title="0">
                                return ec.fieldContext___Schema_mutationType(ctx, field)</span>
                        case "subscriptionType":<span class="cov0" title="0">
                                return ec.fieldContext___Schema_subscriptionType(ctx, field)</span>
                        case "directives":<span class="cov0" title="0">
                                return ec.fieldContext___Schema_directives(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Schema", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _Token_token(ctx context.Context, field graphql.CollectedField, obj *Token) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_Token_token(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Token, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(string)
        fc.Result = res
        return ec.marshalNString2string(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_Token_token(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "Token",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _User_id(ctx context.Context, field graphql.CollectedField, obj *User) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_User_id(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.ID, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(string)
        fc.Result = res
        return ec.marshalNString2string(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_User_id(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "User",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _User_name(ctx context.Context, field graphql.CollectedField, obj *User) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_User_name(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Name, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(string)
        fc.Result = res
        return ec.marshalNString2string(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_User_name(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "User",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _User_permissions(ctx context.Context, field graphql.CollectedField, obj *User) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_User_permissions(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Permissions, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.([]string)
        fc.Result = res
        return ec.marshalNString2ᚕstringᚄ(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_User_permissions(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "User",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _User_login(ctx context.Context, field graphql.CollectedField, obj *User) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_User_login(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Login, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(string)
        fc.Result = res
        return ec.marshalNString2string(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_User_login(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "User",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) _User_enabled(ctx context.Context, field graphql.CollectedField, obj *User) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext_User_enabled(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Enabled, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(bool)
        fc.Result = res
        return ec.marshalNBoolean2bool(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext_User_enabled(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "User",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type Boolean does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) __Service_sdl(ctx context.Context, field graphql.CollectedField, obj *fedruntime.Service) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext__Service_sdl(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.SDL, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(string)
        fc.Result = res
        return ec.marshalOString2string(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext__Service_sdl(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "_Service",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Directive_name(ctx context.Context, field graphql.CollectedField, obj *introspection.Directive) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Directive_name(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Name, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(string)
        fc.Result = res
        return ec.marshalNString2string(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Directive_name(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Directive",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Directive_description(ctx context.Context, field graphql.CollectedField, obj *introspection.Directive) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Directive_description(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Description(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*string)
        fc.Result = res
        return ec.marshalOString2ᚖstring(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Directive_description(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Directive",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Directive_locations(ctx context.Context, field graphql.CollectedField, obj *introspection.Directive) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Directive_locations(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Locations, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.([]string)
        fc.Result = res
        return ec.marshalN__DirectiveLocation2ᚕstringᚄ(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Directive_locations(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Directive",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type __DirectiveLocation does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Directive_args(ctx context.Context, field graphql.CollectedField, obj *introspection.Directive) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Directive_args(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Args, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.([]introspection.InputValue)
        fc.Result = res
        return ec.marshalN__InputValue2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐInputValueᚄ(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Directive_args(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Directive",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___InputValue_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___InputValue_description(ctx, field)</span>
                        case "type":<span class="cov0" title="0">
                                return ec.fieldContext___InputValue_type(ctx, field)</span>
                        case "defaultValue":<span class="cov0" title="0">
                                return ec.fieldContext___InputValue_defaultValue(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __InputValue", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Directive_isRepeatable(ctx context.Context, field graphql.CollectedField, obj *introspection.Directive) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Directive_isRepeatable(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.IsRepeatable, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(bool)
        fc.Result = res
        return ec.marshalNBoolean2bool(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Directive_isRepeatable(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Directive",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type Boolean does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___EnumValue_name(ctx context.Context, field graphql.CollectedField, obj *introspection.EnumValue) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___EnumValue_name(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Name, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(string)
        fc.Result = res
        return ec.marshalNString2string(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___EnumValue_name(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__EnumValue",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___EnumValue_description(ctx context.Context, field graphql.CollectedField, obj *introspection.EnumValue) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___EnumValue_description(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Description(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*string)
        fc.Result = res
        return ec.marshalOString2ᚖstring(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___EnumValue_description(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__EnumValue",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___EnumValue_isDeprecated(ctx context.Context, field graphql.CollectedField, obj *introspection.EnumValue) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___EnumValue_isDeprecated(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.IsDeprecated(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(bool)
        fc.Result = res
        return ec.marshalNBoolean2bool(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___EnumValue_isDeprecated(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__EnumValue",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type Boolean does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___EnumValue_deprecationReason(ctx context.Context, field graphql.CollectedField, obj *introspection.EnumValue) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___EnumValue_deprecationReason(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.DeprecationReason(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*string)
        fc.Result = res
        return ec.marshalOString2ᚖstring(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___EnumValue_deprecationReason(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__EnumValue",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Field_name(ctx context.Context, field graphql.CollectedField, obj *introspection.Field) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Field_name(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Name, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(string)
        fc.Result = res
        return ec.marshalNString2string(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Field_name(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Field",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Field_description(ctx context.Context, field graphql.CollectedField, obj *introspection.Field) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Field_description(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Description(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*string)
        fc.Result = res
        return ec.marshalOString2ᚖstring(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Field_description(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Field",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Field_args(ctx context.Context, field graphql.CollectedField, obj *introspection.Field) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Field_args(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Args, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.([]introspection.InputValue)
        fc.Result = res
        return ec.marshalN__InputValue2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐInputValueᚄ(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Field_args(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Field",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___InputValue_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___InputValue_description(ctx, field)</span>
                        case "type":<span class="cov0" title="0">
                                return ec.fieldContext___InputValue_type(ctx, field)</span>
                        case "defaultValue":<span class="cov0" title="0">
                                return ec.fieldContext___InputValue_defaultValue(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __InputValue", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Field_type(ctx context.Context, field graphql.CollectedField, obj *introspection.Field) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Field_type(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Type, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(*introspection.Type)
        fc.Result = res
        return ec.marshalN__Type2ᚖgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐType(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Field_type(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Field",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "kind":<span class="cov0" title="0">
                                return ec.fieldContext___Type_kind(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___Type_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Type_description(ctx, field)</span>
                        case "fields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_fields(ctx, field)</span>
                        case "interfaces":<span class="cov0" title="0">
                                return ec.fieldContext___Type_interfaces(ctx, field)</span>
                        case "possibleTypes":<span class="cov0" title="0">
                                return ec.fieldContext___Type_possibleTypes(ctx, field)</span>
                        case "enumValues":<span class="cov0" title="0">
                                return ec.fieldContext___Type_enumValues(ctx, field)</span>
                        case "inputFields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_inputFields(ctx, field)</span>
                        case "ofType":<span class="cov0" title="0">
                                return ec.fieldContext___Type_ofType(ctx, field)</span>
                        case "specifiedByURL":<span class="cov0" title="0">
                                return ec.fieldContext___Type_specifiedByURL(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Type", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Field_isDeprecated(ctx context.Context, field graphql.CollectedField, obj *introspection.Field) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Field_isDeprecated(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.IsDeprecated(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(bool)
        fc.Result = res
        return ec.marshalNBoolean2bool(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Field_isDeprecated(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Field",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type Boolean does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Field_deprecationReason(ctx context.Context, field graphql.CollectedField, obj *introspection.Field) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Field_deprecationReason(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.DeprecationReason(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*string)
        fc.Result = res
        return ec.marshalOString2ᚖstring(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Field_deprecationReason(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Field",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___InputValue_name(ctx context.Context, field graphql.CollectedField, obj *introspection.InputValue) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___InputValue_name(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Name, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(string)
        fc.Result = res
        return ec.marshalNString2string(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___InputValue_name(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__InputValue",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___InputValue_description(ctx context.Context, field graphql.CollectedField, obj *introspection.InputValue) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___InputValue_description(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Description(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*string)
        fc.Result = res
        return ec.marshalOString2ᚖstring(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___InputValue_description(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__InputValue",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___InputValue_type(ctx context.Context, field graphql.CollectedField, obj *introspection.InputValue) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___InputValue_type(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Type, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(*introspection.Type)
        fc.Result = res
        return ec.marshalN__Type2ᚖgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐType(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___InputValue_type(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__InputValue",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "kind":<span class="cov0" title="0">
                                return ec.fieldContext___Type_kind(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___Type_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Type_description(ctx, field)</span>
                        case "fields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_fields(ctx, field)</span>
                        case "interfaces":<span class="cov0" title="0">
                                return ec.fieldContext___Type_interfaces(ctx, field)</span>
                        case "possibleTypes":<span class="cov0" title="0">
                                return ec.fieldContext___Type_possibleTypes(ctx, field)</span>
                        case "enumValues":<span class="cov0" title="0">
                                return ec.fieldContext___Type_enumValues(ctx, field)</span>
                        case "inputFields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_inputFields(ctx, field)</span>
                        case "ofType":<span class="cov0" title="0">
                                return ec.fieldContext___Type_ofType(ctx, field)</span>
                        case "specifiedByURL":<span class="cov0" title="0">
                                return ec.fieldContext___Type_specifiedByURL(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Type", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___InputValue_defaultValue(ctx context.Context, field graphql.CollectedField, obj *introspection.InputValue) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___InputValue_defaultValue(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.DefaultValue, nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*string)
        fc.Result = res
        return ec.marshalOString2ᚖstring(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___InputValue_defaultValue(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__InputValue",
                Field:      field,
                IsMethod:   false,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Schema_description(ctx context.Context, field graphql.CollectedField, obj *introspection.Schema) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Schema_description(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Description(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*string)
        fc.Result = res
        return ec.marshalOString2ᚖstring(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Schema_description(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Schema",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Schema_types(ctx context.Context, field graphql.CollectedField, obj *introspection.Schema) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Schema_types(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Types(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.([]introspection.Type)
        fc.Result = res
        return ec.marshalN__Type2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐTypeᚄ(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Schema_types(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Schema",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "kind":<span class="cov0" title="0">
                                return ec.fieldContext___Type_kind(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___Type_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Type_description(ctx, field)</span>
                        case "fields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_fields(ctx, field)</span>
                        case "interfaces":<span class="cov0" title="0">
                                return ec.fieldContext___Type_interfaces(ctx, field)</span>
                        case "possibleTypes":<span class="cov0" title="0">
                                return ec.fieldContext___Type_possibleTypes(ctx, field)</span>
                        case "enumValues":<span class="cov0" title="0">
                                return ec.fieldContext___Type_enumValues(ctx, field)</span>
                        case "inputFields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_inputFields(ctx, field)</span>
                        case "ofType":<span class="cov0" title="0">
                                return ec.fieldContext___Type_ofType(ctx, field)</span>
                        case "specifiedByURL":<span class="cov0" title="0">
                                return ec.fieldContext___Type_specifiedByURL(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Type", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Schema_queryType(ctx context.Context, field graphql.CollectedField, obj *introspection.Schema) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Schema_queryType(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.QueryType(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(*introspection.Type)
        fc.Result = res
        return ec.marshalN__Type2ᚖgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐType(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Schema_queryType(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Schema",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "kind":<span class="cov0" title="0">
                                return ec.fieldContext___Type_kind(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___Type_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Type_description(ctx, field)</span>
                        case "fields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_fields(ctx, field)</span>
                        case "interfaces":<span class="cov0" title="0">
                                return ec.fieldContext___Type_interfaces(ctx, field)</span>
                        case "possibleTypes":<span class="cov0" title="0">
                                return ec.fieldContext___Type_possibleTypes(ctx, field)</span>
                        case "enumValues":<span class="cov0" title="0">
                                return ec.fieldContext___Type_enumValues(ctx, field)</span>
                        case "inputFields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_inputFields(ctx, field)</span>
                        case "ofType":<span class="cov0" title="0">
                                return ec.fieldContext___Type_ofType(ctx, field)</span>
                        case "specifiedByURL":<span class="cov0" title="0">
                                return ec.fieldContext___Type_specifiedByURL(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Type", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Schema_mutationType(ctx context.Context, field graphql.CollectedField, obj *introspection.Schema) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Schema_mutationType(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.MutationType(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*introspection.Type)
        fc.Result = res
        return ec.marshalO__Type2ᚖgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐType(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Schema_mutationType(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Schema",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "kind":<span class="cov0" title="0">
                                return ec.fieldContext___Type_kind(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___Type_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Type_description(ctx, field)</span>
                        case "fields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_fields(ctx, field)</span>
                        case "interfaces":<span class="cov0" title="0">
                                return ec.fieldContext___Type_interfaces(ctx, field)</span>
                        case "possibleTypes":<span class="cov0" title="0">
                                return ec.fieldContext___Type_possibleTypes(ctx, field)</span>
                        case "enumValues":<span class="cov0" title="0">
                                return ec.fieldContext___Type_enumValues(ctx, field)</span>
                        case "inputFields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_inputFields(ctx, field)</span>
                        case "ofType":<span class="cov0" title="0">
                                return ec.fieldContext___Type_ofType(ctx, field)</span>
                        case "specifiedByURL":<span class="cov0" title="0">
                                return ec.fieldContext___Type_specifiedByURL(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Type", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Schema_subscriptionType(ctx context.Context, field graphql.CollectedField, obj *introspection.Schema) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Schema_subscriptionType(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.SubscriptionType(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*introspection.Type)
        fc.Result = res
        return ec.marshalO__Type2ᚖgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐType(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Schema_subscriptionType(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Schema",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "kind":<span class="cov0" title="0">
                                return ec.fieldContext___Type_kind(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___Type_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Type_description(ctx, field)</span>
                        case "fields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_fields(ctx, field)</span>
                        case "interfaces":<span class="cov0" title="0">
                                return ec.fieldContext___Type_interfaces(ctx, field)</span>
                        case "possibleTypes":<span class="cov0" title="0">
                                return ec.fieldContext___Type_possibleTypes(ctx, field)</span>
                        case "enumValues":<span class="cov0" title="0">
                                return ec.fieldContext___Type_enumValues(ctx, field)</span>
                        case "inputFields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_inputFields(ctx, field)</span>
                        case "ofType":<span class="cov0" title="0">
                                return ec.fieldContext___Type_ofType(ctx, field)</span>
                        case "specifiedByURL":<span class="cov0" title="0">
                                return ec.fieldContext___Type_specifiedByURL(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Type", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Schema_directives(ctx context.Context, field graphql.CollectedField, obj *introspection.Schema) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Schema_directives(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Directives(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.([]introspection.Directive)
        fc.Result = res
        return ec.marshalN__Directive2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐDirectiveᚄ(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Schema_directives(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Schema",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___Directive_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Directive_description(ctx, field)</span>
                        case "locations":<span class="cov0" title="0">
                                return ec.fieldContext___Directive_locations(ctx, field)</span>
                        case "args":<span class="cov0" title="0">
                                return ec.fieldContext___Directive_args(ctx, field)</span>
                        case "isRepeatable":<span class="cov0" title="0">
                                return ec.fieldContext___Directive_isRepeatable(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Directive", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Type_kind(ctx context.Context, field graphql.CollectedField, obj *introspection.Type) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Type_kind(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Kind(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, fc) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "must not be null")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := resTmp.(string)
        fc.Result = res
        return ec.marshalN__TypeKind2string(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Type_kind(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Type",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type __TypeKind does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Type_name(ctx context.Context, field graphql.CollectedField, obj *introspection.Type) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Type_name(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Name(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*string)
        fc.Result = res
        return ec.marshalOString2ᚖstring(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Type_name(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Type",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Type_description(ctx context.Context, field graphql.CollectedField, obj *introspection.Type) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Type_description(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Description(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*string)
        fc.Result = res
        return ec.marshalOString2ᚖstring(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Type_description(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Type",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Type_fields(ctx context.Context, field graphql.CollectedField, obj *introspection.Type) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Type_fields(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Fields(fc.Args["includeDeprecated"].(bool)), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.([]introspection.Field)
        fc.Result = res
        return ec.marshalO__Field2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐFieldᚄ(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Type_fields(ctx context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Type",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___Field_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Field_description(ctx, field)</span>
                        case "args":<span class="cov0" title="0">
                                return ec.fieldContext___Field_args(ctx, field)</span>
                        case "type":<span class="cov0" title="0">
                                return ec.fieldContext___Field_type(ctx, field)</span>
                        case "isDeprecated":<span class="cov0" title="0">
                                return ec.fieldContext___Field_isDeprecated(ctx, field)</span>
                        case "deprecationReason":<span class="cov0" title="0">
                                return ec.fieldContext___Field_deprecationReason(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Field", field.Name)</span>
                },
        }
        <span class="cov0" title="0">defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                        ec.Error(ctx, err)
                }</span>
        }()
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        if fc.Args, err = ec.field___Type_fields_args(ctx, field.ArgumentMap(ec.Variables)); err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return fc, err
        }</span>
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Type_interfaces(ctx context.Context, field graphql.CollectedField, obj *introspection.Type) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Type_interfaces(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.Interfaces(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.([]introspection.Type)
        fc.Result = res
        return ec.marshalO__Type2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐTypeᚄ(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Type_interfaces(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Type",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "kind":<span class="cov0" title="0">
                                return ec.fieldContext___Type_kind(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___Type_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Type_description(ctx, field)</span>
                        case "fields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_fields(ctx, field)</span>
                        case "interfaces":<span class="cov0" title="0">
                                return ec.fieldContext___Type_interfaces(ctx, field)</span>
                        case "possibleTypes":<span class="cov0" title="0">
                                return ec.fieldContext___Type_possibleTypes(ctx, field)</span>
                        case "enumValues":<span class="cov0" title="0">
                                return ec.fieldContext___Type_enumValues(ctx, field)</span>
                        case "inputFields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_inputFields(ctx, field)</span>
                        case "ofType":<span class="cov0" title="0">
                                return ec.fieldContext___Type_ofType(ctx, field)</span>
                        case "specifiedByURL":<span class="cov0" title="0">
                                return ec.fieldContext___Type_specifiedByURL(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Type", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Type_possibleTypes(ctx context.Context, field graphql.CollectedField, obj *introspection.Type) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Type_possibleTypes(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.PossibleTypes(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.([]introspection.Type)
        fc.Result = res
        return ec.marshalO__Type2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐTypeᚄ(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Type_possibleTypes(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Type",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "kind":<span class="cov0" title="0">
                                return ec.fieldContext___Type_kind(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___Type_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Type_description(ctx, field)</span>
                        case "fields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_fields(ctx, field)</span>
                        case "interfaces":<span class="cov0" title="0">
                                return ec.fieldContext___Type_interfaces(ctx, field)</span>
                        case "possibleTypes":<span class="cov0" title="0">
                                return ec.fieldContext___Type_possibleTypes(ctx, field)</span>
                        case "enumValues":<span class="cov0" title="0">
                                return ec.fieldContext___Type_enumValues(ctx, field)</span>
                        case "inputFields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_inputFields(ctx, field)</span>
                        case "ofType":<span class="cov0" title="0">
                                return ec.fieldContext___Type_ofType(ctx, field)</span>
                        case "specifiedByURL":<span class="cov0" title="0">
                                return ec.fieldContext___Type_specifiedByURL(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Type", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Type_enumValues(ctx context.Context, field graphql.CollectedField, obj *introspection.Type) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Type_enumValues(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.EnumValues(fc.Args["includeDeprecated"].(bool)), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.([]introspection.EnumValue)
        fc.Result = res
        return ec.marshalO__EnumValue2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐEnumValueᚄ(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Type_enumValues(ctx context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Type",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___EnumValue_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___EnumValue_description(ctx, field)</span>
                        case "isDeprecated":<span class="cov0" title="0">
                                return ec.fieldContext___EnumValue_isDeprecated(ctx, field)</span>
                        case "deprecationReason":<span class="cov0" title="0">
                                return ec.fieldContext___EnumValue_deprecationReason(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __EnumValue", field.Name)</span>
                },
        }
        <span class="cov0" title="0">defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        err = ec.Recover(ctx, r)
                        ec.Error(ctx, err)
                }</span>
        }()
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        if fc.Args, err = ec.field___Type_enumValues_args(ctx, field.ArgumentMap(ec.Variables)); err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return fc, err
        }</span>
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Type_inputFields(ctx context.Context, field graphql.CollectedField, obj *introspection.Type) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Type_inputFields(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.InputFields(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.([]introspection.InputValue)
        fc.Result = res
        return ec.marshalO__InputValue2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐInputValueᚄ(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Type_inputFields(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Type",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___InputValue_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___InputValue_description(ctx, field)</span>
                        case "type":<span class="cov0" title="0">
                                return ec.fieldContext___InputValue_type(ctx, field)</span>
                        case "defaultValue":<span class="cov0" title="0">
                                return ec.fieldContext___InputValue_defaultValue(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __InputValue", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Type_ofType(ctx context.Context, field graphql.CollectedField, obj *introspection.Type) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Type_ofType(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.OfType(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*introspection.Type)
        fc.Result = res
        return ec.marshalO__Type2ᚖgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐType(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Type_ofType(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Type",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        switch field.Name </span>{
                        case "kind":<span class="cov0" title="0">
                                return ec.fieldContext___Type_kind(ctx, field)</span>
                        case "name":<span class="cov0" title="0">
                                return ec.fieldContext___Type_name(ctx, field)</span>
                        case "description":<span class="cov0" title="0">
                                return ec.fieldContext___Type_description(ctx, field)</span>
                        case "fields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_fields(ctx, field)</span>
                        case "interfaces":<span class="cov0" title="0">
                                return ec.fieldContext___Type_interfaces(ctx, field)</span>
                        case "possibleTypes":<span class="cov0" title="0">
                                return ec.fieldContext___Type_possibleTypes(ctx, field)</span>
                        case "enumValues":<span class="cov0" title="0">
                                return ec.fieldContext___Type_enumValues(ctx, field)</span>
                        case "inputFields":<span class="cov0" title="0">
                                return ec.fieldContext___Type_inputFields(ctx, field)</span>
                        case "ofType":<span class="cov0" title="0">
                                return ec.fieldContext___Type_ofType(ctx, field)</span>
                        case "specifiedByURL":<span class="cov0" title="0">
                                return ec.fieldContext___Type_specifiedByURL(ctx, field)</span>
                        }
                        <span class="cov0" title="0">return nil, fmt.Errorf("no field named %q was found under type __Type", field.Name)</span>
                },
        }
        <span class="cov0" title="0">return fc, nil</span>
}

func (ec *executionContext) ___Type_specifiedByURL(ctx context.Context, field graphql.CollectedField, obj *introspection.Type) (ret graphql.Marshaler) <span class="cov0" title="0">{
        fc, err := ec.fieldContext___Type_specifiedByURL(ctx, field)
        if err != nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ctx = graphql.WithFieldContext(ctx, fc)
        defer func() </span><span class="cov0" title="0">{
                if r := recover(); r != nil </span><span class="cov0" title="0">{
                        ec.Error(ctx, ec.Recover(ctx, r))
                        ret = graphql.Null
                }</span>
        }()
        <span class="cov0" title="0">resTmp, err := ec.ResolverMiddleware(ctx, func(rctx context.Context) (interface{}, error) </span><span class="cov0" title="0">{
                ctx = rctx // use context from middleware stack in children
                return obj.SpecifiedByURL(), nil
        }</span>)
        <span class="cov0" title="0">if err != nil </span><span class="cov0" title="0">{
                ec.Error(ctx, err)
                return graphql.Null
        }</span>
        <span class="cov0" title="0">if resTmp == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := resTmp.(*string)
        fc.Result = res
        return ec.marshalOString2ᚖstring(ctx, field.Selections, res)</span>
}

func (ec *executionContext) fieldContext___Type_specifiedByURL(_ context.Context, field graphql.CollectedField) (fc *graphql.FieldContext, err error) <span class="cov0" title="0">{
        fc = &amp;graphql.FieldContext{
                Object:     "__Type",
                Field:      field,
                IsMethod:   true,
                IsResolver: false,
                Child: func(ctx context.Context, field graphql.CollectedField) (*graphql.FieldContext, error) </span><span class="cov0" title="0">{
                        return nil, errors.New("field of type String does not have child fields")
                }</span>,
        }
        <span class="cov0" title="0">return fc, nil</span>
}

// endregion **************************** field.gotpl *****************************

// region    **************************** input.gotpl *****************************

// endregion **************************** input.gotpl *****************************

// region    ************************** interface.gotpl ***************************

func (ec *executionContext) __Entity(ctx context.Context, sel ast.SelectionSet, obj fedruntime.Entity) graphql.Marshaler <span class="cov0" title="0">{
        switch obj := (obj).(type) </span>{
        case nil:<span class="cov0" title="0">
                return graphql.Null</span>
        case User:<span class="cov0" title="0">
                return ec._User(ctx, sel, &amp;obj)</span>
        case *User:<span class="cov0" title="0">
                if obj == nil </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
                <span class="cov0" title="0">return ec._User(ctx, sel, obj)</span>
        default:<span class="cov0" title="0">
                panic(fmt.Errorf("unexpected type %T", obj))</span>
        }
}

// endregion ************************** interface.gotpl ***************************

// region    **************************** object.gotpl ****************************

var entityImplementors = []string{"Entity"}

func (ec *executionContext) _Entity(ctx context.Context, sel ast.SelectionSet) graphql.Marshaler <span class="cov0" title="0">{
        fields := graphql.CollectFields(ec.OperationContext, sel, entityImplementors)
        ctx = graphql.WithFieldContext(ctx, &amp;graphql.FieldContext{
                Object: "Entity",
        })

        out := graphql.NewFieldSet(fields)
        deferred := make(map[string]*graphql.FieldSet)
        for i, field := range fields </span><span class="cov0" title="0">{
                innerCtx := graphql.WithRootFieldContext(ctx, &amp;graphql.RootFieldContext{
                        Object: field.Name,
                        Field:  field,
                })

                switch field.Name </span>{
                case "__typename":<span class="cov0" title="0">
                        out.Values[i] = graphql.MarshalString("Entity")</span>
                case "findUserByID":<span class="cov0" title="0">
                        field := field

                        innerFunc := func(ctx context.Context, fs *graphql.FieldSet) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        if r := recover(); r != nil </span><span class="cov0" title="0">{
                                                ec.Error(ctx, ec.Recover(ctx, r))
                                        }</span>
                                }()
                                <span class="cov0" title="0">res = ec._Entity_findUserByID(ctx, field)
                                if res == graphql.Null </span><span class="cov0" title="0">{
                                        atomic.AddUint32(&amp;fs.Invalids, 1)
                                }</span>
                                <span class="cov0" title="0">return res</span>
                        }

                        <span class="cov0" title="0">rrm := func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{
                                return ec.OperationContext.RootResolverMiddleware(ctx,
                                        func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{ return innerFunc(ctx, out) }</span>)
                        }

                        <span class="cov0" title="0">out.Concurrently(i, func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{ return rrm(innerCtx) }</span>)
                default:<span class="cov0" title="0">
                        panic("unknown field " + strconv.Quote(field.Name))</span>
                }
        }
        <span class="cov0" title="0">out.Dispatch(ctx)
        if out.Invalids &gt; 0 </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>

        <span class="cov0" title="0">atomic.AddInt32(&amp;ec.deferred, int32(len(deferred)))

        for label, dfs := range deferred </span><span class="cov0" title="0">{
                ec.processDeferredGroup(graphql.DeferredGroup{
                        Label:    label,
                        Path:     graphql.GetPath(ctx),
                        FieldSet: dfs,
                        Context:  ctx,
                })
        }</span>

        <span class="cov0" title="0">return out</span>
}

var mutationImplementors = []string{"Mutation"}

func (ec *executionContext) _Mutation(ctx context.Context, sel ast.SelectionSet) graphql.Marshaler <span class="cov0" title="0">{
        fields := graphql.CollectFields(ec.OperationContext, sel, mutationImplementors)
        ctx = graphql.WithFieldContext(ctx, &amp;graphql.FieldContext{
                Object: "Mutation",
        })

        out := graphql.NewFieldSet(fields)
        deferred := make(map[string]*graphql.FieldSet)
        for i, field := range fields </span><span class="cov0" title="0">{
                innerCtx := graphql.WithRootFieldContext(ctx, &amp;graphql.RootFieldContext{
                        Object: field.Name,
                        Field:  field,
                })

                switch field.Name </span>{
                case "__typename":<span class="cov0" title="0">
                        out.Values[i] = graphql.MarshalString("Mutation")</span>
                case "signIn":<span class="cov0" title="0">
                        out.Values[i] = ec.OperationContext.RootResolverMiddleware(innerCtx, func(ctx context.Context) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                return ec._Mutation_signIn(ctx, field)
                        }</span>)
                        <span class="cov0" title="0">if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "signUp":<span class="cov0" title="0">
                        out.Values[i] = ec.OperationContext.RootResolverMiddleware(innerCtx, func(ctx context.Context) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                return ec._Mutation_signUp(ctx, field)
                        }</span>)
                        <span class="cov0" title="0">if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "signOut":<span class="cov0" title="0">
                        out.Values[i] = ec.OperationContext.RootResolverMiddleware(innerCtx, func(ctx context.Context) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                return ec._Mutation_signOut(ctx, field)
                        }</span>)
                        <span class="cov0" title="0">if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "changePassword":<span class="cov0" title="0">
                        out.Values[i] = ec.OperationContext.RootResolverMiddleware(innerCtx, func(ctx context.Context) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                return ec._Mutation_changePassword(ctx, field)
                        }</span>)
                        <span class="cov0" title="0">if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "enable":<span class="cov0" title="0">
                        out.Values[i] = ec.OperationContext.RootResolverMiddleware(innerCtx, func(ctx context.Context) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                return ec._Mutation_enable(ctx, field)
                        }</span>)
                        <span class="cov0" title="0">if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "disable":<span class="cov0" title="0">
                        out.Values[i] = ec.OperationContext.RootResolverMiddleware(innerCtx, func(ctx context.Context) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                return ec._Mutation_disable(ctx, field)
                        }</span>)
                        <span class="cov0" title="0">if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "grant":<span class="cov0" title="0">
                        out.Values[i] = ec.OperationContext.RootResolverMiddleware(innerCtx, func(ctx context.Context) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                return ec._Mutation_grant(ctx, field)
                        }</span>)
                        <span class="cov0" title="0">if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "revoke":<span class="cov0" title="0">
                        out.Values[i] = ec.OperationContext.RootResolverMiddleware(innerCtx, func(ctx context.Context) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                return ec._Mutation_revoke(ctx, field)
                        }</span>)
                        <span class="cov0" title="0">if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                default:<span class="cov0" title="0">
                        panic("unknown field " + strconv.Quote(field.Name))</span>
                }
        }
        <span class="cov0" title="0">out.Dispatch(ctx)
        if out.Invalids &gt; 0 </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>

        <span class="cov0" title="0">atomic.AddInt32(&amp;ec.deferred, int32(len(deferred)))

        for label, dfs := range deferred </span><span class="cov0" title="0">{
                ec.processDeferredGroup(graphql.DeferredGroup{
                        Label:    label,
                        Path:     graphql.GetPath(ctx),
                        FieldSet: dfs,
                        Context:  ctx,
                })
        }</span>

        <span class="cov0" title="0">return out</span>
}

var queryImplementors = []string{"Query"}

func (ec *executionContext) _Query(ctx context.Context, sel ast.SelectionSet) graphql.Marshaler <span class="cov0" title="0">{
        fields := graphql.CollectFields(ec.OperationContext, sel, queryImplementors)
        ctx = graphql.WithFieldContext(ctx, &amp;graphql.FieldContext{
                Object: "Query",
        })

        out := graphql.NewFieldSet(fields)
        deferred := make(map[string]*graphql.FieldSet)
        for i, field := range fields </span><span class="cov0" title="0">{
                innerCtx := graphql.WithRootFieldContext(ctx, &amp;graphql.RootFieldContext{
                        Object: field.Name,
                        Field:  field,
                })

                switch field.Name </span>{
                case "__typename":<span class="cov0" title="0">
                        out.Values[i] = graphql.MarshalString("Query")</span>
                case "currentUser":<span class="cov0" title="0">
                        field := field

                        innerFunc := func(ctx context.Context, fs *graphql.FieldSet) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        if r := recover(); r != nil </span><span class="cov0" title="0">{
                                                ec.Error(ctx, ec.Recover(ctx, r))
                                        }</span>
                                }()
                                <span class="cov0" title="0">res = ec._Query_currentUser(ctx, field)
                                if res == graphql.Null </span><span class="cov0" title="0">{
                                        atomic.AddUint32(&amp;fs.Invalids, 1)
                                }</span>
                                <span class="cov0" title="0">return res</span>
                        }

                        <span class="cov0" title="0">rrm := func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{
                                return ec.OperationContext.RootResolverMiddleware(ctx,
                                        func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{ return innerFunc(ctx, out) }</span>)
                        }

                        <span class="cov0" title="0">out.Concurrently(i, func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{ return rrm(innerCtx) }</span>)
                case "users":<span class="cov0" title="0">
                        field := field

                        innerFunc := func(ctx context.Context, fs *graphql.FieldSet) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        if r := recover(); r != nil </span><span class="cov0" title="0">{
                                                ec.Error(ctx, ec.Recover(ctx, r))
                                        }</span>
                                }()
                                <span class="cov0" title="0">res = ec._Query_users(ctx, field)
                                if res == graphql.Null </span><span class="cov0" title="0">{
                                        atomic.AddUint32(&amp;fs.Invalids, 1)
                                }</span>
                                <span class="cov0" title="0">return res</span>
                        }

                        <span class="cov0" title="0">rrm := func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{
                                return ec.OperationContext.RootResolverMiddleware(ctx,
                                        func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{ return innerFunc(ctx, out) }</span>)
                        }

                        <span class="cov0" title="0">out.Concurrently(i, func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{ return rrm(innerCtx) }</span>)
                case "_entities":<span class="cov0" title="0">
                        field := field

                        innerFunc := func(ctx context.Context, fs *graphql.FieldSet) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        if r := recover(); r != nil </span><span class="cov0" title="0">{
                                                ec.Error(ctx, ec.Recover(ctx, r))
                                        }</span>
                                }()
                                <span class="cov0" title="0">res = ec._Query__entities(ctx, field)
                                if res == graphql.Null </span><span class="cov0" title="0">{
                                        atomic.AddUint32(&amp;fs.Invalids, 1)
                                }</span>
                                <span class="cov0" title="0">return res</span>
                        }

                        <span class="cov0" title="0">rrm := func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{
                                return ec.OperationContext.RootResolverMiddleware(ctx,
                                        func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{ return innerFunc(ctx, out) }</span>)
                        }

                        <span class="cov0" title="0">out.Concurrently(i, func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{ return rrm(innerCtx) }</span>)
                case "_service":<span class="cov0" title="0">
                        field := field

                        innerFunc := func(ctx context.Context, fs *graphql.FieldSet) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                defer func() </span><span class="cov0" title="0">{
                                        if r := recover(); r != nil </span><span class="cov0" title="0">{
                                                ec.Error(ctx, ec.Recover(ctx, r))
                                        }</span>
                                }()
                                <span class="cov0" title="0">res = ec._Query__service(ctx, field)
                                if res == graphql.Null </span><span class="cov0" title="0">{
                                        atomic.AddUint32(&amp;fs.Invalids, 1)
                                }</span>
                                <span class="cov0" title="0">return res</span>
                        }

                        <span class="cov0" title="0">rrm := func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{
                                return ec.OperationContext.RootResolverMiddleware(ctx,
                                        func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{ return innerFunc(ctx, out) }</span>)
                        }

                        <span class="cov0" title="0">out.Concurrently(i, func(ctx context.Context) graphql.Marshaler </span><span class="cov0" title="0">{ return rrm(innerCtx) }</span>)
                case "__type":<span class="cov0" title="0">
                        out.Values[i] = ec.OperationContext.RootResolverMiddleware(innerCtx, func(ctx context.Context) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                return ec._Query___type(ctx, field)
                        }</span>)
                case "__schema":<span class="cov0" title="0">
                        out.Values[i] = ec.OperationContext.RootResolverMiddleware(innerCtx, func(ctx context.Context) (res graphql.Marshaler) </span><span class="cov0" title="0">{
                                return ec._Query___schema(ctx, field)
                        }</span>)
                default:<span class="cov0" title="0">
                        panic("unknown field " + strconv.Quote(field.Name))</span>
                }
        }
        <span class="cov0" title="0">out.Dispatch(ctx)
        if out.Invalids &gt; 0 </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>

        <span class="cov0" title="0">atomic.AddInt32(&amp;ec.deferred, int32(len(deferred)))

        for label, dfs := range deferred </span><span class="cov0" title="0">{
                ec.processDeferredGroup(graphql.DeferredGroup{
                        Label:    label,
                        Path:     graphql.GetPath(ctx),
                        FieldSet: dfs,
                        Context:  ctx,
                })
        }</span>

        <span class="cov0" title="0">return out</span>
}

var tokenImplementors = []string{"Token"}

func (ec *executionContext) _Token(ctx context.Context, sel ast.SelectionSet, obj *Token) graphql.Marshaler <span class="cov0" title="0">{
        fields := graphql.CollectFields(ec.OperationContext, sel, tokenImplementors)

        out := graphql.NewFieldSet(fields)
        deferred := make(map[string]*graphql.FieldSet)
        for i, field := range fields </span><span class="cov0" title="0">{
                switch field.Name </span>{
                case "__typename":<span class="cov0" title="0">
                        out.Values[i] = graphql.MarshalString("Token")</span>
                case "token":<span class="cov0" title="0">
                        out.Values[i] = ec._Token_token(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                default:<span class="cov0" title="0">
                        panic("unknown field " + strconv.Quote(field.Name))</span>
                }
        }
        <span class="cov0" title="0">out.Dispatch(ctx)
        if out.Invalids &gt; 0 </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>

        <span class="cov0" title="0">atomic.AddInt32(&amp;ec.deferred, int32(len(deferred)))

        for label, dfs := range deferred </span><span class="cov0" title="0">{
                ec.processDeferredGroup(graphql.DeferredGroup{
                        Label:    label,
                        Path:     graphql.GetPath(ctx),
                        FieldSet: dfs,
                        Context:  ctx,
                })
        }</span>

        <span class="cov0" title="0">return out</span>
}

var userImplementors = []string{"User", "_Entity"}

func (ec *executionContext) _User(ctx context.Context, sel ast.SelectionSet, obj *User) graphql.Marshaler <span class="cov0" title="0">{
        fields := graphql.CollectFields(ec.OperationContext, sel, userImplementors)

        out := graphql.NewFieldSet(fields)
        deferred := make(map[string]*graphql.FieldSet)
        for i, field := range fields </span><span class="cov0" title="0">{
                switch field.Name </span>{
                case "__typename":<span class="cov0" title="0">
                        out.Values[i] = graphql.MarshalString("User")</span>
                case "id":<span class="cov0" title="0">
                        out.Values[i] = ec._User_id(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "name":<span class="cov0" title="0">
                        out.Values[i] = ec._User_name(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "permissions":<span class="cov0" title="0">
                        out.Values[i] = ec._User_permissions(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "login":<span class="cov0" title="0">
                        out.Values[i] = ec._User_login(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "enabled":<span class="cov0" title="0">
                        out.Values[i] = ec._User_enabled(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                default:<span class="cov0" title="0">
                        panic("unknown field " + strconv.Quote(field.Name))</span>
                }
        }
        <span class="cov0" title="0">out.Dispatch(ctx)
        if out.Invalids &gt; 0 </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>

        <span class="cov0" title="0">atomic.AddInt32(&amp;ec.deferred, int32(len(deferred)))

        for label, dfs := range deferred </span><span class="cov0" title="0">{
                ec.processDeferredGroup(graphql.DeferredGroup{
                        Label:    label,
                        Path:     graphql.GetPath(ctx),
                        FieldSet: dfs,
                        Context:  ctx,
                })
        }</span>

        <span class="cov0" title="0">return out</span>
}

var _ServiceImplementors = []string{"_Service"}

func (ec *executionContext) __Service(ctx context.Context, sel ast.SelectionSet, obj *fedruntime.Service) graphql.Marshaler <span class="cov0" title="0">{
        fields := graphql.CollectFields(ec.OperationContext, sel, _ServiceImplementors)

        out := graphql.NewFieldSet(fields)
        deferred := make(map[string]*graphql.FieldSet)
        for i, field := range fields </span><span class="cov0" title="0">{
                switch field.Name </span>{
                case "__typename":<span class="cov0" title="0">
                        out.Values[i] = graphql.MarshalString("_Service")</span>
                case "sdl":<span class="cov0" title="0">
                        out.Values[i] = ec.__Service_sdl(ctx, field, obj)</span>
                default:<span class="cov0" title="0">
                        panic("unknown field " + strconv.Quote(field.Name))</span>
                }
        }
        <span class="cov0" title="0">out.Dispatch(ctx)
        if out.Invalids &gt; 0 </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>

        <span class="cov0" title="0">atomic.AddInt32(&amp;ec.deferred, int32(len(deferred)))

        for label, dfs := range deferred </span><span class="cov0" title="0">{
                ec.processDeferredGroup(graphql.DeferredGroup{
                        Label:    label,
                        Path:     graphql.GetPath(ctx),
                        FieldSet: dfs,
                        Context:  ctx,
                })
        }</span>

        <span class="cov0" title="0">return out</span>
}

var __DirectiveImplementors = []string{"__Directive"}

func (ec *executionContext) ___Directive(ctx context.Context, sel ast.SelectionSet, obj *introspection.Directive) graphql.Marshaler <span class="cov0" title="0">{
        fields := graphql.CollectFields(ec.OperationContext, sel, __DirectiveImplementors)

        out := graphql.NewFieldSet(fields)
        deferred := make(map[string]*graphql.FieldSet)
        for i, field := range fields </span><span class="cov0" title="0">{
                switch field.Name </span>{
                case "__typename":<span class="cov0" title="0">
                        out.Values[i] = graphql.MarshalString("__Directive")</span>
                case "name":<span class="cov0" title="0">
                        out.Values[i] = ec.___Directive_name(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "description":<span class="cov0" title="0">
                        out.Values[i] = ec.___Directive_description(ctx, field, obj)</span>
                case "locations":<span class="cov0" title="0">
                        out.Values[i] = ec.___Directive_locations(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "args":<span class="cov0" title="0">
                        out.Values[i] = ec.___Directive_args(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "isRepeatable":<span class="cov0" title="0">
                        out.Values[i] = ec.___Directive_isRepeatable(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                default:<span class="cov0" title="0">
                        panic("unknown field " + strconv.Quote(field.Name))</span>
                }
        }
        <span class="cov0" title="0">out.Dispatch(ctx)
        if out.Invalids &gt; 0 </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>

        <span class="cov0" title="0">atomic.AddInt32(&amp;ec.deferred, int32(len(deferred)))

        for label, dfs := range deferred </span><span class="cov0" title="0">{
                ec.processDeferredGroup(graphql.DeferredGroup{
                        Label:    label,
                        Path:     graphql.GetPath(ctx),
                        FieldSet: dfs,
                        Context:  ctx,
                })
        }</span>

        <span class="cov0" title="0">return out</span>
}

var __EnumValueImplementors = []string{"__EnumValue"}

func (ec *executionContext) ___EnumValue(ctx context.Context, sel ast.SelectionSet, obj *introspection.EnumValue) graphql.Marshaler <span class="cov0" title="0">{
        fields := graphql.CollectFields(ec.OperationContext, sel, __EnumValueImplementors)

        out := graphql.NewFieldSet(fields)
        deferred := make(map[string]*graphql.FieldSet)
        for i, field := range fields </span><span class="cov0" title="0">{
                switch field.Name </span>{
                case "__typename":<span class="cov0" title="0">
                        out.Values[i] = graphql.MarshalString("__EnumValue")</span>
                case "name":<span class="cov0" title="0">
                        out.Values[i] = ec.___EnumValue_name(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "description":<span class="cov0" title="0">
                        out.Values[i] = ec.___EnumValue_description(ctx, field, obj)</span>
                case "isDeprecated":<span class="cov0" title="0">
                        out.Values[i] = ec.___EnumValue_isDeprecated(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "deprecationReason":<span class="cov0" title="0">
                        out.Values[i] = ec.___EnumValue_deprecationReason(ctx, field, obj)</span>
                default:<span class="cov0" title="0">
                        panic("unknown field " + strconv.Quote(field.Name))</span>
                }
        }
        <span class="cov0" title="0">out.Dispatch(ctx)
        if out.Invalids &gt; 0 </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>

        <span class="cov0" title="0">atomic.AddInt32(&amp;ec.deferred, int32(len(deferred)))

        for label, dfs := range deferred </span><span class="cov0" title="0">{
                ec.processDeferredGroup(graphql.DeferredGroup{
                        Label:    label,
                        Path:     graphql.GetPath(ctx),
                        FieldSet: dfs,
                        Context:  ctx,
                })
        }</span>

        <span class="cov0" title="0">return out</span>
}

var __FieldImplementors = []string{"__Field"}

func (ec *executionContext) ___Field(ctx context.Context, sel ast.SelectionSet, obj *introspection.Field) graphql.Marshaler <span class="cov0" title="0">{
        fields := graphql.CollectFields(ec.OperationContext, sel, __FieldImplementors)

        out := graphql.NewFieldSet(fields)
        deferred := make(map[string]*graphql.FieldSet)
        for i, field := range fields </span><span class="cov0" title="0">{
                switch field.Name </span>{
                case "__typename":<span class="cov0" title="0">
                        out.Values[i] = graphql.MarshalString("__Field")</span>
                case "name":<span class="cov0" title="0">
                        out.Values[i] = ec.___Field_name(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "description":<span class="cov0" title="0">
                        out.Values[i] = ec.___Field_description(ctx, field, obj)</span>
                case "args":<span class="cov0" title="0">
                        out.Values[i] = ec.___Field_args(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "type":<span class="cov0" title="0">
                        out.Values[i] = ec.___Field_type(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "isDeprecated":<span class="cov0" title="0">
                        out.Values[i] = ec.___Field_isDeprecated(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "deprecationReason":<span class="cov0" title="0">
                        out.Values[i] = ec.___Field_deprecationReason(ctx, field, obj)</span>
                default:<span class="cov0" title="0">
                        panic("unknown field " + strconv.Quote(field.Name))</span>
                }
        }
        <span class="cov0" title="0">out.Dispatch(ctx)
        if out.Invalids &gt; 0 </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>

        <span class="cov0" title="0">atomic.AddInt32(&amp;ec.deferred, int32(len(deferred)))

        for label, dfs := range deferred </span><span class="cov0" title="0">{
                ec.processDeferredGroup(graphql.DeferredGroup{
                        Label:    label,
                        Path:     graphql.GetPath(ctx),
                        FieldSet: dfs,
                        Context:  ctx,
                })
        }</span>

        <span class="cov0" title="0">return out</span>
}

var __InputValueImplementors = []string{"__InputValue"}

func (ec *executionContext) ___InputValue(ctx context.Context, sel ast.SelectionSet, obj *introspection.InputValue) graphql.Marshaler <span class="cov0" title="0">{
        fields := graphql.CollectFields(ec.OperationContext, sel, __InputValueImplementors)

        out := graphql.NewFieldSet(fields)
        deferred := make(map[string]*graphql.FieldSet)
        for i, field := range fields </span><span class="cov0" title="0">{
                switch field.Name </span>{
                case "__typename":<span class="cov0" title="0">
                        out.Values[i] = graphql.MarshalString("__InputValue")</span>
                case "name":<span class="cov0" title="0">
                        out.Values[i] = ec.___InputValue_name(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "description":<span class="cov0" title="0">
                        out.Values[i] = ec.___InputValue_description(ctx, field, obj)</span>
                case "type":<span class="cov0" title="0">
                        out.Values[i] = ec.___InputValue_type(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "defaultValue":<span class="cov0" title="0">
                        out.Values[i] = ec.___InputValue_defaultValue(ctx, field, obj)</span>
                default:<span class="cov0" title="0">
                        panic("unknown field " + strconv.Quote(field.Name))</span>
                }
        }
        <span class="cov0" title="0">out.Dispatch(ctx)
        if out.Invalids &gt; 0 </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>

        <span class="cov0" title="0">atomic.AddInt32(&amp;ec.deferred, int32(len(deferred)))

        for label, dfs := range deferred </span><span class="cov0" title="0">{
                ec.processDeferredGroup(graphql.DeferredGroup{
                        Label:    label,
                        Path:     graphql.GetPath(ctx),
                        FieldSet: dfs,
                        Context:  ctx,
                })
        }</span>

        <span class="cov0" title="0">return out</span>
}

var __SchemaImplementors = []string{"__Schema"}

func (ec *executionContext) ___Schema(ctx context.Context, sel ast.SelectionSet, obj *introspection.Schema) graphql.Marshaler <span class="cov0" title="0">{
        fields := graphql.CollectFields(ec.OperationContext, sel, __SchemaImplementors)

        out := graphql.NewFieldSet(fields)
        deferred := make(map[string]*graphql.FieldSet)
        for i, field := range fields </span><span class="cov0" title="0">{
                switch field.Name </span>{
                case "__typename":<span class="cov0" title="0">
                        out.Values[i] = graphql.MarshalString("__Schema")</span>
                case "description":<span class="cov0" title="0">
                        out.Values[i] = ec.___Schema_description(ctx, field, obj)</span>
                case "types":<span class="cov0" title="0">
                        out.Values[i] = ec.___Schema_types(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "queryType":<span class="cov0" title="0">
                        out.Values[i] = ec.___Schema_queryType(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "mutationType":<span class="cov0" title="0">
                        out.Values[i] = ec.___Schema_mutationType(ctx, field, obj)</span>
                case "subscriptionType":<span class="cov0" title="0">
                        out.Values[i] = ec.___Schema_subscriptionType(ctx, field, obj)</span>
                case "directives":<span class="cov0" title="0">
                        out.Values[i] = ec.___Schema_directives(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                default:<span class="cov0" title="0">
                        panic("unknown field " + strconv.Quote(field.Name))</span>
                }
        }
        <span class="cov0" title="0">out.Dispatch(ctx)
        if out.Invalids &gt; 0 </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>

        <span class="cov0" title="0">atomic.AddInt32(&amp;ec.deferred, int32(len(deferred)))

        for label, dfs := range deferred </span><span class="cov0" title="0">{
                ec.processDeferredGroup(graphql.DeferredGroup{
                        Label:    label,
                        Path:     graphql.GetPath(ctx),
                        FieldSet: dfs,
                        Context:  ctx,
                })
        }</span>

        <span class="cov0" title="0">return out</span>
}

var __TypeImplementors = []string{"__Type"}

func (ec *executionContext) ___Type(ctx context.Context, sel ast.SelectionSet, obj *introspection.Type) graphql.Marshaler <span class="cov0" title="0">{
        fields := graphql.CollectFields(ec.OperationContext, sel, __TypeImplementors)

        out := graphql.NewFieldSet(fields)
        deferred := make(map[string]*graphql.FieldSet)
        for i, field := range fields </span><span class="cov0" title="0">{
                switch field.Name </span>{
                case "__typename":<span class="cov0" title="0">
                        out.Values[i] = graphql.MarshalString("__Type")</span>
                case "kind":<span class="cov0" title="0">
                        out.Values[i] = ec.___Type_kind(ctx, field, obj)
                        if out.Values[i] == graphql.Null </span><span class="cov0" title="0">{
                                out.Invalids++
                        }</span>
                case "name":<span class="cov0" title="0">
                        out.Values[i] = ec.___Type_name(ctx, field, obj)</span>
                case "description":<span class="cov0" title="0">
                        out.Values[i] = ec.___Type_description(ctx, field, obj)</span>
                case "fields":<span class="cov0" title="0">
                        out.Values[i] = ec.___Type_fields(ctx, field, obj)</span>
                case "interfaces":<span class="cov0" title="0">
                        out.Values[i] = ec.___Type_interfaces(ctx, field, obj)</span>
                case "possibleTypes":<span class="cov0" title="0">
                        out.Values[i] = ec.___Type_possibleTypes(ctx, field, obj)</span>
                case "enumValues":<span class="cov0" title="0">
                        out.Values[i] = ec.___Type_enumValues(ctx, field, obj)</span>
                case "inputFields":<span class="cov0" title="0">
                        out.Values[i] = ec.___Type_inputFields(ctx, field, obj)</span>
                case "ofType":<span class="cov0" title="0">
                        out.Values[i] = ec.___Type_ofType(ctx, field, obj)</span>
                case "specifiedByURL":<span class="cov0" title="0">
                        out.Values[i] = ec.___Type_specifiedByURL(ctx, field, obj)</span>
                default:<span class="cov0" title="0">
                        panic("unknown field " + strconv.Quote(field.Name))</span>
                }
        }
        <span class="cov0" title="0">out.Dispatch(ctx)
        if out.Invalids &gt; 0 </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>

        <span class="cov0" title="0">atomic.AddInt32(&amp;ec.deferred, int32(len(deferred)))

        for label, dfs := range deferred </span><span class="cov0" title="0">{
                ec.processDeferredGroup(graphql.DeferredGroup{
                        Label:    label,
                        Path:     graphql.GetPath(ctx),
                        FieldSet: dfs,
                        Context:  ctx,
                })
        }</span>

        <span class="cov0" title="0">return out</span>
}

// endregion **************************** object.gotpl ****************************

// region    ***************************** type.gotpl *****************************

func (ec *executionContext) unmarshalNBoolean2bool(ctx context.Context, v interface{}) (bool, error) <span class="cov0" title="0">{
        res, err := graphql.UnmarshalBoolean(v)
        return res, graphql.ErrorOnPath(ctx, err)
}</span>

func (ec *executionContext) marshalNBoolean2bool(ctx context.Context, sel ast.SelectionSet, v bool) graphql.Marshaler <span class="cov0" title="0">{
        res := graphql.MarshalBoolean(v)
        if res == graphql.Null </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, graphql.GetFieldContext(ctx)) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "the requested element is null which the schema does not allow")
                }</span>
        }
        <span class="cov0" title="0">return res</span>
}

func (ec *executionContext) unmarshalNString2string(ctx context.Context, v interface{}) (string, error) <span class="cov0" title="0">{
        res, err := graphql.UnmarshalString(v)
        return res, graphql.ErrorOnPath(ctx, err)
}</span>

func (ec *executionContext) marshalNString2string(ctx context.Context, sel ast.SelectionSet, v string) graphql.Marshaler <span class="cov0" title="0">{
        res := graphql.MarshalString(v)
        if res == graphql.Null </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, graphql.GetFieldContext(ctx)) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "the requested element is null which the schema does not allow")
                }</span>
        }
        <span class="cov0" title="0">return res</span>
}

func (ec *executionContext) unmarshalNString2ᚕstringᚄ(ctx context.Context, v interface{}) ([]string, error) <span class="cov0" title="0">{
        var vSlice []interface{}
        if v != nil </span><span class="cov0" title="0">{
                vSlice = graphql.CoerceList(v)
        }</span>
        <span class="cov0" title="0">var err error
        res := make([]string, len(vSlice))
        for i := range vSlice </span><span class="cov0" title="0">{
                ctx := graphql.WithPathContext(ctx, graphql.NewPathWithIndex(i))
                res[i], err = ec.unmarshalNString2string(ctx, vSlice[i])
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
        }
        <span class="cov0" title="0">return res, nil</span>
}

func (ec *executionContext) marshalNString2ᚕstringᚄ(ctx context.Context, sel ast.SelectionSet, v []string) graphql.Marshaler <span class="cov0" title="0">{
        ret := make(graphql.Array, len(v))
        for i := range v </span><span class="cov0" title="0">{
                ret[i] = ec.marshalNString2string(ctx, sel, v[i])
        }</span>

        <span class="cov0" title="0">for _, e := range ret </span><span class="cov0" title="0">{
                if e == graphql.Null </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
        }

        <span class="cov0" title="0">return ret</span>
}

func (ec *executionContext) marshalNToken2githubᚗcomᚋnmarsollierᚋauthgoᚋgraphᚋmodelᚐToken(ctx context.Context, sel ast.SelectionSet, v Token) graphql.Marshaler <span class="cov0" title="0">{
        return ec._Token(ctx, sel, &amp;v)
}</span>

func (ec *executionContext) marshalNToken2ᚖgithubᚗcomᚋnmarsollierᚋauthgoᚋgraphᚋmodelᚐToken(ctx context.Context, sel ast.SelectionSet, v *Token) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, graphql.GetFieldContext(ctx)) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "the requested element is null which the schema does not allow")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">return ec._Token(ctx, sel, v)</span>
}

func (ec *executionContext) marshalNUser2githubᚗcomᚋnmarsollierᚋauthgoᚋgraphᚋmodelᚐUser(ctx context.Context, sel ast.SelectionSet, v User) graphql.Marshaler <span class="cov0" title="0">{
        return ec._User(ctx, sel, &amp;v)
}</span>

func (ec *executionContext) marshalNUser2ᚕᚖgithubᚗcomᚋnmarsollierᚋauthgoᚋgraphᚋmodelᚐUserᚄ(ctx context.Context, sel ast.SelectionSet, v []*User) graphql.Marshaler <span class="cov0" title="0">{
        ret := make(graphql.Array, len(v))
        var wg sync.WaitGroup
        isLen1 := len(v) == 1
        if !isLen1 </span><span class="cov0" title="0">{
                wg.Add(len(v))
        }</span>
        <span class="cov0" title="0">for i := range v </span><span class="cov0" title="0">{
                i := i
                fc := &amp;graphql.FieldContext{
                        Index:  &amp;i,
                        Result: &amp;v[i],
                }
                ctx := graphql.WithFieldContext(ctx, fc)
                f := func(i int) </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                if r := recover(); r != nil </span><span class="cov0" title="0">{
                                        ec.Error(ctx, ec.Recover(ctx, r))
                                        ret = nil
                                }</span>
                        }()
                        <span class="cov0" title="0">if !isLen1 </span><span class="cov0" title="0">{
                                defer wg.Done()
                        }</span>
                        <span class="cov0" title="0">ret[i] = ec.marshalNUser2ᚖgithubᚗcomᚋnmarsollierᚋauthgoᚋgraphᚋmodelᚐUser(ctx, sel, v[i])</span>
                }
                <span class="cov0" title="0">if isLen1 </span><span class="cov0" title="0">{
                        f(i)
                }</span> else<span class="cov0" title="0"> {
                        go f(i)
                }</span>

        }
        <span class="cov0" title="0">wg.Wait()

        for _, e := range ret </span><span class="cov0" title="0">{
                if e == graphql.Null </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
        }

        <span class="cov0" title="0">return ret</span>
}

func (ec *executionContext) marshalNUser2ᚖgithubᚗcomᚋnmarsollierᚋauthgoᚋgraphᚋmodelᚐUser(ctx context.Context, sel ast.SelectionSet, v *User) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, graphql.GetFieldContext(ctx)) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "the requested element is null which the schema does not allow")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">return ec._User(ctx, sel, v)</span>
}

func (ec *executionContext) unmarshalN_Any2map(ctx context.Context, v interface{}) (map[string]interface{}, error) <span class="cov0" title="0">{
        res, err := graphql.UnmarshalMap(v)
        return res, graphql.ErrorOnPath(ctx, err)
}</span>

func (ec *executionContext) marshalN_Any2map(ctx context.Context, sel ast.SelectionSet, v map[string]interface{}) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, graphql.GetFieldContext(ctx)) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "the requested element is null which the schema does not allow")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">res := graphql.MarshalMap(v)
        if res == graphql.Null </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, graphql.GetFieldContext(ctx)) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "the requested element is null which the schema does not allow")
                }</span>
        }
        <span class="cov0" title="0">return res</span>
}

func (ec *executionContext) unmarshalN_Any2ᚕmapᚄ(ctx context.Context, v interface{}) ([]map[string]interface{}, error) <span class="cov0" title="0">{
        var vSlice []interface{}
        if v != nil </span><span class="cov0" title="0">{
                vSlice = graphql.CoerceList(v)
        }</span>
        <span class="cov0" title="0">var err error
        res := make([]map[string]interface{}, len(vSlice))
        for i := range vSlice </span><span class="cov0" title="0">{
                ctx := graphql.WithPathContext(ctx, graphql.NewPathWithIndex(i))
                res[i], err = ec.unmarshalN_Any2map(ctx, vSlice[i])
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
        }
        <span class="cov0" title="0">return res, nil</span>
}

func (ec *executionContext) marshalN_Any2ᚕmapᚄ(ctx context.Context, sel ast.SelectionSet, v []map[string]interface{}) graphql.Marshaler <span class="cov0" title="0">{
        ret := make(graphql.Array, len(v))
        for i := range v </span><span class="cov0" title="0">{
                ret[i] = ec.marshalN_Any2map(ctx, sel, v[i])
        }</span>

        <span class="cov0" title="0">for _, e := range ret </span><span class="cov0" title="0">{
                if e == graphql.Null </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
        }

        <span class="cov0" title="0">return ret</span>
}

func (ec *executionContext) marshalN_Entity2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋpluginᚋfederationᚋfedruntimeᚐEntity(ctx context.Context, sel ast.SelectionSet, v []fedruntime.Entity) graphql.Marshaler <span class="cov0" title="0">{
        ret := make(graphql.Array, len(v))
        var wg sync.WaitGroup
        isLen1 := len(v) == 1
        if !isLen1 </span><span class="cov0" title="0">{
                wg.Add(len(v))
        }</span>
        <span class="cov0" title="0">for i := range v </span><span class="cov0" title="0">{
                i := i
                fc := &amp;graphql.FieldContext{
                        Index:  &amp;i,
                        Result: &amp;v[i],
                }
                ctx := graphql.WithFieldContext(ctx, fc)
                f := func(i int) </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                if r := recover(); r != nil </span><span class="cov0" title="0">{
                                        ec.Error(ctx, ec.Recover(ctx, r))
                                        ret = nil
                                }</span>
                        }()
                        <span class="cov0" title="0">if !isLen1 </span><span class="cov0" title="0">{
                                defer wg.Done()
                        }</span>
                        <span class="cov0" title="0">ret[i] = ec.marshalO_Entity2githubᚗcomᚋ99designsᚋgqlgenᚋpluginᚋfederationᚋfedruntimeᚐEntity(ctx, sel, v[i])</span>
                }
                <span class="cov0" title="0">if isLen1 </span><span class="cov0" title="0">{
                        f(i)
                }</span> else<span class="cov0" title="0"> {
                        go f(i)
                }</span>

        }
        <span class="cov0" title="0">wg.Wait()

        return ret</span>
}

func (ec *executionContext) unmarshalN_FieldSet2string(ctx context.Context, v interface{}) (string, error) <span class="cov0" title="0">{
        res, err := graphql.UnmarshalString(v)
        return res, graphql.ErrorOnPath(ctx, err)
}</span>

func (ec *executionContext) marshalN_FieldSet2string(ctx context.Context, sel ast.SelectionSet, v string) graphql.Marshaler <span class="cov0" title="0">{
        res := graphql.MarshalString(v)
        if res == graphql.Null </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, graphql.GetFieldContext(ctx)) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "the requested element is null which the schema does not allow")
                }</span>
        }
        <span class="cov0" title="0">return res</span>
}

func (ec *executionContext) marshalN_Service2githubᚗcomᚋ99designsᚋgqlgenᚋpluginᚋfederationᚋfedruntimeᚐService(ctx context.Context, sel ast.SelectionSet, v fedruntime.Service) graphql.Marshaler <span class="cov0" title="0">{
        return ec.__Service(ctx, sel, &amp;v)
}</span>

func (ec *executionContext) marshalN__Directive2githubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐDirective(ctx context.Context, sel ast.SelectionSet, v introspection.Directive) graphql.Marshaler <span class="cov0" title="0">{
        return ec.___Directive(ctx, sel, &amp;v)
}</span>

func (ec *executionContext) marshalN__Directive2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐDirectiveᚄ(ctx context.Context, sel ast.SelectionSet, v []introspection.Directive) graphql.Marshaler <span class="cov0" title="0">{
        ret := make(graphql.Array, len(v))
        var wg sync.WaitGroup
        isLen1 := len(v) == 1
        if !isLen1 </span><span class="cov0" title="0">{
                wg.Add(len(v))
        }</span>
        <span class="cov0" title="0">for i := range v </span><span class="cov0" title="0">{
                i := i
                fc := &amp;graphql.FieldContext{
                        Index:  &amp;i,
                        Result: &amp;v[i],
                }
                ctx := graphql.WithFieldContext(ctx, fc)
                f := func(i int) </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                if r := recover(); r != nil </span><span class="cov0" title="0">{
                                        ec.Error(ctx, ec.Recover(ctx, r))
                                        ret = nil
                                }</span>
                        }()
                        <span class="cov0" title="0">if !isLen1 </span><span class="cov0" title="0">{
                                defer wg.Done()
                        }</span>
                        <span class="cov0" title="0">ret[i] = ec.marshalN__Directive2githubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐDirective(ctx, sel, v[i])</span>
                }
                <span class="cov0" title="0">if isLen1 </span><span class="cov0" title="0">{
                        f(i)
                }</span> else<span class="cov0" title="0"> {
                        go f(i)
                }</span>

        }
        <span class="cov0" title="0">wg.Wait()

        for _, e := range ret </span><span class="cov0" title="0">{
                if e == graphql.Null </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
        }

        <span class="cov0" title="0">return ret</span>
}

func (ec *executionContext) unmarshalN__DirectiveLocation2string(ctx context.Context, v interface{}) (string, error) <span class="cov0" title="0">{
        res, err := graphql.UnmarshalString(v)
        return res, graphql.ErrorOnPath(ctx, err)
}</span>

func (ec *executionContext) marshalN__DirectiveLocation2string(ctx context.Context, sel ast.SelectionSet, v string) graphql.Marshaler <span class="cov0" title="0">{
        res := graphql.MarshalString(v)
        if res == graphql.Null </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, graphql.GetFieldContext(ctx)) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "the requested element is null which the schema does not allow")
                }</span>
        }
        <span class="cov0" title="0">return res</span>
}

func (ec *executionContext) unmarshalN__DirectiveLocation2ᚕstringᚄ(ctx context.Context, v interface{}) ([]string, error) <span class="cov0" title="0">{
        var vSlice []interface{}
        if v != nil </span><span class="cov0" title="0">{
                vSlice = graphql.CoerceList(v)
        }</span>
        <span class="cov0" title="0">var err error
        res := make([]string, len(vSlice))
        for i := range vSlice </span><span class="cov0" title="0">{
                ctx := graphql.WithPathContext(ctx, graphql.NewPathWithIndex(i))
                res[i], err = ec.unmarshalN__DirectiveLocation2string(ctx, vSlice[i])
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
        }
        <span class="cov0" title="0">return res, nil</span>
}

func (ec *executionContext) marshalN__DirectiveLocation2ᚕstringᚄ(ctx context.Context, sel ast.SelectionSet, v []string) graphql.Marshaler <span class="cov0" title="0">{
        ret := make(graphql.Array, len(v))
        var wg sync.WaitGroup
        isLen1 := len(v) == 1
        if !isLen1 </span><span class="cov0" title="0">{
                wg.Add(len(v))
        }</span>
        <span class="cov0" title="0">for i := range v </span><span class="cov0" title="0">{
                i := i
                fc := &amp;graphql.FieldContext{
                        Index:  &amp;i,
                        Result: &amp;v[i],
                }
                ctx := graphql.WithFieldContext(ctx, fc)
                f := func(i int) </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                if r := recover(); r != nil </span><span class="cov0" title="0">{
                                        ec.Error(ctx, ec.Recover(ctx, r))
                                        ret = nil
                                }</span>
                        }()
                        <span class="cov0" title="0">if !isLen1 </span><span class="cov0" title="0">{
                                defer wg.Done()
                        }</span>
                        <span class="cov0" title="0">ret[i] = ec.marshalN__DirectiveLocation2string(ctx, sel, v[i])</span>
                }
                <span class="cov0" title="0">if isLen1 </span><span class="cov0" title="0">{
                        f(i)
                }</span> else<span class="cov0" title="0"> {
                        go f(i)
                }</span>

        }
        <span class="cov0" title="0">wg.Wait()

        for _, e := range ret </span><span class="cov0" title="0">{
                if e == graphql.Null </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
        }

        <span class="cov0" title="0">return ret</span>
}

func (ec *executionContext) marshalN__EnumValue2githubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐEnumValue(ctx context.Context, sel ast.SelectionSet, v introspection.EnumValue) graphql.Marshaler <span class="cov0" title="0">{
        return ec.___EnumValue(ctx, sel, &amp;v)
}</span>

func (ec *executionContext) marshalN__Field2githubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐField(ctx context.Context, sel ast.SelectionSet, v introspection.Field) graphql.Marshaler <span class="cov0" title="0">{
        return ec.___Field(ctx, sel, &amp;v)
}</span>

func (ec *executionContext) marshalN__InputValue2githubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐInputValue(ctx context.Context, sel ast.SelectionSet, v introspection.InputValue) graphql.Marshaler <span class="cov0" title="0">{
        return ec.___InputValue(ctx, sel, &amp;v)
}</span>

func (ec *executionContext) marshalN__InputValue2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐInputValueᚄ(ctx context.Context, sel ast.SelectionSet, v []introspection.InputValue) graphql.Marshaler <span class="cov0" title="0">{
        ret := make(graphql.Array, len(v))
        var wg sync.WaitGroup
        isLen1 := len(v) == 1
        if !isLen1 </span><span class="cov0" title="0">{
                wg.Add(len(v))
        }</span>
        <span class="cov0" title="0">for i := range v </span><span class="cov0" title="0">{
                i := i
                fc := &amp;graphql.FieldContext{
                        Index:  &amp;i,
                        Result: &amp;v[i],
                }
                ctx := graphql.WithFieldContext(ctx, fc)
                f := func(i int) </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                if r := recover(); r != nil </span><span class="cov0" title="0">{
                                        ec.Error(ctx, ec.Recover(ctx, r))
                                        ret = nil
                                }</span>
                        }()
                        <span class="cov0" title="0">if !isLen1 </span><span class="cov0" title="0">{
                                defer wg.Done()
                        }</span>
                        <span class="cov0" title="0">ret[i] = ec.marshalN__InputValue2githubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐInputValue(ctx, sel, v[i])</span>
                }
                <span class="cov0" title="0">if isLen1 </span><span class="cov0" title="0">{
                        f(i)
                }</span> else<span class="cov0" title="0"> {
                        go f(i)
                }</span>

        }
        <span class="cov0" title="0">wg.Wait()

        for _, e := range ret </span><span class="cov0" title="0">{
                if e == graphql.Null </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
        }

        <span class="cov0" title="0">return ret</span>
}

func (ec *executionContext) marshalN__Type2githubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐType(ctx context.Context, sel ast.SelectionSet, v introspection.Type) graphql.Marshaler <span class="cov0" title="0">{
        return ec.___Type(ctx, sel, &amp;v)
}</span>

func (ec *executionContext) marshalN__Type2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐTypeᚄ(ctx context.Context, sel ast.SelectionSet, v []introspection.Type) graphql.Marshaler <span class="cov0" title="0">{
        ret := make(graphql.Array, len(v))
        var wg sync.WaitGroup
        isLen1 := len(v) == 1
        if !isLen1 </span><span class="cov0" title="0">{
                wg.Add(len(v))
        }</span>
        <span class="cov0" title="0">for i := range v </span><span class="cov0" title="0">{
                i := i
                fc := &amp;graphql.FieldContext{
                        Index:  &amp;i,
                        Result: &amp;v[i],
                }
                ctx := graphql.WithFieldContext(ctx, fc)
                f := func(i int) </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                if r := recover(); r != nil </span><span class="cov0" title="0">{
                                        ec.Error(ctx, ec.Recover(ctx, r))
                                        ret = nil
                                }</span>
                        }()
                        <span class="cov0" title="0">if !isLen1 </span><span class="cov0" title="0">{
                                defer wg.Done()
                        }</span>
                        <span class="cov0" title="0">ret[i] = ec.marshalN__Type2githubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐType(ctx, sel, v[i])</span>
                }
                <span class="cov0" title="0">if isLen1 </span><span class="cov0" title="0">{
                        f(i)
                }</span> else<span class="cov0" title="0"> {
                        go f(i)
                }</span>

        }
        <span class="cov0" title="0">wg.Wait()

        for _, e := range ret </span><span class="cov0" title="0">{
                if e == graphql.Null </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
        }

        <span class="cov0" title="0">return ret</span>
}

func (ec *executionContext) marshalN__Type2ᚖgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐType(ctx context.Context, sel ast.SelectionSet, v *introspection.Type) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, graphql.GetFieldContext(ctx)) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "the requested element is null which the schema does not allow")
                }</span>
                <span class="cov0" title="0">return graphql.Null</span>
        }
        <span class="cov0" title="0">return ec.___Type(ctx, sel, v)</span>
}

func (ec *executionContext) unmarshalN__TypeKind2string(ctx context.Context, v interface{}) (string, error) <span class="cov0" title="0">{
        res, err := graphql.UnmarshalString(v)
        return res, graphql.ErrorOnPath(ctx, err)
}</span>

func (ec *executionContext) marshalN__TypeKind2string(ctx context.Context, sel ast.SelectionSet, v string) graphql.Marshaler <span class="cov0" title="0">{
        res := graphql.MarshalString(v)
        if res == graphql.Null </span><span class="cov0" title="0">{
                if !graphql.HasFieldError(ctx, graphql.GetFieldContext(ctx)) </span><span class="cov0" title="0">{
                        ec.Errorf(ctx, "the requested element is null which the schema does not allow")
                }</span>
        }
        <span class="cov0" title="0">return res</span>
}

func (ec *executionContext) unmarshalOBoolean2bool(ctx context.Context, v interface{}) (bool, error) <span class="cov0" title="0">{
        res, err := graphql.UnmarshalBoolean(v)
        return res, graphql.ErrorOnPath(ctx, err)
}</span>

func (ec *executionContext) marshalOBoolean2bool(ctx context.Context, sel ast.SelectionSet, v bool) graphql.Marshaler <span class="cov0" title="0">{
        res := graphql.MarshalBoolean(v)
        return res
}</span>

func (ec *executionContext) unmarshalOBoolean2ᚖbool(ctx context.Context, v interface{}) (*bool, error) <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return nil, nil
        }</span>
        <span class="cov0" title="0">res, err := graphql.UnmarshalBoolean(v)
        return &amp;res, graphql.ErrorOnPath(ctx, err)</span>
}

func (ec *executionContext) marshalOBoolean2ᚖbool(ctx context.Context, sel ast.SelectionSet, v *bool) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := graphql.MarshalBoolean(*v)
        return res</span>
}

func (ec *executionContext) unmarshalOString2string(ctx context.Context, v interface{}) (string, error) <span class="cov0" title="0">{
        res, err := graphql.UnmarshalString(v)
        return res, graphql.ErrorOnPath(ctx, err)
}</span>

func (ec *executionContext) marshalOString2string(ctx context.Context, sel ast.SelectionSet, v string) graphql.Marshaler <span class="cov0" title="0">{
        res := graphql.MarshalString(v)
        return res
}</span>

func (ec *executionContext) unmarshalOString2ᚕstringᚄ(ctx context.Context, v interface{}) ([]string, error) <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return nil, nil
        }</span>
        <span class="cov0" title="0">var vSlice []interface{}
        if v != nil </span><span class="cov0" title="0">{
                vSlice = graphql.CoerceList(v)
        }</span>
        <span class="cov0" title="0">var err error
        res := make([]string, len(vSlice))
        for i := range vSlice </span><span class="cov0" title="0">{
                ctx := graphql.WithPathContext(ctx, graphql.NewPathWithIndex(i))
                res[i], err = ec.unmarshalNString2string(ctx, vSlice[i])
                if err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
        }
        <span class="cov0" title="0">return res, nil</span>
}

func (ec *executionContext) marshalOString2ᚕstringᚄ(ctx context.Context, sel ast.SelectionSet, v []string) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ret := make(graphql.Array, len(v))
        for i := range v </span><span class="cov0" title="0">{
                ret[i] = ec.marshalNString2string(ctx, sel, v[i])
        }</span>

        <span class="cov0" title="0">for _, e := range ret </span><span class="cov0" title="0">{
                if e == graphql.Null </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
        }

        <span class="cov0" title="0">return ret</span>
}

func (ec *executionContext) unmarshalOString2ᚖstring(ctx context.Context, v interface{}) (*string, error) <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return nil, nil
        }</span>
        <span class="cov0" title="0">res, err := graphql.UnmarshalString(v)
        return &amp;res, graphql.ErrorOnPath(ctx, err)</span>
}

func (ec *executionContext) marshalOString2ᚖstring(ctx context.Context, sel ast.SelectionSet, v *string) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">res := graphql.MarshalString(*v)
        return res</span>
}

func (ec *executionContext) marshalO_Entity2githubᚗcomᚋ99designsᚋgqlgenᚋpluginᚋfederationᚋfedruntimeᚐEntity(ctx context.Context, sel ast.SelectionSet, v fedruntime.Entity) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">return ec.__Entity(ctx, sel, v)</span>
}

func (ec *executionContext) marshalO__EnumValue2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐEnumValueᚄ(ctx context.Context, sel ast.SelectionSet, v []introspection.EnumValue) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ret := make(graphql.Array, len(v))
        var wg sync.WaitGroup
        isLen1 := len(v) == 1
        if !isLen1 </span><span class="cov0" title="0">{
                wg.Add(len(v))
        }</span>
        <span class="cov0" title="0">for i := range v </span><span class="cov0" title="0">{
                i := i
                fc := &amp;graphql.FieldContext{
                        Index:  &amp;i,
                        Result: &amp;v[i],
                }
                ctx := graphql.WithFieldContext(ctx, fc)
                f := func(i int) </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                if r := recover(); r != nil </span><span class="cov0" title="0">{
                                        ec.Error(ctx, ec.Recover(ctx, r))
                                        ret = nil
                                }</span>
                        }()
                        <span class="cov0" title="0">if !isLen1 </span><span class="cov0" title="0">{
                                defer wg.Done()
                        }</span>
                        <span class="cov0" title="0">ret[i] = ec.marshalN__EnumValue2githubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐEnumValue(ctx, sel, v[i])</span>
                }
                <span class="cov0" title="0">if isLen1 </span><span class="cov0" title="0">{
                        f(i)
                }</span> else<span class="cov0" title="0"> {
                        go f(i)
                }</span>

        }
        <span class="cov0" title="0">wg.Wait()

        for _, e := range ret </span><span class="cov0" title="0">{
                if e == graphql.Null </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
        }

        <span class="cov0" title="0">return ret</span>
}

func (ec *executionContext) marshalO__Field2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐFieldᚄ(ctx context.Context, sel ast.SelectionSet, v []introspection.Field) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ret := make(graphql.Array, len(v))
        var wg sync.WaitGroup
        isLen1 := len(v) == 1
        if !isLen1 </span><span class="cov0" title="0">{
                wg.Add(len(v))
        }</span>
        <span class="cov0" title="0">for i := range v </span><span class="cov0" title="0">{
                i := i
                fc := &amp;graphql.FieldContext{
                        Index:  &amp;i,
                        Result: &amp;v[i],
                }
                ctx := graphql.WithFieldContext(ctx, fc)
                f := func(i int) </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                if r := recover(); r != nil </span><span class="cov0" title="0">{
                                        ec.Error(ctx, ec.Recover(ctx, r))
                                        ret = nil
                                }</span>
                        }()
                        <span class="cov0" title="0">if !isLen1 </span><span class="cov0" title="0">{
                                defer wg.Done()
                        }</span>
                        <span class="cov0" title="0">ret[i] = ec.marshalN__Field2githubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐField(ctx, sel, v[i])</span>
                }
                <span class="cov0" title="0">if isLen1 </span><span class="cov0" title="0">{
                        f(i)
                }</span> else<span class="cov0" title="0"> {
                        go f(i)
                }</span>

        }
        <span class="cov0" title="0">wg.Wait()

        for _, e := range ret </span><span class="cov0" title="0">{
                if e == graphql.Null </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
        }

        <span class="cov0" title="0">return ret</span>
}

func (ec *executionContext) marshalO__InputValue2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐInputValueᚄ(ctx context.Context, sel ast.SelectionSet, v []introspection.InputValue) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ret := make(graphql.Array, len(v))
        var wg sync.WaitGroup
        isLen1 := len(v) == 1
        if !isLen1 </span><span class="cov0" title="0">{
                wg.Add(len(v))
        }</span>
        <span class="cov0" title="0">for i := range v </span><span class="cov0" title="0">{
                i := i
                fc := &amp;graphql.FieldContext{
                        Index:  &amp;i,
                        Result: &amp;v[i],
                }
                ctx := graphql.WithFieldContext(ctx, fc)
                f := func(i int) </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                if r := recover(); r != nil </span><span class="cov0" title="0">{
                                        ec.Error(ctx, ec.Recover(ctx, r))
                                        ret = nil
                                }</span>
                        }()
                        <span class="cov0" title="0">if !isLen1 </span><span class="cov0" title="0">{
                                defer wg.Done()
                        }</span>
                        <span class="cov0" title="0">ret[i] = ec.marshalN__InputValue2githubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐInputValue(ctx, sel, v[i])</span>
                }
                <span class="cov0" title="0">if isLen1 </span><span class="cov0" title="0">{
                        f(i)
                }</span> else<span class="cov0" title="0"> {
                        go f(i)
                }</span>

        }
        <span class="cov0" title="0">wg.Wait()

        for _, e := range ret </span><span class="cov0" title="0">{
                if e == graphql.Null </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
        }

        <span class="cov0" title="0">return ret</span>
}

func (ec *executionContext) marshalO__Schema2ᚖgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐSchema(ctx context.Context, sel ast.SelectionSet, v *introspection.Schema) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">return ec.___Schema(ctx, sel, v)</span>
}

func (ec *executionContext) marshalO__Type2ᚕgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐTypeᚄ(ctx context.Context, sel ast.SelectionSet, v []introspection.Type) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">ret := make(graphql.Array, len(v))
        var wg sync.WaitGroup
        isLen1 := len(v) == 1
        if !isLen1 </span><span class="cov0" title="0">{
                wg.Add(len(v))
        }</span>
        <span class="cov0" title="0">for i := range v </span><span class="cov0" title="0">{
                i := i
                fc := &amp;graphql.FieldContext{
                        Index:  &amp;i,
                        Result: &amp;v[i],
                }
                ctx := graphql.WithFieldContext(ctx, fc)
                f := func(i int) </span><span class="cov0" title="0">{
                        defer func() </span><span class="cov0" title="0">{
                                if r := recover(); r != nil </span><span class="cov0" title="0">{
                                        ec.Error(ctx, ec.Recover(ctx, r))
                                        ret = nil
                                }</span>
                        }()
                        <span class="cov0" title="0">if !isLen1 </span><span class="cov0" title="0">{
                                defer wg.Done()
                        }</span>
                        <span class="cov0" title="0">ret[i] = ec.marshalN__Type2githubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐType(ctx, sel, v[i])</span>
                }
                <span class="cov0" title="0">if isLen1 </span><span class="cov0" title="0">{
                        f(i)
                }</span> else<span class="cov0" title="0"> {
                        go f(i)
                }</span>

        }
        <span class="cov0" title="0">wg.Wait()

        for _, e := range ret </span><span class="cov0" title="0">{
                if e == graphql.Null </span><span class="cov0" title="0">{
                        return graphql.Null
                }</span>
        }

        <span class="cov0" title="0">return ret</span>
}

func (ec *executionContext) marshalO__Type2ᚖgithubᚗcomᚋ99designsᚋgqlgenᚋgraphqlᚋintrospectionᚐType(ctx context.Context, sel ast.SelectionSet, v *introspection.Type) graphql.Marshaler <span class="cov0" title="0">{
        if v == nil </span><span class="cov0" title="0">{
                return graphql.Null
        }</span>
        <span class="cov0" title="0">return ec.___Type(ctx, sel, v)</span>
}

// endregion ***************************** type.gotpl *****************************
</pre>
		
		<pre class="file" id="file5" style="display: none">package resolvers

import (
        "context"

        "github.com/nmarsollier/authgo/graph/tools"
        "github.com/nmarsollier/authgo/user"
)

func ChangePassword(ctx context.Context, oldPassword string, newPassword string) (bool, error) <span class="cov0" title="0">{
        token, err := tools.HeaderToken(ctx)
        if err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>

        <span class="cov0" title="0">env := tools.GqlDeps(ctx)
        if err := user.ChangePassword(token.UserID.Hex(), oldPassword, newPassword, env...); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>

        <span class="cov0" title="0">return true, nil</span>
}
</pre>
		
		<pre class="file" id="file6" style="display: none">package resolvers

import (
        "context"

        "github.com/nmarsollier/authgo/graph/model"
        "github.com/nmarsollier/authgo/graph/tools"
        "github.com/nmarsollier/authgo/user"
)

func CurrentUser(ctx context.Context) (*model.User, error) <span class="cov0" title="0">{
        token, err := tools.HeaderToken(ctx)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">deps := tools.GqlDeps(ctx)
        user, err := user.Get(token.UserID.Hex(), deps...)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">return ToUser(user), nil</span>
}
</pre>
		
		<pre class="file" id="file7" style="display: none">package resolvers

import (
        "context"

        "github.com/nmarsollier/authgo/graph/tools"
        "github.com/nmarsollier/authgo/user"
)

func Disable(ctx context.Context, userID string) (bool, error) <span class="cov0" title="0">{
        if err := tools.ValidateAdmin(ctx); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>

        <span class="cov0" title="0">env := tools.GqlDeps(ctx)

        if err := user.Disable(userID, env...); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>

        <span class="cov0" title="0">return true, nil</span>
}
</pre>
		
		<pre class="file" id="file8" style="display: none">package resolvers

import (
        "context"

        "github.com/nmarsollier/authgo/graph/tools"
        "github.com/nmarsollier/authgo/user"
)

func Enable(ctx context.Context, userID string) (bool, error) <span class="cov0" title="0">{
        if err := tools.ValidateAdmin(ctx); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>

        <span class="cov0" title="0">env := tools.GqlDeps(ctx)

        if err := user.Enable(userID, env...); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>

        <span class="cov0" title="0">return true, nil</span>
}
</pre>
		
		<pre class="file" id="file9" style="display: none">package resolvers

import (
        "context"

        "github.com/nmarsollier/authgo/graph/model"
        "github.com/nmarsollier/authgo/graph/tools"
        "github.com/nmarsollier/authgo/user"
)

func FindUserByID(ctx context.Context, id string) (*model.User, error) <span class="cov0" title="0">{
        /*_, err := tools.HeaderToken(ctx)
        if err != nil {
                return nil, err
        }*/

        env := tools.GqlDeps(ctx)
        user, err := user.Get(id, env...)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">return ToUser(user), nil</span>
}
</pre>
		
		<pre class="file" id="file10" style="display: none">package resolvers

import (
        "context"

        "github.com/nmarsollier/authgo/graph/tools"
        "github.com/nmarsollier/authgo/user"
)

func Grant(ctx context.Context, userID string, permissions []string) (bool, error) <span class="cov0" title="0">{
        if err := tools.ValidateAdmin(ctx); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>

        <span class="cov0" title="0">env := tools.GqlDeps(ctx)

        if err := user.Grant(userID, permissions, env...); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>

        <span class="cov0" title="0">return true, nil</span>
}
</pre>
		
		<pre class="file" id="file11" style="display: none">package resolvers

import (
        "context"

        "github.com/nmarsollier/authgo/graph/tools"
        "github.com/nmarsollier/authgo/user"
)

func Revoke(ctx context.Context, userID string, permissions []string) (bool, error) <span class="cov0" title="0">{
        if err := tools.ValidateAdmin(ctx); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>

        <span class="cov0" title="0">env := tools.GqlDeps(ctx)

        if err := user.Revoke(userID, permissions, env...); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>

        <span class="cov0" title="0">return true, nil</span>
}
</pre>
		
		<pre class="file" id="file12" style="display: none">package resolvers

import (
        "context"

        "github.com/nmarsollier/authgo/graph/model"
        "github.com/nmarsollier/authgo/graph/tools"
        "github.com/nmarsollier/authgo/user"
)

// SignIn is the resolver for the signIn field.
func SignIn(ctx context.Context, login string, password string) (*model.Token, error) <span class="cov0" title="0">{
        env := tools.GqlDeps(ctx)

        tokenString, err := user.SignIn(user.SignInRequest{Login: login, Password: password}, env...)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">return &amp;model.Token{
                Token: tokenString.Token,
        }, nil</span>
}
</pre>
		
		<pre class="file" id="file13" style="display: none">package resolvers

import (
        "context"

        "github.com/nmarsollier/authgo/graph/tools"
        "github.com/nmarsollier/authgo/token"
)

func SignOut(ctx context.Context) (bool, error) <span class="cov0" title="0">{
        tokenString, err := tools.TokenString(ctx)
        if err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>

        <span class="cov0" title="0">env := tools.GqlDeps(ctx)

        if err := token.Invalidate(tokenString, env...); err != nil </span><span class="cov0" title="0">{
                return false, err
        }</span>

        <span class="cov0" title="0">return true, nil</span>
}
</pre>
		
		<pre class="file" id="file14" style="display: none">package resolvers

import (
        "context"

        "github.com/nmarsollier/authgo/graph/model"
        "github.com/nmarsollier/authgo/graph/tools"
        "github.com/nmarsollier/authgo/user"
)

func SignUp(ctx context.Context, name string, login string, password string) (*model.Token, error) <span class="cov0" title="0">{
        env := tools.GqlDeps(ctx)
        token, err := user.SignUp(&amp;user.SignUpRequest{
                Name:     name,
                Login:    login,
                Password: password,
        }, env...)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return &amp;model.Token{
                Token: token.Token,
        }, nil</span>
}
</pre>
		
		<pre class="file" id="file15" style="display: none">package resolvers

import (
        "github.com/nmarsollier/authgo/graph/model"
        "github.com/nmarsollier/authgo/user"
)

func ToUser(user *user.UserData) (result *model.User) <span class="cov0" title="0">{
        return &amp;model.User{
                ID:          user.Id,
                Name:        user.Name,
                Permissions: user.Permissions,
                Login:       user.Login,
                Enabled:     user.Enabled,
        }
}</span>
</pre>
		
		<pre class="file" id="file16" style="display: none">package resolvers

import (
        "context"

        "github.com/nmarsollier/authgo/graph/model"
        "github.com/nmarsollier/authgo/graph/tools"
        "github.com/nmarsollier/authgo/user"
)

func Users(ctx context.Context) ([]*model.User, error) <span class="cov0" title="0">{
        if err := tools.ValidateAdmin(ctx); err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">env := tools.GqlDeps(ctx)
        users, err := user.FindAllUsers(env...)

        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>

        <span class="cov0" title="0">result := make([]*model.User, len(users))
        for i := range users </span><span class="cov0" title="0">{
                result[i] = ToUser(users[i])
        }</span>

        <span class="cov0" title="0">return result, nil</span>
}
</pre>
		
		<pre class="file" id="file17" style="display: none">package graph

// This file will be automatically regenerated based on the schema, any resolver implementations
// will be copied through when generating and any unknown code will be moved to the end.
// Code generated by github.com/99designs/gqlgen version v0.17.56

import (
        "context"

        "github.com/nmarsollier/authgo/graph/model"
        "github.com/nmarsollier/authgo/graph/resolvers"
)

// SignIn is the resolver for the signIn field.
func (r *mutationResolver) SignIn(ctx context.Context, login string, password string) (*model.Token, error) <span class="cov0" title="0">{
        return resolvers.SignIn(ctx, login, password)
}</span>

// SignUp is the resolver for the signUp field.
func (r *mutationResolver) SignUp(ctx context.Context, name string, login string, password string) (*model.Token, error) <span class="cov0" title="0">{
        return resolvers.SignUp(ctx, name, login, password)
}</span>

// SignOut is the resolver for the signOut field.
func (r *mutationResolver) SignOut(ctx context.Context) (bool, error) <span class="cov0" title="0">{
        return resolvers.SignOut(ctx)
}</span>

// ChangePassword is the resolver for the changePassword field.
func (r *mutationResolver) ChangePassword(ctx context.Context, oldPassword string, newPassword string) (bool, error) <span class="cov0" title="0">{
        return resolvers.ChangePassword(ctx, oldPassword, newPassword)
}</span>

// Enable is the resolver for the enable field.
func (r *mutationResolver) Enable(ctx context.Context, userID string) (bool, error) <span class="cov0" title="0">{
        return resolvers.Enable(ctx, userID)
}</span>

// Disable is the resolver for the disable field.
func (r *mutationResolver) Disable(ctx context.Context, userID string) (bool, error) <span class="cov0" title="0">{
        return resolvers.Disable(ctx, userID)
}</span>

// Grant is the resolver for the grant field.
func (r *mutationResolver) Grant(ctx context.Context, userID string, permissions []string) (bool, error) <span class="cov0" title="0">{
        return resolvers.Grant(ctx, userID, permissions)
}</span>

// Revoke is the resolver for the revoke field.
func (r *mutationResolver) Revoke(ctx context.Context, userID string, permissions []string) (bool, error) <span class="cov0" title="0">{
        return resolvers.Revoke(ctx, userID, permissions)
}</span>

// CurrentUser is the resolver for the currentUser field.
func (r *queryResolver) CurrentUser(ctx context.Context) (*model.User, error) <span class="cov0" title="0">{
        return resolvers.CurrentUser(ctx)
}</span>

// Users is the resolver for the users field.
func (r *queryResolver) Users(ctx context.Context) ([]*model.User, error) <span class="cov0" title="0">{
        return resolvers.Users(ctx)
}</span>

// Mutation returns model.MutationResolver implementation.
func (r *Resolver) Mutation() model.MutationResolver <span class="cov0" title="0">{ return &amp;mutationResolver{r} }</span>

// Query returns model.QueryResolver implementation.
func (r *Resolver) Query() model.QueryResolver <span class="cov0" title="0">{ return &amp;queryResolver{r} }</span>

type mutationResolver struct{ *Resolver }
type queryResolver struct{ *Resolver }
</pre>
		
		<pre class="file" id="file18" style="display: none">package server

import (
        "fmt"
        "net/http"

        "github.com/99designs/gqlgen/graphql/handler"
        "github.com/99designs/gqlgen/graphql/playground"
        "github.com/nmarsollier/authgo/graph"
        "github.com/nmarsollier/authgo/graph/model"
        "github.com/nmarsollier/authgo/tools/env"
        "github.com/nmarsollier/authgo/tools/log"
)

func Start() <span class="cov0" title="0">{
        logger := log.Get()
        port := env.Get().GqlPort
        srv := handler.NewDefaultServer(model.NewExecutableSchema(model.Config{Resolvers: &amp;graph.Resolver{}}))

        http.Handle("/", playground.Handler("GraphQL playground", "/query"))
        http.Handle("/query", srv)

        logger.Info("GraphQL playground in port : ", port)
        logger.Error(http.ListenAndServe(fmt.Sprintf(":%d", env.Get().GqlPort), nil))
}</span>
</pre>
		
		<pre class="file" id="file19" style="display: none">package tools

import (
        "context"
        "strings"

        "github.com/99designs/gqlgen/graphql"
        "github.com/nmarsollier/authgo/token"
        "github.com/nmarsollier/authgo/tools/errs"
        "github.com/nmarsollier/authgo/tools/log"
        "github.com/nmarsollier/authgo/user"
)

func ValidateLoggedIn(ctx context.Context) error <span class="cov0" title="0">{
        _, err := HeaderToken(ctx)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}
func ValidateAdmin(ctx context.Context) error <span class="cov0" title="0">{
        token, err := HeaderToken(ctx)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov0" title="0">env := GqlDeps(ctx)
        if !user.Granted(token.UserID.Hex(), "admin", env...) </span><span class="cov0" title="0">{
                log.Get(env...).Warn("Unauthorized")
                return errs.Unauthorized
        }</span>

        <span class="cov0" title="0">return nil</span>
}

// HeaderToken Token data from Authorization header
func HeaderToken(ctx context.Context) (*token.Token, error) <span class="cov0" title="0">{
        env := GqlDeps(ctx)

        tokenString, err := TokenString(ctx)
        if err != nil </span><span class="cov0" title="0">{
                return nil, errs.Unauthorized
        }</span>

        <span class="cov0" title="0">payload, err := token.Validate(tokenString, env...)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(env...).Error(err)
                return nil, err
        }</span>

        <span class="cov0" title="0">return payload, nil</span>
}

// HeaderToken Token data from Authorization header
func TokenString(ctx context.Context) (string, error) <span class="cov0" title="0">{
        operationContext := graphql.GetOperationContext(ctx)
        tokenString := operationContext.Headers.Get("Authorization")

        if strings.Index(strings.ToUpper(tokenString), "BEARER ") == 0 </span><span class="cov0" title="0">{
                tokenString = tokenString[7:]
        }</span> else<span class="cov0" title="0"> {
                return "", errs.Unauthorized
        }</span>

        <span class="cov0" title="0">return tokenString, nil</span>
}
</pre>
		
		<pre class="file" id="file20" style="display: none">package tools

import (
        "context"
)

func GqlDeps(c context.Context) []interface{} <span class="cov0" title="0">{

        var deps []interface{}

        deps = append(deps, gqlLogger(c))

        return deps
}</span>
</pre>
		
		<pre class="file" id="file21" style="display: none">package tools

import (
        "context"

        "github.com/99designs/gqlgen/graphql"
        "github.com/nmarsollier/authgo/tools/log"
        uuid "github.com/satori/go.uuid"
)

func newLogger(ctx context.Context, deps ...interface{}) log.LogRusEntry <span class="cov0" title="0">{
        operationContext := graphql.GetOperationContext(ctx)

        return log.Get(deps...).
                WithField(log.LOG_FIELD_CORRELATION_ID, getCorrelationId(ctx)).
                WithField(log.LOG_FIELD_CONTROLLER, "Rest").
                WithField(log.LOG_FIELD_HTTP_METHOD, operationContext.OperationName).
                WithField(log.LOG_FIELD_HTTP_PATH, operationContext.OperationName)
}</span>

func gqlLogger(ctx context.Context) log.LogRusEntry <span class="cov0" title="0">{
        operationContext := graphql.GetOperationContext(ctx)

        logger, exist := operationContext.Variables["logger"]
        if !exist </span><span class="cov0" title="0">{
                return newLogger(ctx)
        }</span>
        <span class="cov0" title="0">return logger.(log.LogRusEntry)</span>
}

func getCorrelationId(ctx context.Context) string <span class="cov0" title="0">{
        operationContext := graphql.GetOperationContext(ctx)
        value := operationContext.Headers.Get("Authorization")

        if len(value) == 0 </span><span class="cov0" title="0">{
                value = uuid.NewV4().String()
        }</span>

        <span class="cov0" title="0">return value</span>
}
</pre>
		
		<pre class="file" id="file22" style="display: none">package main

import (
        "github.com/nmarsollier/authgo/graph/server"
        routes "github.com/nmarsollier/authgo/rest"
)

//        @title                        AuthGo
//        @version                1.0
//        @description        Microservicio de Autentificación.

//        @contact.name        Nestor Marsollier
//        @contact.email        nmarsollier@gmail.com

// @host                localhost:3000
// @BasePath        /v1
func main() <span class="cov0" title="0">{
        go server.Start()

        routes.Start()
}</span>
</pre>
		
		<pre class="file" id="file23" style="display: none">package rabbit

import (
        "github.com/nmarsollier/authgo/tools/env"
        "github.com/nmarsollier/authgo/tools/log"
        "github.com/streadway/amqp"
)

func getChannel(deps ...interface{}) (RabbitChannel, error) <span class="cov8" title="1">{
        for _, o := range deps </span><span class="cov8" title="1">{
                if ti, ok := o.(RabbitChannel); ok </span><span class="cov8" title="1">{
                        return ti, nil
                }</span>
        }

        <span class="cov0" title="0">conn, err := amqp.Dial(env.Get().RabbitURL)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov0" title="0">channel, err := conn.Channel()
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov0" title="0">return rabbitChannel{ch: channel}, nil</span>
}
</pre>
		
		<pre class="file" id="file24" style="display: none">package rabbit

import "github.com/streadway/amqp"

type RabbitChannel interface {
        ExchangeDeclare(name string, chType string) error
        Publish(exchange string, routingKey string, body []byte) error
}

type rabbitChannel struct {
        ch *amqp.Channel
}

func (c rabbitChannel) ExchangeDeclare(
        name string,
        chType string,
) error <span class="cov0" title="0">{
        return c.ch.ExchangeDeclare(
                name,   // name
                chType, // type
                false,  // durable
                false,  // auto-deleted
                false,  // internal
                false,  // no-wait
                nil,    // arguments
        )
}</span>
func (c rabbitChannel) Publish(
        exchange string,
        routingKey string,
        body []byte,
) error <span class="cov0" title="0">{
        return c.ch.Publish(
                exchange,   // exchange
                routingKey, // routing key
                false,      // mandatory
                false,      // immediate
                amqp.Publishing{
                        Body: body,
                })
}</span>
</pre>
		
		<pre class="file" id="file25" style="display: none">// Code generated by MockGen. DO NOT EDIT.
// Source: ./rabbit/rabbit_channel.go

// Package rabbit is a generated GoMock package.
package rabbit

import (
        reflect "reflect"

        gomock "github.com/golang/mock/gomock"
)

// MockRabbitChannel is a mock of RabbitChannel interface.
type MockRabbitChannel struct {
        ctrl     *gomock.Controller
        recorder *MockRabbitChannelMockRecorder
}

// MockRabbitChannelMockRecorder is the mock recorder for MockRabbitChannel.
type MockRabbitChannelMockRecorder struct {
        mock *MockRabbitChannel
}

// NewMockRabbitChannel creates a new mock instance.
func NewMockRabbitChannel(ctrl *gomock.Controller) *MockRabbitChannel <span class="cov8" title="1">{
        mock := &amp;MockRabbitChannel{ctrl: ctrl}
        mock.recorder = &amp;MockRabbitChannelMockRecorder{mock}
        return mock
}</span>

// EXPECT returns an object that allows the caller to indicate expected use.
func (m *MockRabbitChannel) EXPECT() *MockRabbitChannelMockRecorder <span class="cov8" title="1">{
        return m.recorder
}</span>

// ExchangeDeclare mocks base method.
func (m *MockRabbitChannel) ExchangeDeclare(name, chType string) error <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "ExchangeDeclare", name, chType)
        ret0, _ := ret[0].(error)
        return ret0
}</span>

// ExchangeDeclare indicates an expected call of ExchangeDeclare.
func (mr *MockRabbitChannelMockRecorder) ExchangeDeclare(name, chType interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "ExchangeDeclare", reflect.TypeOf((*MockRabbitChannel)(nil).ExchangeDeclare), name, chType)
}</span>

// Publish mocks base method.
func (m *MockRabbitChannel) Publish(exchange, routingKey string, body []byte) error <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "Publish", exchange, routingKey, body)
        ret0, _ := ret[0].(error)
        return ret0
}</span>

// Publish indicates an expected call of Publish.
func (mr *MockRabbitChannelMockRecorder) Publish(exchange, routingKey, body interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "Publish", reflect.TypeOf((*MockRabbitChannel)(nil).Publish), exchange, routingKey, body)
}</span>
</pre>
		
		<pre class="file" id="file26" style="display: none">package rabbit

import (
        "encoding/json"

        "github.com/nmarsollier/authgo/tools/log"
)

//        @Summary                Mensage Rabbit
//        @Description        SendLogout envía un broadcast a rabbit con logout. Esto no es Rest es RabbitMQ.
//        @Tags                        Rabbit
//        @Accept                        json
//        @Produce                json
//        @Param                        body        body        message        true        "Token deshabilitado"
//        @Router                        /rabbit/logout [put]
//
// SendLogout envía un broadcast a rabbit con logout
func SendLogout(token string, deps ...interface{}) error <span class="cov8" title="1">{
        logger := log.Get(deps...).
                WithField(log.LOG_FIELD_CONTROLLER, "Rabbit").
                WithField(log.LOG_FIELD_RABBIT_ACTION, "Emit").
                WithField(log.LOG_FIELD_RABBIT_EXCHANGE, "auth").
                WithField(log.LOG_FIELD_RABBIT_QUEUE, "logout")

        corrId, _ := logger.Data()[log.LOG_FIELD_CORRELATION_ID].(string)
        send := message{
                CorrelationId: corrId,
                Message:       token,
        }

        deps = append(deps, logger)
        chanel, err := getChannel(deps...)
        if err != nil </span><span class="cov0" title="0">{
                logger.Error(err)
                return err
        }</span>

        <span class="cov8" title="1">err = chanel.ExchangeDeclare(
                "auth",   // name
                "fanout", // type
        )
        if err != nil </span><span class="cov0" title="0">{
                logger.Error(err)
                return err
        }</span>

        <span class="cov8" title="1">body, err := json.Marshal(send)
        if err != nil </span><span class="cov0" title="0">{
                logger.Error(err)
                return err
        }</span>

        <span class="cov8" title="1">err = chanel.Publish(
                "auth", // exchange
                "",     // routing key
                body)
        if err != nil </span><span class="cov0" title="0">{
                logger.Error(err)
                return err
        }</span>

        <span class="cov8" title="1">logger.Info("Rabbit logout enviado", string(body))
        return nil</span>
}

type message struct {
        CorrelationId string `json:"correlation_id" example:"123123" `
        Message       string `json:"message" example:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbklEIjoiNjZiNjBlYzhlMGYzYzY4OTUzMzJlOWNmIiwidXNlcklEIjoiNjZhZmQ3ZWU4YTBhYjRjZjQ0YTQ3NDcyIn0.who7upBctOpmlVmTvOgH1qFKOHKXmuQCkEjMV3qeySg" `
}
</pre>
		
		<pre class="file" id="file27" style="display: none">package rabbit

import (
        "github.com/golang/mock/gomock"
)

func DefaultMockRabbitChannel(ctrl *gomock.Controller, times int) *MockRabbitChannel <span class="cov8" title="1">{
        channel := NewMockRabbitChannel(ctrl)
        channel.EXPECT().ExchangeDeclare(gomock.Any(), gomock.Any()).Return(nil).Times(times)
        return channel
}</span>
</pre>
		
		<pre class="file" id="file28" style="display: none">package rest

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/rest/server"
        "github.com/nmarsollier/authgo/token"
)

// @Summary                Logout
// @Description        Desloguea un usuario en el sistema, invalida el token.
// @Tags                        Seguridad
// @Accept                        json
// @Produce                json
// @Param                        Authorization        header        string        true        "Bearer {token}"
// @Success                200                                "No Content"
// @Failure                500                                {object}        server.ErrorData        "Error response"
// @Router                        /v1/user/signout [get]
//
// Desloguea un usuario en el sistema, invalida el token.
func getUserSignOutRoute() <span class="cov8" title="1">{
        server.Router().GET(
                "/v1/user/signout",
                server.ValidateLoggedIn,
                signOut,
        )
}</span>

func signOut(c *gin.Context) <span class="cov8" title="1">{
        tokenString, _ := server.HeaderAuthorization(c)
        deps := server.GinDeps(c)

        if err := token.Invalidate(tokenString, deps...); err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
                return
        }</span>

        <span class="cov8" title="1">c.Done()</span>
}
</pre>
		
		<pre class="file" id="file29" style="display: none">package rest

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/rest/server"
        "github.com/nmarsollier/authgo/user"
)

//        @Summary                Listar Usuarios
//        @Description        Obtiene información de todos los usuarios. El usuario logueado debe tener permisos "admin".
//        @Tags                        Seguridad
//        @Accept                        json
//        @Produce                json
//        @Param                        Authorization        header                string                                true        "Bearer {token}"
//        @Success                200                                {array}                user.UserResponse        "Users"
//        @Failure                400                                {object}        errs.ValidationErr        "Bad Request"
//        @Failure                401                                {object}        server.ErrorData        "Unauthorized"
//        @Failure                404                                {object}        server.ErrorData        "Not Found"
//        @Failure                500                                {object}        server.ErrorData        "Internal Server Error"
//        @Router                        /v1/users [get]
//
// Obtiene información de todos los usuarios.
func getUsersRoute() <span class="cov8" title="1">{
        server.Router().GET(
                "/v1/users",
                server.ValidateAdmin,
                users,
        )
}</span>

func users(c *gin.Context) <span class="cov8" title="1">{
        deps := server.GinDeps(c)
        result, err := user.FindAllUsers(deps...)

        if err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
                return
        }</span>

        <span class="cov8" title="1">c.JSON(200, result)</span>
}
</pre>
		
		<pre class="file" id="file30" style="display: none">package rest

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/rest/server"
        "github.com/nmarsollier/authgo/user"
)

//        @Summary                Usuario Actual
//        @Description        Obtiene información del usuario actual.
//        @Tags                        Seguridad
//        @Accept                        json
//        @Produce                json
//        @Param                        Authorization        header                string                                true        "Bearer {token}"
//        @Success                200                                {object}        user.UserResponse        "User data"
//        @Failure                400                                {object}        errs.ValidationErr        "Bad Request"
//        @Failure                401                                {object}        server.ErrorData        "Unauthorized"
//        @Failure                404                                {object}        server.ErrorData        "Not Found"
//        @Failure                500                                {object}        server.ErrorData        "Internal Server Error"
//        @Router                        /v1/users/current [get]
//
// Obtiene información del usuario actual.
func getUsersCurrentRoute() <span class="cov8" title="1">{
        server.Router().GET(
                "/v1/users/current",
                server.ValidateLoggedIn,
                currentUser,
        )
}</span>

func currentUser(c *gin.Context) <span class="cov8" title="1">{
        token := server.HeaderToken(c)

        deps := server.GinDeps(c)
        user, err := user.Get(token.UserID.Hex(), deps...)
        if err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
                return
        }</span>

        <span class="cov8" title="1">c.JSON(200, user)</span>
}
</pre>
		
		<pre class="file" id="file31" style="display: none">package rest

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/rest/server"
        "github.com/nmarsollier/authgo/user"
)

//        @Summary                Registrar Usuario
//        @Description        Registra un nuevo usuario en el sistema.
//        @Tags                        Seguridad
//        @Accept                        json
//        @Produce                json
//        @Param                        body        body                user.SignUpRequest        true        "Informacion de ususario"
//        @Success                200                {object}        user.TokenResponse        "User Token"
//        @Failure                400                {object}        errs.ValidationErr        "Bad Request"
//        @Failure                401                {object}        server.ErrorData        "Unauthorized"
//        @Failure                404                {object}        server.ErrorData        "Not Found"
//        @Failure                500                {object}        server.ErrorData        "Internal Server Error"
//        @Router                        /v1/user [post]
//
// Registra un nuevo usuario en el sistema.
func postUsersRoute() <span class="cov8" title="1">{
        server.Router().POST(
                "/v1/user",
                signUp,
        )
}</span>

func signUp(c *gin.Context) <span class="cov8" title="1">{
        body := user.SignUpRequest{}
        if err := c.ShouldBindJSON(&amp;body); err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
                return
        }</span>

        <span class="cov8" title="1">deps := server.GinDeps(c)
        token, err := user.SignUp(&amp;body, deps...)
        if err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
                return
        }</span>

        <span class="cov8" title="1">c.JSON(200, token)</span>
}
</pre>
		
		<pre class="file" id="file32" style="display: none">package rest

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/rest/server"
        "github.com/nmarsollier/authgo/user"
)

//        @Summary                Cambiar Password
//        @Description        Cambia la contraseña del usuario actual.
//        @Tags                        Seguridad
//        @Accept                        json
//        @Produce                json
//        @Param                        body                        body        changePasswordBody        true        "Passwords"
//        @Param                        Authorization        header        string                                true        "Bearer {token}"
//        @Success                200                                "No Content"
//        @Failure                400                                {object}        errs.ValidationErr        "Bad Request"
//        @Failure                401                                {object}        server.ErrorData        "Unauthorized"
//        @Failure                404                                {object}        server.ErrorData        "Not Found"
//        @Failure                500                                {object}        server.ErrorData        "Internal Server Error"
//        @Router                        /v1/user/password [post]
//
// Cambia la contraseña del usuario actual.
func getUserPasswordRoute() <span class="cov8" title="1">{
        server.Router().POST(
                "/v1/user/password",
                server.ValidateLoggedIn,
                changePassword,
        )
}</span>

type changePasswordBody struct {
        Current string `json:"currentPassword" binding:"required,min=1,max=100"`
        New     string `json:"newPassword" binding:"required,min=1,max=100"`
}

func changePassword(c *gin.Context) <span class="cov8" title="1">{
        body := changePasswordBody{}
        if err := c.ShouldBindJSON(&amp;body); err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
                return
        }</span>
        <span class="cov8" title="1">token := server.HeaderToken(c)

        deps := server.GinDeps(c)
        if err := user.ChangePassword(token.UserID.Hex(), body.Current, body.New, deps...); err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
                return
        }</span>
}
</pre>
		
		<pre class="file" id="file33" style="display: none">package rest

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/rest/server"
        "github.com/nmarsollier/authgo/user"
)

//        @Summary                Login
//        @Description        Loguea un usuario en el sistema.
//        @Tags                        Seguridad
//        @Accept                        json
//        @Produce                json
//        @Param                        body        body                user.SignInRequest        true        "Sign in information"
//        @Success                200                {object}        user.TokenResponse        "User Token"
//        @Failure                400                {object}        errs.ValidationErr        "Bad Request"
//        @Failure                401                {object}        server.ErrorData        "Unauthorized"
//        @Failure                404                {object}        server.ErrorData        "Not Found"
//        @Failure                500                {object}        server.ErrorData        "Internal Server Error"
//        @Router                        /v1/user/signin [post]
//
// Loguea un usuario en el sistema.
func postUserSignInRoute() <span class="cov8" title="1">{
        server.Router().POST(
                "/v1/user/signin",
                signIn,
        )
}</span>

func signIn(c *gin.Context) <span class="cov8" title="1">{
        login := user.SignInRequest{}
        if err := c.ShouldBindJSON(&amp;login); err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
                return
        }</span>

        <span class="cov8" title="1">deps := server.GinDeps(c)
        token, err := user.SignIn(login, deps...)
        if err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
                return
        }</span>

        <span class="cov8" title="1">c.JSON(200, token)</span>
}
</pre>
		
		<pre class="file" id="file34" style="display: none">package rest

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/rest/server"
        "github.com/nmarsollier/authgo/user"
)

//        @Summary                Deshabilitar Usuario
//        @Description        Deshabilita un usuario en el sistema. El usuario logueado debe tener permisos "admin".
//        @Tags                        Seguridad
//        @Accept                        json
//        @Produce                json
//        @Param                        userId                        path        string        true        "ID del usuario a deshabilitar"
//        @Param                        Authorization        header        string        true        "Bearer {token}"
//        @Success                200                                "No Content"
//        @Failure                400                                {object}        errs.ValidationErr        "Bad Request"
//        @Failure                401                                {object}        server.ErrorData        "Unauthorized"
//        @Failure                404                                {object}        server.ErrorData        "Not Found"
//        @Failure                500                                {object}        server.ErrorData        "Internal Server Error"
//        @Router                        /v1/users/:userId/disable [post]
//
// Deshabilitar Usuario
func postUsersIdDisableRoute() <span class="cov8" title="1">{
        server.Router().POST(
                "/v1/users/:userID/disable",
                server.ValidateAdmin,
                disable,
        )
}</span>

func disable(c *gin.Context) <span class="cov8" title="1">{
        userId := c.Param("userID")

        deps := server.GinDeps(c)
        if err := user.Disable(userId, deps...); err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
        }</span>
}
</pre>
		
		<pre class="file" id="file35" style="display: none">package rest

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/rest/server"
        "github.com/nmarsollier/authgo/user"
)

//        @Summary                Enable User
//        @Description        Habilita un usuario en el sistema. El usuario logueado debe tener permisos "admin".
//        @Tags                        Seguridad
//        @Accept                        json
//        @Produce                json
//        @Param                        userId                        path        string        true        "ID del usuario a habilitar"
//        @Param                        Authorization        header        string        true        "Bearer {token}"
//        @Success                200                                "No Content"
//        @Failure                400                                {object}        errs.ValidationErr        "Bad Request"
//        @Failure                401                                {object}        server.ErrorData        "Unauthorized"
//        @Failure                404                                {object}        server.ErrorData        "Not Found"
//        @Failure                500                                {object}        server.ErrorData        "Internal Server Error"
//        @Router                        /v1/users/:userId/enable [post]
//
// Habilita un usuario en el sistema.
func postUsersIdEnableRoute() <span class="cov8" title="1">{
        server.Router().POST(
                "/v1/users/:userID/enable",
                server.ValidateAdmin,
                enable,
        )
}</span>

func enable(c *gin.Context) <span class="cov8" title="1">{
        userId := c.Param("userID")
        deps := server.GinDeps(c)

        if err := user.Enable(userId, deps...); err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
        }</span>
}
</pre>
		
		<pre class="file" id="file36" style="display: none">package rest

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/rest/server"
        "github.com/nmarsollier/authgo/user"
)

//        @Summary                Haiblitar permisos
//        @Description        Otorga permisos al usuario indicado, el usuario logueado tiene que tener permiso "admin".
//        @Tags                        Seguridad
//        @Accept                        json
//        @Produce                json
//        @Param                        userId                        path        string                                true        "ID del usuario a habilitar permiso"
//        @Param                        Authorization        header        string                                true        "Bearer {token}"
//        @Param                        body                        body        grantPermissionBody        true        "Permisos a Habilitar"
//        @Success                200                                "No Content"
//        @Failure                400                                {object}        errs.ValidationErr        "Bad Request"
//        @Failure                401                                {object}        server.ErrorData        "Unauthorized"
//        @Failure                404                                {object}        server.ErrorData        "Not Found"
//        @Failure                500                                {object}        server.ErrorData        "Internal Server Error"
//        @Router                        /v1/users/:userID/grant [post]
//
// Otorga permisos al usuario indicado.
func postUsersIdGrantRoute() <span class="cov8" title="1">{
        server.Router().POST(
                "/v1/users/:userID/grant",
                server.ValidateAdmin,
                grantPermission,
        )
}</span>

type grantPermissionBody struct {
        Permissions []string `json:"permissions" binding:"required"`
}

func grantPermission(c *gin.Context) <span class="cov8" title="1">{
        body := grantPermissionBody{}
        if err := c.ShouldBindJSON(&amp;body); err != nil </span><span class="cov0" title="0">{
                server.AbortWithError(c, err)
                return
        }</span>
        <span class="cov8" title="1">userId := c.Param("userID")

        deps := server.GinDeps(c)
        if err := user.Grant(userId, body.Permissions, deps...); err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
                return
        }</span>
}
</pre>
		
		<pre class="file" id="file37" style="display: none">package rest

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/rest/server"
        "github.com/nmarsollier/authgo/user"
)

//        @Summary                Quitar permisos
//        @Description        Quita permisos al usuario indicado, el usuario logueado tiene que tener permiso "admin".
//        @Tags                        Seguridad
//        @Accept                        json
//        @Produce                json
//        @Param                        userId                        path        string                                true        "ID del usuario a quitar permiso"
//        @Param                        Authorization        header        string                                true        "Bearer {token}"
//        @Param                        body                        body        grantPermissionBody        true        "Permisos a Qutiar"
//        @Success                200                                "No Content"
//        @Failure                400                                {object}        errs.ValidationErr        "Bad Request"
//        @Failure                401                                {object}        server.ErrorData        "Unauthorized"
//        @Failure                404                                {object}        server.ErrorData        "Not Found"
//        @Failure                500                                {object}        server.ErrorData        "Internal Server Error"
//        @Router                        /v1/users/:userID/revoke [post]
//
// Quita permisos al usuario indicado.
func postUsersIdRevokeRoute() <span class="cov8" title="1">{
        server.Router().POST(
                "/v1/users/:userID/revoke",
                server.ValidateAdmin,
                revokePermission,
        )
}</span>

type revokePermissionBody struct {
        Permissions []string `json:"permissions" binding:"required"`
}

func revokePermission(c *gin.Context) <span class="cov8" title="1">{
        body := revokePermissionBody{}
        if err := c.ShouldBindJSON(&amp;body); err != nil </span><span class="cov0" title="0">{
                server.AbortWithError(c, err)
                return
        }</span>

        <span class="cov8" title="1">userId := c.Param("userID")

        deps := server.GinDeps(c)
        if err := user.Revoke(userId, body.Permissions, deps...); err != nil </span><span class="cov8" title="1">{
                server.AbortWithError(c, err)
                return
        }</span>
}
</pre>
		
		<pre class="file" id="file38" style="display: none">package rest

import (
        "fmt"

        "github.com/nmarsollier/authgo/rest/server"
        "github.com/nmarsollier/authgo/tools/env"
)

// Start this server
func Start() <span class="cov0" title="0">{
        InitRoutes()
        server.Router().Run(fmt.Sprintf(":%d", env.Get().Port))
}</span>

func InitRoutes() <span class="cov8" title="1">{
        getUserSignOutRoute()
        getUsersCurrentRoute()
        getUsersRoute()
        getUserPasswordRoute()
        postUserSignInRoute()
        postUsersRoute()
        postUsersIdDisableRoute()
        postUsersIdEnableRoute()
        postUsersIdGrantRoute()
        postUsersIdRevokeRoute()
}</span>
</pre>
		
		<pre class="file" id="file39" style="display: none">package server

import (
        "errors"
        "strings"

        "github.com/gin-gonic/gin"
        "github.com/go-playground/validator/v10"
        "github.com/nmarsollier/authgo/tools/db"
        "github.com/nmarsollier/authgo/tools/errs"
        "go.mongodb.org/mongo-driver/mongo"
        "go.mongodb.org/mongo-driver/x/mongo/driver/topology"
)

func ErrorHandler(c *gin.Context) <span class="cov8" title="1">{
        c.Next()
        handleErrorIfNeeded(c)
}</span>

func handleErrorIfNeeded(c *gin.Context) <span class="cov8" title="1">{
        err := c.Errors.Last()
        if err == nil </span><span class="cov8" title="1">{
                return
        }</span>

        // Compruebo errores bien conocidos
        <span class="cov8" title="1">if errors.Is(err, mongo.ErrNoDocuments) </span><span class="cov8" title="1">{
                setError(c, errs.NotFound)
                return
        }</span>
        <span class="cov8" title="1">if errors.Is(err, topology.ErrServerSelectionTimeout) || errors.Is(err, topology.ErrTopologyClosed) </span><span class="cov8" title="1">{
                // Errores de conexión con MongoDB
                db.IsDbTimeoutError(err)
                setError(c, errs.Internal)
                return
        }</span>

        // Compruebo tipos de errores conocidos
        <span class="cov8" title="1">switch value := err.Err.(type) </span>{
        case errs.RestError:<span class="cov8" title="1">
                // Son validaciones hechas con NewCustom
                setError(c, value)</span>
        case errs.Validation:<span class="cov8" title="1">
                // Son validaciones hechas con NewValidation
                c.JSON(400, err)</span>
        case validator.ValidationErrors:<span class="cov8" title="1">
                // Son las validaciones de validator usadas en validaciones de estructuras
                handleValidationError(c, value)</span>
        case mongo.WriteException:<span class="cov8" title="1">
                // Errores de mongo
                if db.IsDbUniqueKeyError(value) </span><span class="cov8" title="1">{
                        setError(c, errs.AlreadyExist)
                }</span> else<span class="cov8" title="1"> {
                        setError(c, errs.Internal)
                }</span>
        case error:<span class="cov0" title="0">
                // Otros errores
                c.JSON(500, ErrorData{
                        Error: value.Error(),
                })</span>
        default:<span class="cov0" title="0">
                // No se sabe que es, devolvemos internal
                setError(c, errs.Internal)</span>
        }
}

func handleValidationError(c *gin.Context, validationErrors validator.ValidationErrors) <span class="cov8" title="1">{
        err := errs.NewValidation()

        for _, e := range validationErrors </span><span class="cov8" title="1">{
                err.Add(strings.ToLower(e.Field()), e.Tag())
        }</span>

        <span class="cov8" title="1">c.JSON(400, err)</span>
}

func setError(c *gin.Context, err errs.RestError) <span class="cov8" title="1">{
        c.JSON(err.Status(), err)
}</span>

type ErrorData struct {
        Error string `json:"error"`
}
</pre>
		
		<pre class="file" id="file40" style="display: none">package server

import (
        "strings"

        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/token"
        "github.com/nmarsollier/authgo/tools/errs"
        "github.com/nmarsollier/authgo/tools/log"
)

// HeaderAuthorization token string from Authorization header
func HeaderAuthorization(c *gin.Context) (string, error) <span class="cov8" title="1">{
        tokenString := c.GetHeader("Authorization")

        if strings.Index(strings.ToUpper(tokenString), "BEARER ") == 0 </span><span class="cov8" title="1">{
                return tokenString[7:], nil
        }</span>

        <span class="cov8" title="1">return "", errs.Unauthorized</span>
}

// HeaderToken Token data from Authorization header
func HeaderToken(c *gin.Context) *token.Token <span class="cov8" title="1">{
        return c.MustGet("auth_header").(*token.Token)
}</span>

func fetchAuthHeader(c *gin.Context) (*token.Token, error) <span class="cov8" title="1">{
        deps := GinDeps(c)
        tokenString, err := HeaderAuthorization(c)
        if err != nil </span><span class="cov8" title="1">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">payload, err := token.Validate(tokenString, deps...)
        if err != nil </span><span class="cov8" title="1">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">c.Set("auth_header", payload)

        return payload, nil</span>
}
</pre>
		
		<pre class="file" id="file41" style="display: none">package server

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/tools/log"
        uuid "github.com/satori/go.uuid"
)

func newGinLogger(c *gin.Context, deps ...interface{}) log.LogRusEntry <span class="cov8" title="1">{
        return log.Get(deps...).
                WithField(log.LOG_FIELD_CORRELATION_ID, getCorrelationId(c)).
                WithField(log.LOG_FIELD_CONTROLLER, "Rest").
                WithField(log.LOG_FIELD_HTTP_METHOD, c.Request.Method).
                WithField(log.LOG_FIELD_HTTP_PATH, c.Request.URL.Path)
}</span>

func GinLoggerMiddleware(deps ...interface{}) gin.HandlerFunc <span class="cov8" title="1">{
        return func(c *gin.Context) </span><span class="cov8" title="1">{
                logger := newGinLogger(c, deps...)
                c.Set("logger", logger)

                c.Next()

                if c.Request.Method != "OPTIONS" </span><span class="cov8" title="1">{
                        deps := GinDeps(c)
                        log.Get(deps...).WithField(log.LOG_FIELD_HTTP_STATUS, c.Writer.Status()).Info("Completed")
                }</span>
        }
}

func ginLogger(c *gin.Context) log.LogRusEntry <span class="cov8" title="1">{
        logger, exist := c.Get("logger")
        if !exist </span><span class="cov0" title="0">{
                return newGinLogger(c)
        }</span>
        <span class="cov8" title="1">return logger.(log.LogRusEntry)</span>
}

func getCorrelationId(c *gin.Context) string <span class="cov8" title="1">{
        value := c.GetHeader(log.LOG_FIELD_CORRELATION_ID)

        if len(value) == 0 </span><span class="cov8" title="1">{
                value = uuid.NewV4().String()
        }</span>

        <span class="cov8" title="1">return value</span>
}
</pre>
		
		<pre class="file" id="file42" style="display: none">package server

import (
        "time"

        "github.com/gin-contrib/gzip"
        "github.com/gin-gonic/gin"
        cors "github.com/itsjamie/gin-cors"
        _ "github.com/nmarsollier/authgo/docs"
        swaggerFiles "github.com/swaggo/files"
        ginSwagger "github.com/swaggo/gin-swagger"
)

var engine *gin.Engine = nil

func Router(deps ...interface{}) *gin.Engine <span class="cov8" title="1">{
        if engine == nil </span><span class="cov8" title="1">{

                engine = gin.Default()

                engine.Use(gzip.Gzip(gzip.DefaultCompression))
                engine.Use(GinLoggerMiddleware(deps...))

                engine.Use(cors.Middleware(cors.Config{
                        Origins:         "*",
                        Methods:         "GET, PUT, POST, DELETE",
                        RequestHeaders:  "Origin, Authorization, Content-Type",
                        ExposedHeaders:  "",
                        MaxAge:          50 * time.Second,
                        Credentials:     false,
                        ValidateHeaders: false,
                }))

                engine.Use(ErrorHandler)

                engine.GET("/docs/*any", ginSwagger.WrapHandler(swaggerFiles.Handler))
        }</span>

        <span class="cov8" title="1">return engine</span>
}

func AbortWithError(c *gin.Context, err error) <span class="cov8" title="1">{
        c.Error(err)
        c.Abort()
}</span>

// Obtiene el contexto a serivcios externos
// En prod este contexto esta vacio.
func GinDeps(c *gin.Context) []interface{} <span class="cov8" title="1">{
        var deps []interface{}
        // mock_deps solo es para mocks en testing
        if mocks, ok := c.Get("mock_deps"); ok </span><span class="cov8" title="1">{
                deps = mocks.([]interface{})
        }</span>

        <span class="cov8" title="1">deps = append(deps, ginLogger(c))

        return deps</span>
}
</pre>
		
		<pre class="file" id="file43" style="display: none">package server

import (
        "bytes"
        "encoding/json"
        "net/http"
        "net/http/httptest"
        "testing"

        "github.com/gin-gonic/gin"
        "github.com/stretchr/testify/assert"
)

// Obtiene Router engine con el contexto de testing adecuado
// mockeando interfaces a serivcios externos
func TestRouter(deps ...interface{}) *gin.Engine <span class="cov8" title="1">{
        engine = nil
        Router(deps...)
        if len(deps) &gt; 0 </span><span class="cov8" title="1">{
                engine.Use(func(c *gin.Context) </span><span class="cov8" title="1">{
                        c.Set("mock_deps", deps)
                        c.Next()
                }</span>)
        }
        <span class="cov8" title="1">return engine</span>
}

// Requests Test functions

func TestGetRequest(url string, tokenString string) (*http.Request, *httptest.ResponseRecorder) <span class="cov8" title="1">{
        req, _ := http.NewRequest("GET", url, bytes.NewBuffer([]byte{}))
        if len(tokenString) &gt; 0 </span><span class="cov8" title="1">{
                req.Header.Add("Authorization", "Bearer "+tokenString)
        }</span>
        <span class="cov8" title="1">w := httptest.NewRecorder()
        return req, w</span>
}

func TestPostRequest(url string, body interface{}, tokenString string) (*http.Request, *httptest.ResponseRecorder) <span class="cov8" title="1">{
        jsonBody, _ := json.Marshal(body)

        req, _ := http.NewRequest("POST", url, bytes.NewBuffer(jsonBody))
        if len(tokenString) &gt; 0 </span><span class="cov8" title="1">{
                req.Header.Add("Authorization", "Bearer "+tokenString)
        }</span>
        <span class="cov8" title="1">w := httptest.NewRecorder()
        return req, w</span>
}

// Assertion Functions
func AssertUnauthorized(t *testing.T, w *httptest.ResponseRecorder) <span class="cov8" title="1">{
        assert.Equal(t, http.StatusUnauthorized, w.Code)

        var result map[string]interface{}
        json.Unmarshal(w.Body.Bytes(), &amp;result)

        assert.Equal(t, result["error"], "Unauthorized")
}</span>

func AssertDocumentNotFound(t *testing.T, w *httptest.ResponseRecorder) <span class="cov8" title="1">{
        assert.Equal(t, http.StatusNotFound, w.Code)

        var result map[string]interface{}
        json.Unmarshal(w.Body.Bytes(), &amp;result)
        assert.Equal(t, "Document not found", result["error"])
}</span>

func AssertInternalServerError(t *testing.T, w *httptest.ResponseRecorder) <span class="cov8" title="1">{
        assert.Equal(t, http.StatusInternalServerError, w.Code)
}</span>

func AssertBadRequestError(t *testing.T, w *httptest.ResponseRecorder) <span class="cov8" title="1">{
        assert.Equal(t, http.StatusBadRequest, w.Code)
}</span>
</pre>
		
		<pre class="file" id="file44" style="display: none">package server

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/tools/errs"
        "github.com/nmarsollier/authgo/tools/log"
        "github.com/nmarsollier/authgo/user"
)

// Gin middleware to validate user token and Admin Access
func ValidateAdmin(c *gin.Context) <span class="cov8" title="1">{
        payload, err := fetchAuthHeader(c)

        if err != nil </span><span class="cov8" title="1">{
                c.Error(errs.Unauthorized)
                c.Abort()
                return
        }</span>

        <span class="cov8" title="1">deps := GinDeps(c)
        c.Set("logger", log.Get(deps...).WithField(log.LOG_FIELD_USER_ID, payload.UserID.Hex()))
        deps = GinDeps(c)

        if !user.Granted(payload.UserID.Hex(), "admin", deps...) </span><span class="cov8" title="1">{
                log.Get(deps...).Warn("Unauthorized")
                c.Error(errs.Unauthorized)
                c.Abort()
        }</span>
}
</pre>
		
		<pre class="file" id="file45" style="display: none">package server

import (
        "github.com/gin-gonic/gin"
        "github.com/nmarsollier/authgo/tools/errs"
        "github.com/nmarsollier/authgo/tools/log"
)

// Gin middleware to validate logged in user token
func ValidateLoggedIn(c *gin.Context) <span class="cov8" title="1">{
        token, err := fetchAuthHeader(c)
        if err != nil </span><span class="cov8" title="1">{
                c.Error(errs.Unauthorized)
                c.Abort()
                return
        }</span>

        <span class="cov8" title="1">deps := GinDeps(c)
        c.Set("logger", log.Get(deps...).WithField(log.LOG_FIELD_USER_ID, token.UserID.Hex()))</span>
}
</pre>
		
		<pre class="file" id="file46" style="display: none">package token

import (
        "time"

        "github.com/nmarsollier/authgo/tools/errs"
        gocache "github.com/patrickmn/go-cache"
)

var cache = gocache.New(60*time.Minute, 10*time.Minute)

// Add genera un nuevo token al cache
func cacheAdd(token *Token) error <span class="cov8" title="1">{
        tokenString, err := Encode(token)
        if err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov8" title="1">cache.Set(tokenString, token, gocache.DefaultExpiration)
        return nil</span>
}

func cacheGet(tokenString string) (*Token, error) <span class="cov8" title="1">{
        // Si esta en cache, retornamos el cache
        if found, ok := cache.Get(tokenString); ok </span><span class="cov8" title="1">{
                if token, ok := found.(*Token); ok </span><span class="cov8" title="1">{
                        return token, nil
                }</span>
        }

        <span class="cov8" title="1">return nil, errs.NotFound</span>
}

// Remove elimia un token del cache
func cacheRemove(token *Token) <span class="cov8" title="1">{
        if tokenString, err := Encode(token); err == nil </span><span class="cov8" title="1">{
                cache.Delete(tokenString)
        }</span>
}
</pre>
		
		<pre class="file" id="file47" style="display: none">package token

import (
        "go.mongodb.org/mongo-driver/bson/primitive"
)

// Create crea un nuevo token y lo almacena en la db
func Create(userID primitive.ObjectID, deps ...interface{}) (*Token, error) <span class="cov8" title="1">{
        token, err := insert(userID, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">cacheAdd(token)

        return token, nil</span>
}
</pre>
		
		<pre class="file" id="file48" style="display: none">package token

// Find busca un token en la db
func Find(tokenID string, deps ...interface{}) (*Token, error) <span class="cov8" title="1">{
        token, err := findByID(tokenID, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">cacheAdd(token)

        return token, nil</span>
}
</pre>
		
		<pre class="file" id="file49" style="display: none">package token

import (
        "github.com/nmarsollier/authgo/rabbit"
        "github.com/nmarsollier/authgo/tools/errs"
        "github.com/nmarsollier/authgo/tools/log"
)

// Invalidate invalida un token
func Invalidate(tokenString string, deps ...interface{}) error <span class="cov8" title="1">{
        token, err := Validate(tokenString, deps...)
        if err != nil </span><span class="cov0" title="0">{
                return errs.Unauthorized
        }</span>

        <span class="cov8" title="1">if err = delete(token.ID, deps...); err != nil </span><span class="cov8" title="1">{
                return err
        }</span>

        <span class="cov8" title="1">cacheRemove(token)

        go func() </span><span class="cov8" title="1">{
                if err = rabbit.SendLogout("Bearer "+tokenString, deps...); err != nil </span><span class="cov0" title="0">{
                        log.Get(deps...).Info("Rabbit logout no se pudo enviar")
                }</span>
        }()

        <span class="cov8" title="1">return nil</span>
}
</pre>
		
		<pre class="file" id="file50" style="display: none">package token

import (
        "context"

        "github.com/nmarsollier/authgo/tools/db"
        "github.com/nmarsollier/authgo/tools/errs"
        "github.com/nmarsollier/authgo/tools/log"
        "go.mongodb.org/mongo-driver/bson"
        "go.mongodb.org/mongo-driver/bson/primitive"
        "go.mongodb.org/mongo-driver/mongo"
)

var collection db.MongoCollection

func dbCollection(deps ...interface{}) (db.MongoCollection, error) <span class="cov8" title="1">{
        for _, o := range deps </span><span class="cov8" title="1">{
                if tc, ok := o.(db.MongoCollection); ok </span><span class="cov8" title="1">{
                        return tc, nil
                }</span>
        }

        <span class="cov0" title="0">if collection != nil </span><span class="cov0" title="0">{
                return collection, nil
        }</span>

        <span class="cov0" title="0">database, err := db.Get(deps...)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov0" title="0">_collection := database.Collection("tokens")

        _, err = _collection.Indexes().CreateOne(
                context.Background(),
                mongo.IndexModel{
                        Keys: bson.M{
                                "userId": 1, // index in ascending order
                        }, Options: nil,
                },
        )
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov0" title="0">collection = db.NewMongoCollection(_collection)

        return collection, nil</span>
}

// insert crea un nuevo token y lo almacena en la db
func insert(userID primitive.ObjectID, deps ...interface{}) (*Token, error) <span class="cov8" title="1">{
        collection, err := dbCollection(deps...)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">token := newToken(userID)

        _, err = collection.InsertOne(context.Background(), token)
        if err != nil </span><span class="cov8" title="1">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">return token, nil</span>
}

// findByID busca un token en la db
func findByID(tokenID string, deps ...interface{}) (*Token, error) <span class="cov8" title="1">{
        collection, err := dbCollection(deps...)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">_id, err := primitive.ObjectIDFromHex(tokenID)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, errs.Unauthorized
        }</span>

        <span class="cov8" title="1">token := &amp;Token{}
        filter := DbTokenIdFilter{ID: _id}

        if err = collection.FindOne(context.Background(), filter, token); err != nil </span><span class="cov8" title="1">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">return token, nil</span>
}

// delete como deshabilitado un token
func delete(tokenID primitive.ObjectID, deps ...interface{}) error <span class="cov8" title="1">{
        collection, err := dbCollection(deps...)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return err
        }</span>

        <span class="cov8" title="1">_, err = collection.UpdateOne(context.Background(),
                DbTokenIdFilter{ID: tokenID},
                DbDeleteTokenDocument{Set: DbDeleteTokenBody{Enabled: false}},
        )

        return err</span>
}

type DbDeleteTokenBody struct {
        Enabled bool `bson:"enabled"`
}

type DbDeleteTokenDocument struct {
        Set DbDeleteTokenBody `bson:"$set"`
}

type DbTokenIdFilter struct {
        ID primitive.ObjectID `bson:"_id"`
}
</pre>
		
		<pre class="file" id="file51" style="display: none">package token

import (
        "fmt"

        jwt "github.com/dgrijalva/jwt-go/v4"
        "github.com/nmarsollier/authgo/tools/env"
        "github.com/nmarsollier/authgo/tools/errs"
        "go.mongodb.org/mongo-driver/bson/primitive"
)

// Token es una estructura valor que representa un token.
type Token struct {
        ID      primitive.ObjectID `bson:"_id"`
        UserID  primitive.ObjectID `bson:"userId"`
        Enabled bool               `bson:"enabled"`
}

// NewToken crea un nuevo Token con la información minima necesaria
func newToken(userID primitive.ObjectID) *Token <span class="cov8" title="1">{
        return &amp;Token{
                ID:      primitive.NewObjectID(),
                UserID:  userID,
                Enabled: true,
        }
}</span>

// Encode codifica un Token obteniendo el tokenString
func Encode(t *Token) (string, error) <span class="cov8" title="1">{
        jwtToken := jwt.NewWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{
                "tokenID": t.ID.Hex(),
                "userID":  t.UserID.Hex(),
        })

        // Sign and get the complete encoded token as a string using the secret
        tokenString, err := jwtToken.SignedString([]byte(env.Get().JWTSecret))
        if err != nil </span><span class="cov0" title="0">{
                return "", err
        }</span>

        <span class="cov8" title="1">return tokenString, nil</span>
}

// descifra el token string y devuelve los datos del payload
func ExtractPayload(tokenString string) (string, string, error) <span class="cov8" title="1">{
        token, err := jwt.Parse(tokenString, func(token *jwt.Token) (interface{}, error) </span><span class="cov8" title="1">{
                if _, ok := token.Method.(*jwt.SigningMethodHMAC); !ok </span><span class="cov0" title="0">{
                        return nil, fmt.Errorf("unexpected signing method: %v", token.Header["alg"])
                }</span>

                <span class="cov8" title="1">return []byte(env.Get().JWTSecret), nil</span>
        })

        <span class="cov8" title="1">if err != nil || !token.Valid </span><span class="cov8" title="1">{
                return "", "", errs.Unauthorized
        }</span>

        <span class="cov8" title="1">claims, ok := token.Claims.(jwt.MapClaims)

        if !ok </span><span class="cov0" title="0">{
                return "", "", errs.Unauthorized
        }</span>

        <span class="cov8" title="1">tokenID := claims["tokenID"].(string)
        userID := claims["userID"].(string)

        return tokenID, userID, nil</span>
}
</pre>
		
		<pre class="file" id="file52" style="display: none">package token

import (
        "testing"

        "github.com/golang/mock/gomock"
        "github.com/nmarsollier/authgo/tools/db"
        "github.com/stretchr/testify/assert"
        "go.mongodb.org/mongo-driver/bson/primitive"
)

func TestToken() (*Token, string) <span class="cov8" title="1">{
        tokenData := &amp;Token{
                ID:      primitive.NewObjectID(),
                UserID:  primitive.NewObjectID(),
                Enabled: true,
        }

        tokenString, _ := Encode(tokenData)

        return tokenData, tokenString
}</span>

func ExpectTokenFindOne(coll *db.MockMongoCollection, tokenData *Token, times int) <span class="cov8" title="1">{
        coll.EXPECT().FindOne(gomock.Any(), gomock.Any(), gomock.Any()).DoAndReturn(
                func(arg1 interface{}, params DbTokenIdFilter, token *Token) error </span><span class="cov8" title="1">{
                        // Asign return values
                        *token = *tokenData
                        return nil
                }</span>,
        ).Times(times)
}

func ExpectTokenAuthFindOne(t *testing.T, coll *db.MockMongoCollection, tokenData *Token) <span class="cov8" title="1">{
        coll.EXPECT().FindOne(gomock.Any(), gomock.Any(), gomock.Any()).DoAndReturn(
                func(arg1 interface{}, tokenIdUpdate DbTokenIdFilter, token *Token) error </span><span class="cov8" title="1">{
                        assert.Equal(t, tokenData.ID, tokenIdUpdate.ID)

                        *token = *tokenData
                        return nil
                }</span>,
        ).Times(1)
}
</pre>
		
		<pre class="file" id="file53" style="display: none">package token

import (
        "github.com/nmarsollier/authgo/tools/errs"
)

// Validate dado un tokenString devuelve el Token asociado
func Validate(tokenString string, deps ...interface{}) (*Token, error) <span class="cov8" title="1">{
        if token, err := cacheGet(tokenString); err == nil </span><span class="cov8" title="1">{
                return token, err
        }</span>

        // Sino validamos el token y lo agregamos al cache
        <span class="cov8" title="1">tokenID, _, err := ExtractPayload(tokenString)
        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        // Buscamos el token en la db para validarlo
        <span class="cov8" title="1">token, err := Find(tokenID, deps...)
        if err != nil || !token.Enabled </span><span class="cov8" title="1">{
                return nil, errs.Unauthorized
        }</span>

        <span class="cov8" title="1">return token, nil</span>
}
</pre>
		
		<pre class="file" id="file54" style="display: none">package db

import (
        "context"

        "github.com/nmarsollier/authgo/tools/env"
        "github.com/nmarsollier/authgo/tools/log"
        "go.mongodb.org/mongo-driver/mongo"
        "go.mongodb.org/mongo-driver/mongo/options"
)

var database *mongo.Database

// Get the mongo database
func Get(deps ...interface{}) (*mongo.Database, error) <span class="cov0" title="0">{
        if database == nil </span><span class="cov0" title="0">{
                clientOptions := options.Client().ApplyURI(env.Get().MongoURL)

                client, err := mongo.Connect(context.TODO(), clientOptions)
                if err != nil </span><span class="cov0" title="0">{
                        log.Get(deps...).Fatal(err)
                        return nil, err
                }</span>

                <span class="cov0" title="0">database = client.Database("auth")</span>
        }
        <span class="cov0" title="0">return database, nil</span>
}
</pre>
		
		<pre class="file" id="file55" style="display: none">package db

import (
        "context"

        "go.mongodb.org/mongo-driver/mongo"
)

type MongoCollection interface {
        FindOne(ctx context.Context, filter interface{}, v interface{}) error

        InsertOne(ctx context.Context, document interface{}) (id interface{}, error error)

        UpdateOne(ctx context.Context, filter interface{}, update interface{}) (modified int64, error error)

        Find(ctx context.Context, filter interface{}) (cur Cursor, err error)
}

func NewMongoCollection(collection *mongo.Collection) MongoCollection <span class="cov0" title="0">{
        return &amp;mongoCollection{
                collection: collection,
        }
}</span>

type mongoCollection struct {
        collection *mongo.Collection
}

func (m *mongoCollection) FindOne(ctx context.Context, filter interface{}, v interface{}) error <span class="cov0" title="0">{
        if err := m.collection.FindOne(context.Background(), filter).Decode(v); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (m *mongoCollection) InsertOne(ctx context.Context, document interface{}) (id interface{}, error error) <span class="cov0" title="0">{
        insertedId, err := m.collection.InsertOne(context.Background(), document)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return insertedId.InsertedID, nil</span>
}

func (m *mongoCollection) UpdateOne(ctx context.Context, filter interface{}, update interface{}) (modified int64, error error) <span class="cov0" title="0">{
        insertedId, err := m.collection.UpdateOne(context.Background(), filter, update)
        if err != nil </span><span class="cov0" title="0">{
                return 0, err
        }</span>
        <span class="cov0" title="0">return insertedId.ModifiedCount, nil</span>
}

func (m *mongoCollection) Find(ctx context.Context, filter interface{}) (cur Cursor, err error) <span class="cov0" title="0">{
        cursor, err := m.collection.Find(context.Background(), filter)
        if err != nil </span><span class="cov0" title="0">{
                return nil, err
        }</span>
        <span class="cov0" title="0">return NewMongoCursor(cursor), nil</span>
}

type Cursor interface {
        Close(ctx context.Context) error
        Next(ctx context.Context) bool
        Decode(val interface{}) error
}

func NewMongoCursor(cursor *mongo.Cursor) Cursor <span class="cov0" title="0">{
        return &amp;mongoCursor{
                cursor: cursor,
        }
}</span>

type mongoCursor struct {
        cursor *mongo.Cursor
}

func (c *mongoCursor) Close(ctx context.Context) error <span class="cov0" title="0">{
        return c.cursor.Close(ctx)
}</span>

func (c *mongoCursor) Next(ctx context.Context) bool <span class="cov0" title="0">{
        return c.cursor.Next(ctx)
}</span>
func (c *mongoCursor) Decode(val interface{}) error <span class="cov0" title="0">{
        return c.cursor.Decode(val)
}</span>
</pre>
		
		<pre class="file" id="file56" style="display: none">// Code generated by MockGen. DO NOT EDIT.
// Source: ./tools/db/mongo_collection.go

// Package db is a generated GoMock package.
package db

import (
        context "context"
        reflect "reflect"

        gomock "github.com/golang/mock/gomock"
)

// MockMongoCollection is a mock of MongoCollection interface.
type MockMongoCollection struct {
        ctrl     *gomock.Controller
        recorder *MockMongoCollectionMockRecorder
}

// MockMongoCollectionMockRecorder is the mock recorder for MockMongoCollection.
type MockMongoCollectionMockRecorder struct {
        mock *MockMongoCollection
}

// NewMockMongoCollection creates a new mock instance.
func NewMockMongoCollection(ctrl *gomock.Controller) *MockMongoCollection <span class="cov8" title="1">{
        mock := &amp;MockMongoCollection{ctrl: ctrl}
        mock.recorder = &amp;MockMongoCollectionMockRecorder{mock}
        return mock
}</span>

// EXPECT returns an object that allows the caller to indicate expected use.
func (m *MockMongoCollection) EXPECT() *MockMongoCollectionMockRecorder <span class="cov8" title="1">{
        return m.recorder
}</span>

// Find mocks base method.
func (m *MockMongoCollection) Find(ctx context.Context, filter interface{}) (Cursor, error) <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "Find", ctx, filter)
        ret0, _ := ret[0].(Cursor)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// Find indicates an expected call of Find.
func (mr *MockMongoCollectionMockRecorder) Find(ctx, filter interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "Find", reflect.TypeOf((*MockMongoCollection)(nil).Find), ctx, filter)
}</span>

// FindOne mocks base method.
func (m *MockMongoCollection) FindOne(ctx context.Context, filter, v interface{}) error <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "FindOne", ctx, filter, v)
        ret0, _ := ret[0].(error)
        return ret0
}</span>

// FindOne indicates an expected call of FindOne.
func (mr *MockMongoCollectionMockRecorder) FindOne(ctx, filter, v interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "FindOne", reflect.TypeOf((*MockMongoCollection)(nil).FindOne), ctx, filter, v)
}</span>

// InsertOne mocks base method.
func (m *MockMongoCollection) InsertOne(ctx context.Context, document interface{}) (interface{}, error) <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "InsertOne", ctx, document)
        ret0, _ := ret[0].(interface{})
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// InsertOne indicates an expected call of InsertOne.
func (mr *MockMongoCollectionMockRecorder) InsertOne(ctx, document interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "InsertOne", reflect.TypeOf((*MockMongoCollection)(nil).InsertOne), ctx, document)
}</span>

// UpdateOne mocks base method.
func (m *MockMongoCollection) UpdateOne(ctx context.Context, filter, update interface{}) (int64, error) <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "UpdateOne", ctx, filter, update)
        ret0, _ := ret[0].(int64)
        ret1, _ := ret[1].(error)
        return ret0, ret1
}</span>

// UpdateOne indicates an expected call of UpdateOne.
func (mr *MockMongoCollectionMockRecorder) UpdateOne(ctx, filter, update interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "UpdateOne", reflect.TypeOf((*MockMongoCollection)(nil).UpdateOne), ctx, filter, update)
}</span>

// MockCursor is a mock of Cursor interface.
type MockCursor struct {
        ctrl     *gomock.Controller
        recorder *MockCursorMockRecorder
}

// MockCursorMockRecorder is the mock recorder for MockCursor.
type MockCursorMockRecorder struct {
        mock *MockCursor
}

// NewMockCursor creates a new mock instance.
func NewMockCursor(ctrl *gomock.Controller) *MockCursor <span class="cov8" title="1">{
        mock := &amp;MockCursor{ctrl: ctrl}
        mock.recorder = &amp;MockCursorMockRecorder{mock}
        return mock
}</span>

// EXPECT returns an object that allows the caller to indicate expected use.
func (m *MockCursor) EXPECT() *MockCursorMockRecorder <span class="cov8" title="1">{
        return m.recorder
}</span>

// Close mocks base method.
func (m *MockCursor) Close(ctx context.Context) error <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "Close", ctx)
        ret0, _ := ret[0].(error)
        return ret0
}</span>

// Close indicates an expected call of Close.
func (mr *MockCursorMockRecorder) Close(ctx interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "Close", reflect.TypeOf((*MockCursor)(nil).Close), ctx)
}</span>

// Decode mocks base method.
func (m *MockCursor) Decode(val interface{}) error <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "Decode", val)
        ret0, _ := ret[0].(error)
        return ret0
}</span>

// Decode indicates an expected call of Decode.
func (mr *MockCursorMockRecorder) Decode(val interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "Decode", reflect.TypeOf((*MockCursor)(nil).Decode), val)
}</span>

// Next mocks base method.
func (m *MockCursor) Next(ctx context.Context) bool <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "Next", ctx)
        ret0, _ := ret[0].(bool)
        return ret0
}</span>

// Next indicates an expected call of Next.
func (mr *MockCursorMockRecorder) Next(ctx interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "Next", reflect.TypeOf((*MockCursor)(nil).Next), ctx)
}</span>
</pre>
		
		<pre class="file" id="file57" style="display: none">package db

import (
        "github.com/golang/mock/gomock"
        "go.mongodb.org/mongo-driver/mongo"
)

// Mock Data
var TestIsUniqueError = mongo.WriteException{
        WriteErrors: []mongo.WriteError{
                {
                        Code: 11000,
                },
        },
}

var TestOtherDbError = mongo.WriteException{
        WriteErrors: []mongo.WriteError{
                {
                        Code: 1,
                },
        },
}

// Espect common functions
func ExpectFindOneError(coll *MockMongoCollection, err error, times int) <span class="cov8" title="1">{
        coll.EXPECT().FindOne(gomock.Any(), gomock.Any(), gomock.Any()).DoAndReturn(
                func(arg1 interface{}, params interface{}, update interface{}) error </span><span class="cov8" title="1">{
                        return err
                }</span>,
        ).Times(times)
}
func ExpectInsertOneError(coll *MockMongoCollection, err error, times int) <span class="cov8" title="1">{
        coll.EXPECT().InsertOne(gomock.Any(), gomock.Any()).Return("", err).Times(times)
}</span>

func ExpectUpdateOneError(coll *MockMongoCollection, err error, times int) <span class="cov8" title="1">{
        coll.EXPECT().UpdateOne(gomock.Any(), gomock.Any(), gomock.Any()).Return(int64(0), err).Times(times)
}</span>

func ExpectInsertOne(coll *MockMongoCollection, times int) <span class="cov8" title="1">{
        coll.EXPECT().InsertOne(gomock.Any(), gomock.Any()).Return("", nil).Times(times)
}</span>
</pre>
		
		<pre class="file" id="file58" style="display: none">package db

import (
        "go.mongodb.org/mongo-driver/mongo"
        "go.mongodb.org/mongo-driver/x/mongo/driver/topology"
)

// IsDbTimeoutError función a llamar cuando se produce un error de db
func IsDbTimeoutError(err interface{}) <span class="cov8" title="1">{
        if err == topology.ErrServerSelectionTimeout </span><span class="cov0" title="0">{
                database = nil
        }</span>
}

// IsDbUniqueKeyError retorna true si el error es de indice único
func IsDbUniqueKeyError(err error) bool <span class="cov8" title="1">{
        if wErr, ok := err.(mongo.WriteException); ok </span><span class="cov8" title="1">{
                for i := 0; i &lt; len(wErr.WriteErrors); i++ </span><span class="cov8" title="1">{
                        if wErr.WriteErrors[i].Code == 11000 </span><span class="cov8" title="1">{
                                return true
                        }</span>
                }
        }
        <span class="cov8" title="1">return false</span>
}
</pre>
		
		<pre class="file" id="file59" style="display: none">package env

import (
        "os"
        "strconv"
)

// Configuration properties
type Configuration struct {
        Port      int    `json:"port"`
        GqlPort   int    `json:"gqlPort"`
        RabbitURL string `json:"rabbitUrl"`
        MongoURL  string `json:"mongoUrl"`
        JWTSecret string `json:"jwtSecret"`
        FluentUrl string `json:"fluentUrl"`
}

var config *Configuration

func new() *Configuration <span class="cov8" title="1">{
        return &amp;Configuration{
                Port:      3000,
                GqlPort:   4000,
                RabbitURL: "amqp://localhost",
                MongoURL:  "mongodb://localhost:27017",
                JWTSecret: "ecb6d3479ac3823f1da7f314d871989b",
                FluentUrl: "localhost:24224",
        }
}</span>

// Get Obtiene las variables de entorno del sistema
func Get() *Configuration <span class="cov8" title="1">{
        if config == nil </span><span class="cov8" title="1">{
                config = load()
        }</span>

        <span class="cov8" title="1">return config</span>
}

// Load file properties
func load() *Configuration <span class="cov8" title="1">{
        result := new()

        if value := os.Getenv("RABBIT_URL"); len(value) &gt; 0 </span><span class="cov8" title="1">{
                result.RabbitURL = value
        }</span>

        <span class="cov8" title="1">if value := os.Getenv("MONGO_URL"); len(value) &gt; 0 </span><span class="cov8" title="1">{
                result.MongoURL = value
        }</span>

        <span class="cov8" title="1">if value := os.Getenv("FLUENT_URL"); len(value) &gt; 0 </span><span class="cov8" title="1">{
                result.FluentUrl = value
        }</span>

        <span class="cov8" title="1">if value := os.Getenv("PORT"); len(value) &gt; 0 </span><span class="cov8" title="1">{
                if intVal, err := strconv.Atoi(value); err == nil </span><span class="cov8" title="1">{
                        result.Port = intVal
                }</span>
        }

        <span class="cov8" title="1">if value := os.Getenv("GQL_PORT"); len(value) &gt; 0 </span><span class="cov0" title="0">{
                if intVal, err := strconv.Atoi(value); err == nil </span><span class="cov0" title="0">{
                        result.GqlPort = intVal
                }</span>
        }

        <span class="cov8" title="1">if value := os.Getenv("JWT_SECRET"); len(value) &gt; 0 </span><span class="cov8" title="1">{
                result.JWTSecret = value
        }</span>

        <span class="cov8" title="1">return result</span>
}
</pre>
		
		<pre class="file" id="file60" style="display: none">package errs

// Unauthorized el usuario no esta autorizado al recurso
var Unauthorized = NewRestError(401, "Unauthorized")

// NotFound cuando un registro no se encuentra en la db
var NotFound = NewRestError(404, "Document not found")

// AlreadyExist cuando no se puede ingresar un registro a la db
var AlreadyExist = NewRestError(400, "Already exist")

// Internal esta aplicación no sabe como manejar el error
var Internal = NewRestError(500, "Internal server error")

// - Creación de errors -
// NewRestError creates a new errCustom
func NewRestError(status int, message string) RestError <span class="cov8" title="1">{
        return &amp;restError{
                status:  status,
                Message: message,
        }
}</span>

//  - Algunas definiciones necesarias -

// RestError es una interfaz para definir errores custom
type RestError interface {
        Status() int
        Error() string
}

// restError es un error personalizado para http
type restError struct {
        status  int
        Message string `json:"error"`
}

func (e *restError) Error() string <span class="cov8" title="1">{
        return e.Message
}</span>

// Status http status code
func (e *restError) Status() int <span class="cov8" title="1">{
        return e.status
}</span>
</pre>
		
		<pre class="file" id="file61" style="display: none">package errs

import (
        "encoding/json"
)

// Validation es una interfaz para definir errores custom
// Validation es un error de validaciones de parameteros o de campos
type Validation interface {
        Add(path string, message string) Validation
        Error() string
}

func NewValidation() Validation <span class="cov8" title="1">{
        return &amp;ValidationErr{
                Messages: []errField{},
        }
}</span>

type ValidationErr struct {
        Messages []errField `json:"messages"`
}

func (e *ValidationErr) Error() string <span class="cov8" title="1">{
        body, err := json.Marshal(e)
        if err != nil </span><span class="cov0" title="0">{
                return "ErrValidation invalid."
        }</span>
        <span class="cov8" title="1">return string(body)</span>
}

// Add agrega errores a un validation error
func (e *ValidationErr) Add(path string, message string) Validation <span class="cov8" title="1">{
        err := errField{
                Path:    path,
                Message: message,
        }
        e.Messages = append(e.Messages, err)
        return e
}</span>

// errField define un campo inválido. path y mensaje de error
type errField struct {
        Path    string `json:"path"`
        Message string `json:"message"`
}
</pre>
		
		<pre class="file" id="file62" style="display: none">package log

import (
        "fmt"
        "net"

        "github.com/nmarsollier/authgo/tools/env"
        uuid "github.com/satori/go.uuid"
        "github.com/sirupsen/logrus"
)

const LOG_FIELD_CORRELATION_ID = "correlation_id"
const LOG_FIELD_CONTROLLER = "controller"
const LOG_FIELD_RABBIT_ACTION = "rabbit_action"
const LOG_FIELD_RABBIT_EXCHANGE = "exchange"
const LOG_FIELD_RABBIT_QUEUE = "queue"
const LOG_FIELD_HTTP_METHOD = "http_method"
const LOG_FIELD_HTTP_PATH = "http_path"
const LOG_FIELD_HTTP_STATUS = "http_status"
const LOG_FIELD_SERVER = "server"
const LOG_FIELD_USER_ID = "user_id"
const LOG_FIELD_THREAD = "thread"

func Get(deps ...interface{}) LogRusEntry <span class="cov8" title="1">{
        for _, o := range deps </span><span class="cov8" title="1">{
                if ti, ok := o.(LogRusEntry); ok </span><span class="cov8" title="1">{
                        return ti
                }</span>
        }
        <span class="cov8" title="1">logger := logrus.New()
        configureFluent(logger)

        logger.SetLevel(logrus.DebugLevel)
        result := logger.WithField(LOG_FIELD_SERVER, "authgo").WithField(LOG_FIELD_THREAD, uuid.NewV4().String())
        return logRusEntry{entry: result}</span>
}

func configureFluent(logger *logrus.Logger) <span class="cov8" title="1">{
        conn, err := net.Dial("tcp", env.Get().FluentUrl)
        if err == nil </span><span class="cov0" title="0">{
                logger.SetFormatter(&amp;logrus.JSONFormatter{})
                logger.SetOutput(conn)
                logger.AddHook(&amp;logrusConnectionHook{
                        conn: conn,
                        fmt: &amp;logrus.TextFormatter{
                                FullTimestamp:  true,
                                ForceColors:    true,
                                DisableSorting: false,
                        },
                })
        }</span>
}

type logrusConnectionHook struct {
        conn net.Conn
        fmt  logrus.Formatter
}

func (hook *logrusConnectionHook) Fire(entry *logrus.Entry) error <span class="cov0" title="0">{
        msg, err := hook.fmt.Format(entry)
        if err == nil </span><span class="cov0" title="0">{
                fmt.Println(string(msg))
        }</span>
        <span class="cov0" title="0">return nil</span>
}

func (hook *logrusConnectionHook) Levels() []logrus.Level <span class="cov0" title="0">{
        return logrus.AllLevels
}</span>

func (hook *logrusConnectionHook) Close() error <span class="cov0" title="0">{
        hook.conn.Close()
        return nil
}</span>
</pre>
		
		<pre class="file" id="file63" style="display: none">package log

import "github.com/sirupsen/logrus"

type LogRusEntry interface {
        Data() logrus.Fields
        Info(args ...interface{})
        Error(args ...interface{})
        Warn(args ...interface{})
        Fatal(args ...interface{})
        WithField(key string, value interface{}) LogRusEntry
}

type logRusEntry struct {
        entry *logrus.Entry
}

func (l logRusEntry) Error(args ...interface{}) <span class="cov8" title="1">{
        l.entry.Error(args...)
}</span>

func (l logRusEntry) WithField(key string, value interface{}) LogRusEntry <span class="cov8" title="1">{
        return logRusEntry{
                entry: l.entry.WithField(key, value),
        }
}</span>

func (l logRusEntry) Info(args ...interface{}) <span class="cov8" title="1">{
        l.entry.Info(args...)
}</span>

func (l logRusEntry) Warn(args ...interface{}) <span class="cov0" title="0">{
        l.entry.Warn(args...)
}</span>

func (l logRusEntry) Fatal(args ...interface{}) <span class="cov0" title="0">{
        l.entry.Fatal(args...)
}</span>

func (l logRusEntry) Data() logrus.Fields <span class="cov0" title="0">{
        return l.entry.Data
}</span>
</pre>
		
		<pre class="file" id="file64" style="display: none">// Code generated by MockGen. DO NOT EDIT.
// Source: ./tools/log/logrus_logger.go

// Package log is a generated GoMock package.
package log

import (
        reflect "reflect"

        gomock "github.com/golang/mock/gomock"
        logrus "github.com/sirupsen/logrus"
)

// MockLogRusEntry is a mock of LogRusEntry interface.
type MockLogRusEntry struct {
        ctrl     *gomock.Controller
        recorder *MockLogRusEntryMockRecorder
}

// MockLogRusEntryMockRecorder is the mock recorder for MockLogRusEntry.
type MockLogRusEntryMockRecorder struct {
        mock *MockLogRusEntry
}

// NewMockLogRusEntry creates a new mock instance.
func NewMockLogRusEntry(ctrl *gomock.Controller) *MockLogRusEntry <span class="cov8" title="1">{
        mock := &amp;MockLogRusEntry{ctrl: ctrl}
        mock.recorder = &amp;MockLogRusEntryMockRecorder{mock}
        return mock
}</span>

// EXPECT returns an object that allows the caller to indicate expected use.
func (m *MockLogRusEntry) EXPECT() *MockLogRusEntryMockRecorder <span class="cov8" title="1">{
        return m.recorder
}</span>

// Data mocks base method.
func (m *MockLogRusEntry) Data() logrus.Fields <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "Data")
        ret0, _ := ret[0].(logrus.Fields)
        return ret0
}</span>

// Data indicates an expected call of Data.
func (mr *MockLogRusEntryMockRecorder) Data() *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "Data", reflect.TypeOf((*MockLogRusEntry)(nil).Data))
}</span>

// Error mocks base method.
func (m *MockLogRusEntry) Error(args ...interface{}) <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        varargs := []interface{}{}
        for _, a := range args </span><span class="cov8" title="1">{
                varargs = append(varargs, a)
        }</span>
        <span class="cov8" title="1">m.ctrl.Call(m, "Error", varargs...)</span>
}

// Error indicates an expected call of Error.
func (mr *MockLogRusEntryMockRecorder) Error(args ...interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "Error", reflect.TypeOf((*MockLogRusEntry)(nil).Error), args...)
}</span>

// Fatal mocks base method.
func (m *MockLogRusEntry) Fatal(args ...interface{}) <span class="cov0" title="0">{
        m.ctrl.T.Helper()
        varargs := []interface{}{}
        for _, a := range args </span><span class="cov0" title="0">{
                varargs = append(varargs, a)
        }</span>
        <span class="cov0" title="0">m.ctrl.Call(m, "Fatal", varargs...)</span>
}

// Fatal indicates an expected call of Fatal.
func (mr *MockLogRusEntryMockRecorder) Fatal(args ...interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "Fatal", reflect.TypeOf((*MockLogRusEntry)(nil).Fatal), args...)
}</span>

// Info mocks base method.
func (m *MockLogRusEntry) Info(args ...interface{}) <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        varargs := []interface{}{}
        for _, a := range args </span><span class="cov8" title="1">{
                varargs = append(varargs, a)
        }</span>
        <span class="cov8" title="1">m.ctrl.Call(m, "Info", varargs...)</span>
}

// Info indicates an expected call of Info.
func (mr *MockLogRusEntryMockRecorder) Info(args ...interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "Info", reflect.TypeOf((*MockLogRusEntry)(nil).Info), args...)
}</span>

// Warn mocks base method.
func (m *MockLogRusEntry) Warn(args ...interface{}) <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        varargs := []interface{}{}
        for _, a := range args </span><span class="cov8" title="1">{
                varargs = append(varargs, a)
        }</span>
        <span class="cov8" title="1">m.ctrl.Call(m, "Warn", varargs...)</span>
}

// Warn indicates an expected call of Warn.
func (mr *MockLogRusEntryMockRecorder) Warn(args ...interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "Warn", reflect.TypeOf((*MockLogRusEntry)(nil).Warn), args...)
}</span>

// WithField mocks base method.
func (m *MockLogRusEntry) WithField(key string, value interface{}) LogRusEntry <span class="cov8" title="1">{
        m.ctrl.T.Helper()
        ret := m.ctrl.Call(m, "WithField", key, value)
        ret0, _ := ret[0].(LogRusEntry)
        return ret0
}</span>

// WithField indicates an expected call of WithField.
func (mr *MockLogRusEntryMockRecorder) WithField(key, value interface{}) *gomock.Call <span class="cov8" title="1">{
        mr.mock.ctrl.T.Helper()
        return mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "WithField", reflect.TypeOf((*MockLogRusEntry)(nil).WithField), key, value)
}</span>
</pre>
		
		<pre class="file" id="file65" style="display: none">package log

import (
        "github.com/golang/mock/gomock"
        "github.com/sirupsen/logrus"
)

func NewTestLogger(ctrl *gomock.Controller, withFieldCount int, errorCount int, infoCount int, dataCount int, warnCount int, fatalCount int) LogRusEntry <span class="cov8" title="1">{
        logger := NewMockLogRusEntry(ctrl)
        logger.EXPECT().WithField(gomock.Any(), gomock.Any()).Return(logger).Times(withFieldCount)
        logger.EXPECT().Error(gomock.Any()).Return().Times(errorCount)
        logger.EXPECT().Info(gomock.Any()).Return().Times(infoCount)
        logger.EXPECT().Warn(gomock.Any()).Return().Times(warnCount)
        logger.EXPECT().Fatal(gomock.Any()).Return().Times(fatalCount)

        logger.EXPECT().Data().Return(logrus.Fields{
                LOG_FIELD_CORRELATION_ID: "correlationId",
        }).Times(dataCount)

        return logger
}</span>
</pre>
		
		<pre class="file" id="file66" style="display: none">package user

// ChangePassword cambiar la contraseña del usuario indicado
func ChangePassword(userID string, current string, newPassword string, deps ...interface{}) error <span class="cov8" title="1">{
        user, err := findByID(userID, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return err
        }</span>

        <span class="cov8" title="1">if err = user.validatePassword(current); err != nil </span><span class="cov8" title="1">{
                return err
        }</span>

        <span class="cov8" title="1">if err = user.setPasswordText(newPassword); err != nil </span><span class="cov0" title="0">{
                return err
        }</span>

        <span class="cov8" title="1">_, err = update(user, deps...)

        return err</span>
}
</pre>
		
		<pre class="file" id="file67" style="display: none">package user

// Disable deshabilita un usuario
func Disable(userID string, deps ...interface{}) error <span class="cov8" title="1">{
        usr, err := findByID(userID, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return err
        }</span>

        <span class="cov8" title="1">usr.Enabled = false

        _, err = update(usr, deps...)

        return err</span>
}
</pre>
		
		<pre class="file" id="file68" style="display: none">package user

// Enable habilita un usuario
func Enable(userID string, deps ...interface{}) error <span class="cov8" title="1">{
        usr, err := findByID(userID, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return err
        }</span>

        <span class="cov8" title="1">usr.Enabled = true
        _, err = update(usr, deps...)

        return err</span>
}
</pre>
		
		<pre class="file" id="file69" style="display: none">package user

// FindAllUsers wrapper para obtener todos los usuarios
func FindAllUsers(deps ...interface{}) ([]*UserData, error) <span class="cov8" title="1">{

        user, err := findAll(deps...)

        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">result := []*UserData{}
        for i := 0; i &lt; len(user); i = i + 1 </span><span class="cov8" title="1">{
                result = append(result, &amp;UserData{
                        Id:          user[i].ID.Hex(),
                        Name:        user[i].Name,
                        Permissions: user[i].Permissions,
                        Login:       user[i].Login,
                        Enabled:     user[i].Enabled,
                })
        }</span>

        <span class="cov8" title="1">return result, nil</span>
}
</pre>
		
		<pre class="file" id="file70" style="display: none">package user

import (
        "github.com/nmarsollier/authgo/tools/errs"
)

// Get wrapper para obtener un usuario
func Get(userID string, deps ...interface{}) (*UserData, error) <span class="cov8" title="1">{
        user, err := findByID(userID, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">if !user.Enabled </span><span class="cov8" title="1">{
                return nil, errs.NotFound
        }</span>

        <span class="cov8" title="1">return &amp;UserData{
                Id:          user.ID.Hex(),
                Name:        user.Name,
                Permissions: user.Permissions,
                Login:       user.Login,
                Enabled:     user.Enabled,
        }, err</span>
}
</pre>
		
		<pre class="file" id="file71" style="display: none">package user

// Grant Le habilita los permisos enviados por parametros
func Grant(userID string, permissions []string, deps ...interface{}) error <span class="cov8" title="1">{
        user, err := findByID(userID, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return err
        }</span>

        <span class="cov8" title="1">for _, value := range permissions </span><span class="cov8" title="1">{
                user.grant(value)
        }</span>
        <span class="cov8" title="1">_, err = update(user, deps...)

        return err</span>
}
</pre>
		
		<pre class="file" id="file72" style="display: none">package user

// Granted verifica si el usuario tiene el permiso
func Granted(userID string, permission string, deps ...interface{}) bool <span class="cov8" title="1">{
        usr, err := findByID(userID, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return false
        }</span>

        <span class="cov8" title="1">return usr.granted(permission)</span>
}
</pre>
		
		<pre class="file" id="file73" style="display: none">package user

import (
        "context"
        "time"

        "github.com/nmarsollier/authgo/tools/db"
        "github.com/nmarsollier/authgo/tools/log"
        "go.mongodb.org/mongo-driver/bson"
        "go.mongodb.org/mongo-driver/bson/primitive"
        "go.mongodb.org/mongo-driver/mongo"
        "go.mongodb.org/mongo-driver/mongo/options"
)

var collection db.MongoCollection

type DbUserUpdateDocumentBody struct {
        Name        string    `bson:"name" validate:"required,min=1,max=100"`
        Password    string    `bson:"password" validate:"required"`
        Permissions []string  `bson:"permissions"`
        Enabled     bool      `bson:"enabled"`
        Updated     time.Time `bson:"updated"`
}

type DbUserUpdateDocument struct {
        Set DbUserUpdateDocumentBody `bson:"$set"`
}

type DbUserIdFilter struct {
        ID primitive.ObjectID `bson:"_id"`
}
type DbUserLoginFilter struct {
        Login string `bson:"login"`
}

func dbCollection(deps ...interface{}) (db.MongoCollection, error) <span class="cov8" title="1">{
        for _, p := range deps </span><span class="cov8" title="1">{
                if coll, ok := p.(db.MongoCollection); ok </span><span class="cov8" title="1">{
                        return coll, nil
                }</span>
        }

        <span class="cov0" title="0">if collection != nil </span><span class="cov0" title="0">{
                return collection, nil
        }</span>

        <span class="cov0" title="0">database, err := db.Get(deps...)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov0" title="0">col := database.Collection("users")

        _, err = col.Indexes().CreateOne(
                context.Background(),
                mongo.IndexModel{
                        Keys:    DbUserLoginFilter{Login: ""},
                        Options: options.Index().SetUnique(true),
                },
        )
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
        }</span>

        <span class="cov0" title="0">collection = db.NewMongoCollection(col)
        return collection, nil</span>
}

func insert(user *User, deps ...interface{}) (*User, error) <span class="cov8" title="1">{
        if err := user.validateSchema(); err != nil </span><span class="cov8" title="1">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">var collection, err = dbCollection(deps...)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">if _, err := collection.InsertOne(context.Background(), user); err != nil </span><span class="cov8" title="1">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">return user, nil</span>
}

func update(user *User, deps ...interface{}) (*User, error) <span class="cov8" title="1">{
        if err := user.validateSchema(); err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">var collection, err = dbCollection(deps...)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">user.Updated = time.Now()

        _, err = collection.UpdateOne(context.Background(),
                DbUserIdFilter{ID: user.ID},
                DbUserUpdateDocument{
                        Set: DbUserUpdateDocumentBody{
                                Password:    user.Password,
                                Name:        user.Name,
                                Enabled:     user.Enabled,
                                Updated:     user.Updated,
                                Permissions: user.Permissions,
                        },
                },
        )

        if err != nil </span><span class="cov8" title="1">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">return user, nil</span>
}

// FindAll devuelve todos los usuarios
func findAll(deps ...interface{}) ([]*User, error) <span class="cov8" title="1">{
        var collection, err = dbCollection(deps...)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">filter := bson.D{}
        cur, err := collection.Find(context.Background(), filter)
        if err != nil </span><span class="cov8" title="1">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>
        <span class="cov8" title="1">defer cur.Close(context.Background())

        users := []*User{}
        for cur.Next(context.Background()) </span><span class="cov8" title="1">{
                user := &amp;User{}
                if err := cur.Decode(user); err != nil </span><span class="cov0" title="0">{
                        return nil, err
                }</span>
                <span class="cov8" title="1">users = append(users, user)</span>
        }

        <span class="cov8" title="1">return users, nil</span>
}

// FindByID lee un usuario desde la db
func findByID(userID string, deps ...interface{}) (*User, error) <span class="cov8" title="1">{
        var collection, err = dbCollection(deps...)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">_id, err := primitive.ObjectIDFromHex(userID)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, ErrID
        }</span>

        <span class="cov8" title="1">user := &amp;User{}
        filter := DbUserIdFilter{ID: _id}
        if err = collection.FindOne(context.Background(), filter, user); err != nil </span><span class="cov8" title="1">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">return user, nil</span>
}

// FindByLogin lee un usuario desde la db
func findByLogin(login string, deps ...interface{}) (*User, error) <span class="cov8" title="1">{
        var collection, err = dbCollection(deps...)
        if err != nil </span><span class="cov0" title="0">{
                log.Get(deps...).Error(err)
                return nil, err
        }</span>

        <span class="cov8" title="1">user := &amp;User{}
        filter := DbUserLoginFilter{Login: login}
        err = collection.FindOne(context.Background(), filter, user)
        if err != nil </span><span class="cov8" title="1">{
                log.Get(deps...).Error(err)
                if err == mongo.ErrNoDocuments </span><span class="cov8" title="1">{
                        return nil, ErrLogin
                }</span>
                <span class="cov8" title="1">return nil, err</span>
        }

        <span class="cov8" title="1">return user, nil</span>
}
</pre>
		
		<pre class="file" id="file74" style="display: none">package user

// Revoke Le revoca los permisos enviados por parametros
func Revoke(userID string, permissions []string, deps ...interface{}) error <span class="cov8" title="1">{
        user, err := findByID(userID, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return err
        }</span>

        <span class="cov8" title="1">for _, value := range permissions </span><span class="cov8" title="1">{
                user.revoke(value)
        }</span>
        <span class="cov8" title="1">_, err = update(user, deps...)

        return err</span>
}
</pre>
		
		<pre class="file" id="file75" style="display: none">package user

import (
        "time"

        "github.com/go-playground/validator/v10"
        "go.mongodb.org/mongo-driver/bson/primitive"
        "golang.org/x/crypto/bcrypt"
)

// User data structure
type User struct {
        ID          primitive.ObjectID `bson:"_id"`
        Name        string             `bson:"name" validate:"required,min=1,max=100"`
        Login       string             `bson:"login" validate:"required,min=5,max=100"`
        Password    string             `bson:"password" validate:"required"`
        Permissions []string           `bson:"permissions"`
        Enabled     bool               `bson:"enabled"`
        Created     time.Time          `bson:"created"`
        Updated     time.Time          `bson:"updated"`
}

// NewUser Nueva instancia de usuario
func NewUser() *User <span class="cov8" title="1">{
        return &amp;User{
                ID:          primitive.NewObjectID(),
                Enabled:     true,
                Created:     time.Now(),
                Updated:     time.Now(),
                Permissions: []string{"user"},
        }
}</span>

// setPasswordText Asigna la contraseña en modo texto, la encripta
func (e *User) setPasswordText(pwd string) error <span class="cov8" title="1">{
        hash, err := encryptPassword(pwd)
        if err != nil </span><span class="cov0" title="0">{
                return ErrPassword
        }</span>

        <span class="cov8" title="1">e.Password = hash
        return nil</span>
}

// validatePassword Valida si la contraseña es la correcta
func (e *User) validatePassword(plainPwd string) error <span class="cov8" title="1">{
        if err := bcrypt.CompareHashAndPassword([]byte(e.Password), []byte(plainPwd)); err != nil </span><span class="cov8" title="1">{
                return ErrPassword
        }</span>
        <span class="cov8" title="1">return nil</span>
}

// granted verifica si el usuario tiene el permiso indicado
func (e *User) granted(permission string) bool <span class="cov8" title="1">{
        for _, p := range e.Permissions </span><span class="cov8" title="1">{
                if p == permission </span><span class="cov8" title="1">{
                        return true
                }</span>
        }
        <span class="cov8" title="1">return false</span>
}

// grant le otorga el permiso indicado al usuario
func (e *User) grant(permission string) <span class="cov8" title="1">{
        if !e.granted(permission) </span><span class="cov8" title="1">{
                e.Permissions = append(e.Permissions, permission)
        }</span>
}

// revoke le revoca el permiso indicado al usuario
func (e *User) revoke(permission string) <span class="cov8" title="1">{
        if e.granted(permission) </span><span class="cov8" title="1">{
                var newPermissions []string
                for _, p := range e.Permissions </span><span class="cov8" title="1">{
                        if p != permission </span><span class="cov8" title="1">{
                                newPermissions = append(newPermissions, p)
                        }</span>
                }
                <span class="cov8" title="1">e.Permissions = newPermissions</span>
        }
}

// validateSchema valida la estructura para ser insertada en la db
func (e *User) validateSchema() error <span class="cov8" title="1">{
        return validator.New().Struct(e)
}</span>

func encryptPassword(pwd string) (string, error) <span class="cov8" title="1">{
        hash, err := bcrypt.GenerateFromPassword([]byte(pwd), bcrypt.MinCost)
        if err != nil </span><span class="cov0" title="0">{
                return "", ErrPassword
        }</span>

        <span class="cov8" title="1">return string(hash), nil</span>
}
</pre>
		
		<pre class="file" id="file76" style="display: none">package user

import (
        "github.com/nmarsollier/authgo/token"
        "github.com/nmarsollier/authgo/tools/errs"
)

type SignInRequest struct {
        Password string `json:"password" binding:"required"`
        Login    string `json:"login" binding:"required"`
}

type TokenResponse struct {
        Token string `json:"token"`
}

// SignIn is the controller to sign in users
func SignIn(data SignInRequest, deps ...interface{}) (*TokenResponse, error) <span class="cov8" title="1">{
        user, err := findByLogin(data.Login, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">if !user.Enabled </span><span class="cov8" title="1">{
                return nil, errs.Unauthorized
        }</span>

        <span class="cov8" title="1">if err = user.validatePassword(data.Password); err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">newToken, err := token.Create(user.ID, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return nil, errs.Unauthorized
        }</span>

        <span class="cov8" title="1">tokenString, err := token.Encode(newToken)
        if err != nil </span><span class="cov0" title="0">{
                return nil, errs.Unauthorized
        }</span>

        <span class="cov8" title="1">return &amp;TokenResponse{Token: tokenString}, nil</span>
}
</pre>
		
		<pre class="file" id="file77" style="display: none">package user

import (
        "github.com/nmarsollier/authgo/token"
        "github.com/nmarsollier/authgo/tools/errs"
)

// SignUpRequest es un nuevo usuario
type SignUpRequest struct {
        Name     string `json:"name" binding:"required"`
        Password string `json:"password" binding:"required"`
        Login    string `json:"login" binding:"required"`
}

// SignUp is the controller to signup new users
func SignUp(user *SignUpRequest, deps ...interface{}) (*TokenResponse, error) <span class="cov8" title="1">{
        newUser := NewUser()
        newUser.Login = user.Login
        newUser.Name = user.Name
        newUser.setPasswordText(user.Password)

        newUser, err := insert(newUser, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">newToken, err := token.Create(newUser.ID, deps...)
        if err != nil </span><span class="cov8" title="1">{
                return nil, errs.Internal
        }</span>

        <span class="cov8" title="1">tokenString, err := token.Encode(newToken)
        if err != nil </span><span class="cov0" title="0">{
                return nil, errs.Unauthorized
        }</span>

        <span class="cov8" title="1">return &amp;TokenResponse{Token: tokenString}, nil</span>
}
</pre>
		
		<pre class="file" id="file78" style="display: none">package user

import (
        "github.com/golang/mock/gomock"
        "github.com/nmarsollier/authgo/tools/db"
)

// Mock Data
func TestUser() (*User, string) <span class="cov8" title="1">{
        password := "123"
        userData := NewUser()
        userData.Login = "Login"
        userData.Name = "Name"
        userData.Permissions = []string{"user", "other"}
        userData.setPasswordText(password)
        return userData, password
}</span>

func TestAdminUser() (*User, string) <span class="cov8" title="1">{
        password := "123"
        userData := NewUser()
        userData.Login = "Login"
        userData.Name = "Name"
        userData.Permissions = []string{"user", "admin"}
        userData.setPasswordText(password)
        return userData, password
}</span>

func ExpectUserFindOne(coll *db.MockMongoCollection, userData *User, times int) <span class="cov8" title="1">{
        coll.EXPECT().FindOne(gomock.Any(), gomock.Any(), gomock.Any()).DoAndReturn(
                func(arg1 interface{}, params DbUserIdFilter, update *User) error </span><span class="cov8" title="1">{
                        *update = *userData
                        return nil
                }</span>,
        ).Times(times)
}
</pre>
		
		<pre class="file" id="file79" style="display: none">package user

type UserData struct {
        Id          string   `json:"id"`
        Name        string   `json:"name"`
        Permissions []string `json:"permissions"`
        Login       string   `json:"login"`
        Enabled     bool     `json:"enabled"`
}

func (UserData) IsEntity() {<span class="cov0" title="0">}</span>
</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible;
		files.addEventListener('change', onChange, false);
		function select(part) {
			if (visible)
				visible.style.display = 'none';
			visible = document.getElementById(part);
			if (!visible)
				return;
			files.value = part;
			visible.style.display = 'block';
			location.hash = part;
		}
		function onChange() {
			select(files.value);
			window.scrollTo(0, 0);
		}
		if (location.hash != "") {
			select(location.hash.substr(1));
		}
		if (!visible) {
			select("file0");
		}
	})();
	</script>
</html>
